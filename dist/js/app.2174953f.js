(function(e){function t(t){for(var a,l,r=t[0],o=t[1],j=t[2],d=0,b=[];d<r.length;d++)l=r[d],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&b.push(s[l][0]),s[l]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);O&&O(t);while(b.length)b.shift()();return n.push.apply(n,j||[]),c()}function c(){for(var e,t=0;t<n.length;t++){for(var c=n[t],a=!0,l=1;l<c.length;l++){var r=c[l];0!==s[r]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=c[0]))}return e}var a={},l={app:0},s={app:0},n=[];function r(e){return o.p+"./js/"+({}[e]||e)+"."+{"chunk-2d0e95df":"aab16759","chunk-30779b1a":"c2086e47","chunk-7915fb20":"3a471099"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var c=a[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.e=function(e){var t=[],c={"chunk-30779b1a":1,"chunk-7915fb20":1};l[e]?t.push(l[e]):0!==l[e]&&c[e]&&t.push(l[e]=new Promise((function(t,c){for(var a="css/"+({}[e]||e)+"."+{"chunk-2d0e95df":"31d6cfe0","chunk-30779b1a":"ead5d3ab","chunk-7915fb20":"5fd2e640"}[e]+".css",s=o.p+a,n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var j=n[r],d=j.getAttribute("data-href")||j.getAttribute("href");if("stylesheet"===j.rel&&(d===a||d===s))return t()}var b=document.getElementsByTagName("style");for(r=0;r<b.length;r++){j=b[r],d=j.getAttribute("data-href");if(d===a||d===s)return t()}var O=document.createElement("link");O.rel="stylesheet",O.type="text/css",O.onload=t,O.onerror=function(t){var a=t&&t.target&&t.target.src||s,n=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=a,delete l[e],O.parentNode.removeChild(O),c(n)},O.href=s;var N=document.getElementsByTagName("head")[0];N.appendChild(O)})).then((function(){l[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,c){a=s[e]=[t,c]}));t.push(a[2]=n);var j,d=document.createElement("script");d.charset="utf-8",d.timeout=120,o.nc&&d.setAttribute("nonce",o.nc),d.src=r(e);var b=new Error;j=function(t){d.onerror=d.onload=null,clearTimeout(O);var c=s[e];if(0!==c){if(c){var a=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;b.message="Loading chunk "+e+" failed.\n("+a+": "+l+")",b.name="ChunkLoadError",b.type=a,b.request=l,c[1](b)}s[e]=void 0}};var O=setTimeout((function(){j({type:"timeout",target:d})}),12e4);d.onerror=d.onload=j,document.head.appendChild(d)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,c){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(c,a,function(t){return e[t]}.bind(null,a));return c},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://sunny586.github.io/dist/",o.oe=function(e){throw e};var j=window["webpackJsonp"]=window["webpackJsonp"]||[],d=j.push.bind(j);j.push=t,j=j.slice();for(var b=0;b<j.length;b++)t(j[b]);var O=d;n.push([0,"chunk-libs"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"00af":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"offsetHeight scrollHeight clientHeight 区别"),Object(a["createElementVNode"])("h2",null,"盒子模型"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"width height"),Object(a["createElementVNode"])("li",null,"padding"),Object(a["createElementVNode"])("li",null,"border"),Object(a["createElementVNode"])("li",null,"margin"),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("strong",null,"box-sizing")])]),Object(a["createElementVNode"])("h2",null,"offsetHeight offsetWidth"),Object(a["createElementVNode"])("p",null,"包括：border + padding + content"),Object(a["createElementVNode"])("h2",null,"clientHeight clientWidth"),Object(a["createElementVNode"])("p",null,"包括：padding + content"),Object(a["createElementVNode"])("h2",null,"scrollHeight scrollWidth"),Object(a["createElementVNode"])("p",null,"包括：padding + 实际内容的尺寸"),Object(a["createElementVNode"])("h2",null,"scrollTop scrollLeft"),Object(a["createElementVNode"])("p",null,"DOM 内部元素滚动的距离"),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"offsetHeight - border + padding + content"),Object(a["createElementVNode"])("li",null,"clientHeight - padding + content"),Object(a["createElementVNode"])("li",null,"scrollHeight - padding + 实际内容的高度")]),Object(a["createElementVNode"])("hr"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},[Object(a["createTextVNode"])("<!DOCTYPE "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"lang"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"en"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"charset"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"UTF-8"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"http-equiv"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"X-UA-Compatible"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"IE=edge"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"viewport"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"width=device-width, initial-scale=1.0"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("offsetHeight"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"style"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-css"},[Object(a["createTextVNode"])("\n        * {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"padding"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"margin"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(";\n        }\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-selector-tag"},"body"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"background-color"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"#f1f1f1"),Object(a["createTextVNode"])(";\n        }\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-selector-id"},"#container"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"width"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"300px"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"height"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200px"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"padding"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20px"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"margin"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30px"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"border"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"5px"),Object(a["createTextVNode"])(" solid "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"#ccc"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"box-sizing"),Object(a["createTextVNode"])(": border-box;\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"overflow"),Object(a["createTextVNode"])(": auto;\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"background-color"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"#fff"),Object(a["createTextVNode"])(";\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-selector-id"},"#content"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"width"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"600px"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"height"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"500px"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"background-color"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"#f1f1f1"),Object(a["createTextVNode"])(";\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"display"),Object(a["createTextVNode"])(": inline-block;\n        }\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"style"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("offsetHeight"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"container"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"content"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("offsetHeight scrollHeight clientHeight 区别"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" container = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'container'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'offsetHeight'"),Object(a["createTextVNode"])(", container."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"offsetHeight"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'offsetWidth'"),Object(a["createTextVNode"])(", container."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"offsetWidth"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'clientWidth'"),Object(a["createTextVNode"])(", container."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"clientWidth"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'clientHeight'"),Object(a["createTextVNode"])(", container."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"clientHeight"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'scrollWidth'"),Object(a["createTextVNode"])(", container."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"scrollWidth"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'scrollHeight'"),Object(a["createTextVNode"])(", container."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"scrollHeight"),Object(a["createTextVNode"])(")\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// scrollTop scrollLeft 需滚动之后获取"),Object(a["createTextVNode"])("\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"0910":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h2",null,"element-ui 的 Cascader 级联选择器 将选择的node节点数组转化为树"),Object(a["createElementVNode"])("p",null,"参考代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},[Object(a["createTextVNode"])("<!DOCTYPE "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"lang"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"en"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"charset"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"UTF-8"'),Object(a["createTextVNode"])(" />")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"http-equiv"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"X-UA-Compatible"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"IE=edge"'),Object(a["createTextVNode"])(" />")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"viewport"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"width=device-width, initial-scale=1.0"'),Object(a["createTextVNode"])(" />")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("Document"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    　\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"link"),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"rel"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"stylesheet"'),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/css"'),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"href"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://unpkg.com/element-ui@2.15.7/lib/theme-chalk/index.css"'),Object(a["createTextVNode"])("\n    />")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcdn.net/ajax/libs/vue/2.5.22/vue.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.7/index.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"block"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"span"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"demonstration"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("默认显示所有Tag"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"span"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"el-cascader"),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"ref"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"cascader"'),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},":options"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"options"'),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},":props"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"props"'),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"clearable"),Object(a["createTextVNode"])("\n        >")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"el-cascader"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"block"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"span"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"demonstration"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("折叠展示Tag"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"span"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"el-cascader"),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},":options"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"options"'),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},":props"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"props"'),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"collapse-tags"),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"clearable"),Object(a["createTextVNode"])("\n        >")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"el-cascader"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"@click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"btnClick"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("按 钮"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Main"),Object(a["createTextVNode"])(" = {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"data"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n          "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"props"),Object(a["createTextVNode"])(": { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"multiple"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"true"),Object(a["createTextVNode"])(" },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"options"),Object(a["createTextVNode"])(": [\n              {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(",\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'东南'"),Object(a["createTextVNode"])(",\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                  {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'上海'"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'普陀'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"4"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'黄埔'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"5"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'徐汇'"),Object(a["createTextVNode"])(" },\n                    ],\n                  },\n                  {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"7"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'江苏'"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"8"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'南京'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"9"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'苏州'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'无锡'"),Object(a["createTextVNode"])(" },\n                    ],\n                  },\n                  {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"12"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'浙江'"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"13"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'杭州'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"14"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'宁波'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"15"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'嘉兴'"),Object(a["createTextVNode"])(" },\n                    ],\n                  },\n                ],\n              },\n              {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"17"),Object(a["createTextVNode"])(",\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'西北'"),Object(a["createTextVNode"])(",\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                  {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"18"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'陕西'"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"19"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'西安'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'延安'"),Object(a["createTextVNode"])(" },\n                    ],\n                  },\n                  {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"21"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'新疆维吾尔族自治区'"),Object(a["createTextVNode"])(",\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"22"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'乌鲁木齐'"),Object(a["createTextVNode"])(" },\n                      { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"23"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'克拉玛依'"),Object(a["createTextVNode"])(" },\n                    ],\n                  },\n                ],\n              },\n            ],\n          }\n        },\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n          "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"btnClick"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// getCheckedNodes 获取及联选择的node节点"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" nodes = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$refs"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"cascader"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getCheckedNodes"),Object(a["createTextVNode"])("()\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 递归转化为树"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"formatArrayToTree"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"list"),Object(a["createTextVNode"])(") {\n              "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" result = []\n              "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"merge"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"nodes"),Object(a["createTextVNode"])(") => {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" idToTreeNode = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])("()\n                nodes."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n                  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" { label, value, parent, children, uid } = item\n                  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" treeNode = { label, value, uid }\n                  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (children && children."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(") {\n                    treeNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])(" = children\n                  }\n                  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (parent) {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!idToTreeNode."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("(parent."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"uid"),Object(a["createTextVNode"])(")) {\n                      idToTreeNode."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("(parent."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"uid"),Object(a["createTextVNode"])(", {\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])(": parent."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"label"),Object(a["createTextVNode"])(",\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": parent."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])(",\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"parent"),Object(a["createTextVNode"])(": parent."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"parent"),Object(a["createTextVNode"])(",\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"uid"),Object(a["createTextVNode"])(": parent."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"uid"),Object(a["createTextVNode"])(",\n                      })\n                    }\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" parentNode = idToTreeNode."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("(parent."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"uid"),Object(a["createTextVNode"])(")\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (parentNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])(" == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") {\n                      parentNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])(" = []\n                    }\n                    parentNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(treeNode)\n                  }\n                })\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" idToTreeNodes = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"from"),Object(a["createTextVNode"])("(idToTreeNode."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"values"),Object(a["createTextVNode"])("())\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (idToTreeNodes && idToTreeNodes."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" > "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n                  result = idToTreeNodes\n                  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"merge"),Object(a["createTextVNode"])("(idToTreeNodes)\n                }\n              }\n              "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"merge"),Object(a["createTextVNode"])("(list)\n              "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" result\n            }\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"formatArrayToTree"),Object(a["createTextVNode"])("(nodes), "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'result.....'"),Object(a["createTextVNode"])(")\n          },\n        },\n      }\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Ctor"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"extend"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Main"),Object(a["createTextVNode"])(")\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Ctor"),Object(a["createTextVNode"])("().$mount("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(")\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"0ef6":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createStaticVNode"])("<html><head></head><body><h1>Vuex mutation action 区别</h1><h2>题目</h2><p>Vuex mutation action 区别</p><h2>答案</h2><ul><li>mutation <ul><li>建议原子操作，每次只修改一个数据，不要贪多</li><li>必须是同步代码，方便查看 devTools 中的状态变化</li></ul></li><li>action <ul><li>可包含多个 mutation</li><li>可以是异步操作</li></ul></li></ul></body></html>",1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"1aae":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"curry add"),Object(a["createElementVNode"])("h2",null,"题目"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("写一个 "),Object(a["createElementVNode"])("code",null,"curry"),Object(a["createTextVNode"])(" 函数，可以把其他函数转为 curry 函数")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"add"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b, c"),Object(a["createTextVNode"])(") { "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" a + b + c }\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"add"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 6"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" curryAdd = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"curry"),Object(a["createTextVNode"])("(add)\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"curryAdd"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(")("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(")("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 6"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"解答"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"curry"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("fn: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"Function")]),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" fnArgsLength = fn."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 传入函数的参数长度"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"args"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] = []\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ts 中，独立的函数，this 需要声明类型"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"calc"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", ...newArgs: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 积累参数"),Object(a["createTextVNode"])("\n        args = [\n            ...args,\n            ...newArgs\n        ]\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (args."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" < fnArgsLength) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 参数不够，返回函数"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" calc\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 参数够了，返回执行结果"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" fn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"apply"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(", args."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"slice"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(", fnArgsLength))\n        }\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" calc\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// function add(a: number, b: number, c: number): number {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     return a + b + c"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // add(10, 20, 30) // 60"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const curryAdd = curry(add)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const res = curryAdd(10)(20)(30) // 60"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(res)"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"判断参数长度"),Object(a["createElementVNode"])("li",null,"中间态返回函数，最后返回执行结果"),Object(a["createElementVNode"])("li",null,"如用 this 慎用箭头函数")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"1d14":function(e,t,c){},"24a9":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"event loop"),Object(a["createElementVNode"])("p",null,"以下代码打印的顺序，分别是怎样的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 加载图片"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" src = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx.png'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"src, callback"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" img = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(")\n    img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onload"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"callback"),Object(a["createTextVNode"])("(img)\n    }\n    img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = src\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(")\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"300"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"400"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"500"),Object(a["createTextVNode"])(")\n})\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("我这边测试的结果是 "),Object(a["createElementVNode"])("code",null,"100 300 200 500 400"),Object(a["createTextVNode"])(" ，你的测试结果可能会不一样，因为"),Object(a["createElementVNode"])("code",null,"200"),Object(a["createTextVNode"])("的位置，毕竟每个人的网速不一样，加载图片有快慢之分。")]),Object(a["createElementVNode"])("h2",null,"单线程"),Object(a["createElementVNode"])("p",null,"JavaScript语言的一大特点就是单线程，也就是说，同一个时间只能做一件事。"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 循环运行期间，JS 执行和 DOM 渲染暂时卡顿"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" i, sum = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (i = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("; i < "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1000000000"),Object(a["createTextVNode"])("; i++) {\n    sum += i;\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(sum);\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// alert 不处理，JS 执行和 DOM 渲染暂时卡顿"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'hello'"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("p",null,"为何只有单线程？—— 因为如果是多线程渲染 DOM 就乱套了（其他语法的多线程，数据同步也是一个难点）。因此 JS 执行的时候，浏览器会卡顿，浏览器会等着 JS 执行完（防止有 DOM 渲染操作）在去做 DOM 渲染。"),Object(a["createElementVNode"])("p",null,"这样的机制，才让 JS 有异步。你会发现，当加载不出资源（图片、视频）时候，浏览器肯定不会卡死。但是你写一个 js 死循环，浏览器就卡死了。"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"为了解决这个问题，html5 提出了 web worker 能实现多线程，但是新启的线程，不允许操作 DOM （有可以看出是因为 DOM 操作的冲突才不得不用单线程）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 例一"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(")       "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 反正 1000ms 之后执行"),Object(a["createTextVNode"])("\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1000"),Object(a["createTextVNode"])(")                   "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 先不管它，先让其他 JS 代码运行"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"300"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"400"),Object(a["createTextVNode"])(")\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 例二"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(")\n$."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"ajax"),Object(a["createTextVNode"])("({\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"url"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxxxx'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"success"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"result"),Object(a["createTextVNode"])(") {  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ajax 加载完才执行"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(result)       "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 先不管它，先让其他 JS 代码运行"),Object(a["createTextVNode"])("\n    }\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"300"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"400"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("h2",null,"event-loop"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("将 js 中要执行的每个任务都做一个划分，同步执行的放在“执行栈”，而异步执行的"),Object(a["createElementVNode"])("strong",null,"将"),Object(a["createTextVNode"])("放在（不是马上就放进去）“异步队列”。然后，将“执行栈”放在主线程中执行，挨个任务排队执行，执行到最后就立马去看“异步队列”是否有数据？有数据就拿到主线程中执行，执行完再去看“异步队列”是否有数据？")]),Object(a["createElementVNode"])("p",null,"那么，异步执行任务何时被放在“异步队列”中呢？以上面的 demo 为例。第一个，图片加载完成时；第二，100ms 后；第三，立刻。"),Object(a["createElementVNode"])("p",null,"按照这个逻辑，再去看一遍 demo 代码的打印顺序，就彻底明白了。"),Object(a["createElementVNode"])("p",null,"这个过程就是所谓的 event-loop"),Object(a["createElementVNode"])("p",null,"新增：event-loop 过程示例分析"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 示例 1"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(")\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(")\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 示例 2"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(")\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(")\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 示例 3"),Object(a["createTextVNode"])("\n$."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"ajax"),Object(a["createTextVNode"])("({\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"url"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxxxx'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"success"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'a'"),Object(a["createTextVNode"])(")\n    }\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'b'"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'c'"),Object(a["createTextVNode"])(")\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'d'"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("h1",null,"jquery 的解决方案"),Object(a["createElementVNode"])("h2",null,"callback hell"),Object(a["createElementVNode"])("p",null,"jquery 1.5 之前，写 ajax 是这样写的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" ajax = $."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"ajax"),Object(a["createTextVNode"])("({\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"url"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'data.json'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"success"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'success1'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'success2'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'success3'"),Object(a["createTextVNode"])(")\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"error"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'error'"),Object(a["createTextVNode"])(")\n    }\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(ajax) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回一个 XHR 对象"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"带来问题 callback hell"),Object(a["createElementVNode"])("h2",null,"jquery 1.5"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" ajax = $."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"ajax"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'data.json'"),Object(a["createTextVNode"])(")\najax."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"done"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'success 1'"),Object(a["createTextVNode"])(")\n    })\n    ."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fail"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'error'"),Object(a["createTextVNode"])(")\n    })\n    ."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"done"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n         "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'success 2'"),Object(a["createTextVNode"])(")\n    })\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(ajax) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回一个 deferred 对象"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"也可以这样写（很像 Promise 的写法）"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 很像 Promise 的写法"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" ajax = $."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"ajax"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'data.json'"),Object(a["createTextVNode"])(")\najax."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'success 1'"),Object(a["createTextVNode"])(")\n    }, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'error 1'"),Object(a["createTextVNode"])(")\n    })\n    ."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'success 2'"),Object(a["createTextVNode"])(")\n    }, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'error 2'"),Object(a["createTextVNode"])(")\n    })\n")])]),Object(a["createElementVNode"])("p",null,"因此，我们现在学习的 Promise ，早在 jquery 1.5 的时候就已经实践过了。时间也证明这是目前的一个自荐方式，加入 ES6 大家庭，并且有了 Promise/A+ 标准。"),Object(a["createElementVNode"])("h2",null,"从设计原则说"),Object(a["createElementVNode"])("p",null,"无论是 jquery 还是现在的 Promise ，都无法改变 js 单线程、异步这样的特性。但是从代码编写方式上杜绝了之前的 callback hell"),Object(a["createElementVNode"])("p",null,"作重要的设计原则就是“开放封闭原则” —— 对扩展开放、对修改封闭。这里就能很好的体现。"),Object(a["createElementVNode"])("h1",null,"ES6 中的 Promise"),Object(a["createElementVNode"])("h2",null,"回顾基本使用"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"src"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" promise = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"resolve, reject"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" img = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(")\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onload"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("(img)\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onerror"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"reject"),Object(a["createTextVNode"])("()\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = src\n    })\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" promise   \n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" src = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx.png'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" result = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src)\n\nresult."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"width"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {    \n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'failed'"),Object(a["createTextVNode"])(")\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"height"),Object(a["createTextVNode"])(")\n})\n")])]),Object(a["createElementVNode"])("h2",null,"异常捕获"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("以上 demo 中"),Object(a["createElementVNode"])("code",null,"then"),Object(a["createTextVNode"])("中传递两个参数确实有点混乱，统一一下异常捕获")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 规定：then 只接受一个参数，最后统一用 catch 捕获异常"),Object(a["createTextVNode"])("\nresult."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"width"),Object(a["createTextVNode"])(")\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"height"),Object(a["createTextVNode"])(")\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"catch"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"ex"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 最后统一 catch"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(ex)\n})\n")])]),Object(a["createElementVNode"])("h2",null,"多个串联"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" src1 = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx1.png'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" result1 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src1)\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" src2 = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx2.png'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" result2 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src2)\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 链式操作"),Object(a["createTextVNode"])("\nresult1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'第一个图片加载完成'"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" result2\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'第二个图片加载完成'"),Object(a["createTextVNode"])(")\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"catch"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"ex"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 最后统一 catch"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(ex)\n})\n")])]),Object(a["createElementVNode"])("p",null,"多个串联更能看出 then 链式操作比 callback 更加有优势。不信，自己用 callback 的方式试一下。"),Object(a["createElementVNode"])("h2",null,"Promise.all & Promise.race"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Promise.all 接收一个 promise 对象的数组"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 待全部完成之后，统一执行 success"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"all"),Object(a["createTextVNode"])("([result1, result2])."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"datas"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 接收到的 datas 是一个数组，依次包含了多个 promise 返回的内容"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(datas["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("])\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(datas["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("])\n})\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Promise.race 接收一个包含多个 promise 对象的数组"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 只要有一个完成，就执行 success"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"race"),Object(a["createTextVNode"])("([result1, result2])."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"data"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// data 即最先执行完成的 promise 的返回值"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(data)\n})\n")])]),Object(a["createElementVNode"])("h2",null,"其他"),Object(a["createElementVNode"])("p",null,"社区里有一些 lib 如 Q.js bluebird.js 等，都对 Promise 进行了简单的封装，可以去看一下文档怎么用。"),Object(a["createElementVNode"])("p",null,"不过我觉得，现在标准的 Promise 已经很精简了，浏览器支持性也很好了（特别是移动端）"),Object(a["createElementVNode"])("h1",null,"Promise/A+ 标准"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"任何技术、方案、语言（库和框架除外）等，要推广到所有人使用，肯定是有一套标准支持的。例如 html css js http 等。无规矩不成方圆，任何不符合标准的东西（或者说长久推广并未形成标准），都会被大家抛弃。就如当初的 IE 浏览器")]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"联想到近期微信小程序推出 webview，允许加载 h5 页面。看到有人评论“任何不符合标准的都是异教徒”。")]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("p",null,"网上搜一下“Promise/A+ 标准”就可以找到很多资源，总结一下："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("状态可能有三种状态：等待（pending）、已完成（fulfilled）、已拒绝（rejected） "),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"promise 的状态只可能从“等待”转到“完成”态或者“拒绝”态，不能逆向转换，同时“完成”态和“拒绝”态不能相互转换")])]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("then "),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"promise 必须实现then方法，而且then必须返回一个 promise ，同一个 promise 的then可以调用多次（链式），并且回调的执行顺序跟它们被定义时的顺序一致"),Object(a["createElementVNode"])("li",null,"then方法接受两个参数，第一个参数是成功时的回调，在 promise 由“等待”态转换到“完成”态时调用，另一个是失败时的回调，在 promise 由“等待”态转换到“拒绝”态时调用")])])]),Object(a["createElementVNode"])("h2",null,"状态"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("通过以下 demo 讲解状态的变化，一开始是"),Object(a["createElementVNode"])("code",null,"pending"),Object(a["createTextVNode"])("，然后"),Object(a["createElementVNode"])("code",null,"resolve(img)"),Object(a["createTextVNode"])("或者"),Object(a["createElementVNode"])("code",null,"reject()"),Object(a["createTextVNode"])("。注意："),Object(a["createElementVNode"])("strong",null,"状态变化不可逆")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"src"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" promise = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"resolve, reject"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" img = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(")\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onload"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("(img)\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onerror"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"reject"),Object(a["createTextVNode"])("()\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = src\n    })\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" promise   \n}\n")])]),Object(a["createElementVNode"])("h2",null,"then"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("参考一下 demo ，"),Object(a["createElementVNode"])("code",null,"result"),Object(a["createTextVNode"])("就是一个 Promise 对象，它有 then 方法。第一个参数。。。。第二个参数。。。。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" result = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src)\nresult."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"width"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {    \n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'failed'"),Object(a["createTextVNode"])(")\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"height"),Object(a["createTextVNode"])(")\n})\n")])]),Object(a["createElementVNode"])("p",null,"另外，then 方法必须返回一个 promise ，上面 demo 没写 return ，它就会返回自身。当然你可以自己手写 return"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("result1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'第一个图片加载完成'"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" result2\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'第二个图片加载完成'"),Object(a["createTextVNode"])(")\n})\n")])]),Object(a["createElementVNode"])("h1",null,"Async Await"),Object(a["createElementVNode"])("p",null,"promise 的写法，还是要把函数包括在 then 里面，而 async/await 的写法，完全就是同步代码的写法，更加简洁更加容易理解"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("提前"),Object(a["createElementVNode"])("code",null,"npm install --save-dev babel-polyfill")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'babel-polyfill'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"src"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" promise = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"resolve, reject"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" img = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(")\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onload"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("(img)\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onerror"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"reject"),Object(a["createTextVNode"])("()\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = src\n    })\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" promise\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" src1 = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx1.png'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" src2 = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx2.png'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" load = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" result1 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src1)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(result1)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" result2 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src2)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(result2)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"load"),Object(a["createTextVNode"])("()\n")])]),Object(a["createElementVNode"])("p",null,"注意，async/await 并不是取代了 promise ，而是利用 promise 之后的另外一种写法，取代了 then 函数，写起来更加像同步代码"),Object(a["createElementVNode"])("h1",null,"关于 Generator"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"原理比较复杂，语法比较费解"),Object(a["createElementVNode"])("li",null,"不是为解决异步而创建的，恰巧被用来解决异步而已"),Object(a["createElementVNode"])("li",null,"有更好的替代方案 async/await")]),Object(a["createElementVNode"])("h1",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"异步的概念：单线程、event-loop"),Object(a["createElementVNode"])("li",null,"jquery 中的 Promise"),Object(a["createElementVNode"])("li",null,"ES6 Promise ，以及 Promise 标准"),Object(a["createElementVNode"])("li",null,"asyc-await")]),Object(a["createElementVNode"])("h1",null,"jquery 中的 promise"),Object(a["createElementVNode"])("h2",null,"提问"),Object(a["createElementVNode"])("p",null,"给出一段非常简单的异步操作代码，使用setTimeout函数。"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 给出一段非常简单的异步操作代码，使用setTimeout函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" wait = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" task = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'执行完成'"),Object(a["createTextVNode"])(")\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("(task, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2000"),Object(a["createTextVNode"])(")\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"wait"),Object(a["createTextVNode"])("()\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 新增需求：要在执行完成之后进行某些特别复杂的操作，代码可能会很多，而且分好几个步骤"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"但是我如果再加一个需求 ———— 要在执行完成之后进行某些特别复杂的操作，代码可能会很多，而且分好几个步骤 ———— 那该怎么办？"),Object(a["createElementVNode"])("p",null,"当然，其中一个答案就是：直接在 task 函数中写这些复杂的操作 ——但是很不符合设计原则"),Object(a["createElementVNode"])("h2",null,"$.Deferred"),Object(a["createElementVNode"])("p",null,"首先引用 jquery"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"waitHandle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" dtd = $."),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Deferred"),Object(a["createTextVNode"])("()  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 创建一个 deferred 对象"),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" wait = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"dtd"),Object(a["createTextVNode"])(") {  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 要求传入一个 deferred 对象"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" task = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'执行完成'"),Object(a["createTextVNode"])(")\n            dtd."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("()  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 表示异步任务已经完成"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// dtd.reject() // 表示异步任务失败或出错"),Object(a["createTextVNode"])("\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("(task, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2000"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" dtd  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 要求返回 deferred 对象"),Object(a["createTextVNode"])("\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，这里一定要有返回值"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"wait"),Object(a["createTextVNode"])("(dtd)\n}\n")])]),Object(a["createElementVNode"])("p",null,"解释一下上面的代码，有点绕，关键点："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"对之前的 wait 函数又进行了封装"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("创建"),Object(a["createElementVNode"])("code",null,"var dtd = $.Deferred()")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"wait(dtd)"),Object(a["createTextVNode"])("，并且传入"),Object(a["createElementVNode"])("code",null,"dtd"),Object(a["createTextVNode"])("，最终返回")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("wait 函数内，成功后执行"),Object(a["createElementVNode"])("code",null,"dtd.resolve()")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("wait 函数最终返回"),Object(a["createElementVNode"])("code",null,"dtd")])]),Object(a["createElementVNode"])("p",null,"怎么使用？"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" w = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"waitHandle"),Object(a["createTextVNode"])("()\nw."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ok 1'"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'err 1'"),Object(a["createTextVNode"])(")\n})."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ok 2'"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'err 2'"),Object(a["createTextVNode"])(")\n})\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 还有 w.done w.fail"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"这样的使用方式，再结合此前的需求，就能完美解决"),Object(a["createElementVNode"])("h2",null,"$.Promise"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"dtd"),Object(a["createTextVNode"])("的 API 可以分成两组")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"dtd.resolve"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"dtd.reject")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"dtd.then"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"dtd.done"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"dtd.fail")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("这两组应该分开的，因为他们的用意不一样，混合在一起会出问题。例如最后代码最后执行"),Object(a["createElementVNode"])("code",null,"w.reject()"),Object(a["createTextVNode"])("试试")]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"也顺便介绍一下系统设计的时候，拆分、封装的必要")]),Object(a["createElementVNode"])("p",null,"那如何解决？—— Promise 浮出水面"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"waitHandle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" dtd = $."),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Deferred"),Object(a["createTextVNode"])("()\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" wait = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"dtd"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" task = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'执行完成'"),Object(a["createTextVNode"])(")\n            dtd."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("()\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("(task, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2000"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" dtd."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"promise"),Object(a["createTextVNode"])("()  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，这里返回的是 primise 而不是直接返回 deferred 对象"),Object(a["createTextVNode"])("\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"wait"),Object(a["createTextVNode"])("(dtd)\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" w = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"waitHandle"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 经过上面的改动，w 接收的就是一个 promise 对象"),Object(a["createTextVNode"])("\n$."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"when"),Object(a["createTextVNode"])("(w)\n ."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ok 1'"),Object(a["createTextVNode"])(")\n })\n ."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ok 2'"),Object(a["createTextVNode"])(")\n })\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// w.reject()  // 执行这句话会直接报错"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("promise 对象只有"),Object(a["createElementVNode"])("code",null,"then"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"done"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"fail"),Object(a["createTextVNode"])("这些被动监听的方法，没有"),Object(a["createElementVNode"])("code",null,"resolve"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"reject"),Object(a["createTextVNode"])("这些主动触发的方法")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"27d4":function(e,t,c){"use strict";c("c680")},"283d":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"MVVM 模板解析"),Object(a["createElementVNode"])("h2",null,"目录"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"模板是什么？"),Object(a["createElementVNode"])("li",null,"render 函数"),Object(a["createElementVNode"])("li",null,"render 函数与 vdom 的关系")]),Object(a["createElementVNode"])("p",null,"扩展知识：如何生成 render 函数（扩展知识后面再看情况补充视频）"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"结构化与非结构化"),Object(a["createElementVNode"])("li",null,"生成 AST"),Object(a["createElementVNode"])("li",null,"生成函数体字符串")]),Object(a["createElementVNode"])("h2",null,"模板是什么？"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-on:click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"add"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-for"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"item in list"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{item}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("它看似像 html ，但是它不是，html 解析不了它，因为有指令。首先，html 根本无法识别指令；其次，最重要的，指令是动态的、逻辑的（"),Object(a["createElementVNode"])("code",null,"v-if"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"v-for"),Object(a["createTextVNode"])("等），而 html 是纯静态的。")]),Object(a["createElementVNode"])("p",null,"因此，模板和 html 根本就是两码事，就像雷锋和雷峰塔的关系 —— 长的像一点而已。"),Object(a["createElementVNode"])("p",null,"那么模板是什么？—— 对于 vue 来说，模板就是一坨字符串，就这么简单。"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"字符串，是非结构化的"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("有逻辑，如"),Object(a["createElementVNode"])("code",null,"v-for"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"v-if"),Object(a["createTextVNode"])("等指令，是动态的")])]),Object(a["createElementVNode"])("p",null,"和 html 对比"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"标签类型相同"),Object(a["createElementVNode"])("li",null,"html 是静态，模板是有逻辑的动态的")]),Object(a["createElementVNode"])("p",null,"要想实现模板的这些“功能”，就必须将模板转换为 JS 代码，否则无法实现（仔细想想是否是这个道理）"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"模板中有指令，是动态的、有逻辑的，必须转换成 JS 代码才能运行 —— 上文讲过"),Object(a["createElementVNode"])("li",null,"模板最终要生成 html （模板不是 html）渲染页面，也只有 JS 能渲染 html 。因此，整个模板都要转换成 JS 代码才行，不光是指令。")]),Object(a["createElementVNode"])("h2",null,"render 函数"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"模板如何转换为 render 函数，这个其实我们不用关心，因为 vue 2.0 开始已经支持开发环境的编译工具转换。下面会在扩展知识中讲解转换的过程，作为扩展的了解。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("一开始先介绍一下 JS 中"),Object(a["createElementVNode"])("code",null,"with"),Object(a["createTextVNode"])("如何应用，平常不常见。"),Object(a["createElementVNode"])("strong",null,"而且，日常开发也严重不推荐使用！！！")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" obj = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"getAddress"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'beijing'"),Object(a["createTextVNode"])(")\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 不用 with"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(obj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(obj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"age"),Object(a["createTextVNode"])(")\n    obj."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getAddress"),Object(a["createTextVNode"])("()\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("()\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 使用 width"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"with"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"obj"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(name)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(name)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getAddress"),Object(a["createTextVNode"])("()\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])("()\n")])]),Object(a["createElementVNode"])("p",null,"先看一下两个示例中的模板和 render 函数是什么样子的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{price}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"./vue-2.5.9.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"el"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"price"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])("\n        }\n    })\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"示例一"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{price}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"with"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this")]),Object(a["createTextVNode"])("){\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("(\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(":{"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"id"'),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])("}\n        },\n        [\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'p'"),Object(a["createTextVNode"])(",["),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_s"),Object(a["createTextVNode"])("(price))])\n        ]\n    )\n}\n")])]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"这里的 this 就是 vm ，因此 price 也就是 vm.price"),Object(a["createElementVNode"])("li",null,"_c ，即 vm._c ，是 vue 早就定义好的函数，下文会具体讲")]),Object(a["createElementVNode"])("p",null,"总之，通过这个函数，我们看到了:"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"模板中的所有信息，都已经被收集到函数中"),Object(a["createElementVNode"])("li",null,"模板中的 price ，也已经变成了 vm.price")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("示例二（"),Object(a["createElementVNode"])("strong",null,"直接在编辑器中看吧，太多了"),Object(a["createTextVNode"])("）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-on:click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"add"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-for"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"item in list"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{item}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"with"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this")]),Object(a["createTextVNode"])("){\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("(\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(":{"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"id"'),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])("}\n        },\n        [\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("(\n                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",\n                [\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("(\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'input'"),Object(a["createTextVNode"])(",\n                        {\n                            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"directives"),Object(a["createTextVNode"])(":[\n                                {\n                                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"model"'),Object(a["createTextVNode"])(",\n                                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"rawName"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"v-model"'),Object(a["createTextVNode"])(",\n                                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(":(title),\n                                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"expression"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])("\n                                }\n                            ],\n                            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"domProps"),Object(a["createTextVNode"])(":{\n                                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"value"'),Object(a["createTextVNode"])(":(title)\n                            },\n                            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"on"),Object(a["createTextVNode"])(":{\n                                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"input"'),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"$event"),Object(a["createTextVNode"])("){"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])("($event."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"target"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"composing"),Object(a["createTextVNode"])(")"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(";title=$event."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"target"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])("}\n                            }\n                        }\n                    ),\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'" "'),Object(a["createTextVNode"])("),\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("(\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'button'"),Object(a["createTextVNode"])(",\n                        {\n                            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"on"),Object(a["createTextVNode"])(":{\n                                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"click"'),Object(a["createTextVNode"])(":add\n                            }\n                        },\n                        [\n                            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"submit"'),Object(a["createTextVNode"])(")\n                        ]\n                    )\n                ]\n            ),\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'" "'),Object(a["createTextVNode"])("),\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("(\n                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul'"),Object(a["createTextVNode"])(",\n                "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_l"),Object(a["createTextVNode"])("((list),"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])("){"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",["),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_s"),Object(a["createTextVNode"])("(item))])})\n            )\n        ]\n    )\n}\n")])]),Object(a["createElementVNode"])("p",null,"以上 render 函数很大（但这个 demo 不复杂，可想而知一个项目中的 render 函数是怎样的），应该关心的点有："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"模板中的信息是否都已经包含在 render 函数中了"),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"v-model"),Object(a["createTextVNode"])("是怎么实现的")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"v-on:click"),Object(a["createTextVNode"])("是怎么实现的")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"v-for"),Object(a["createTextVNode"])("是怎么实现的")])]),Object(a["createElementVNode"])("h2",null,"render 函数与 vdom 的关系"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("（"),Object(a["createElementVNode"])("strong",null,"有必要先把之前 vdom 的核心内容再复习一遍"),Object(a["createTextVNode"])("）")]),Object(a["createElementVNode"])("p",null,"这是刚刚的 render 函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 上文的 render 函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"with"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this")]),Object(a["createTextVNode"])("){\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("(\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",\n        { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"id"'),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])("} },\n        [ "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'p'"),Object(a["createTextVNode"])(",["),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_s"),Object(a["createTextVNode"])("(price))])]\n    )\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 这是学习 snabbdom 时候的`h`函数的写法"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vnode = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div#container.two.classes'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"on"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"click"),Object(a["createTextVNode"])(": someFn}}, [\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'span'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"style"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"fontWeight"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'bold'"),Object(a["createTextVNode"])("}}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'This is bold'"),Object(a["createTextVNode"])("),\n  "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"' and this is just normal text'"),Object(a["createTextVNode"])(",\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'a'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"props"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"href"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/foo'"),Object(a["createTextVNode"])("}}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'I\\'ll take you places!'"),Object(a["createTextVNode"])(")\n]);\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("这俩其实就是一回儿事儿，vue 的 render 函数返回的就是"),Object(a["createElementVNode"])("code",null,"h"),Object(a["createTextVNode"])("函数返回的 —— vnode 节点。 render 函数中的"),Object(a["createElementVNode"])("code",null,"_c"),Object(a["createTextVNode"])("（即"),Object(a["createElementVNode"])("code",null,"vm._c"),Object(a["createTextVNode"])("）其实就是 vue 封装的生成 vnode 的函数，跟"),Object(a["createElementVNode"])("code",null,"h"),Object(a["createTextVNode"])("函数一样。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("vue 中有一个"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("方法是这么定义的")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_update"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"vnode"),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" prevVnode = vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_vnode"),Object(a["createTextVNode"])("\n  vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_vnode"),Object(a["createTextVNode"])(" = vnode\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!prevVnode) {\n    vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(" = vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"__patch__"),Object(a["createTextVNode"])("(vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(", vnode)\n  } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n    vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(" = vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"__patch__"),Object(a["createTextVNode"])("(prevVnode, vnode)\n  }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateComponent"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// vm._render 即 上面的 render 函数，返回 vnode"),Object(a["createTextVNode"])("\n  vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_update"),Object(a["createTextVNode"])("(vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_render"),Object(a["createTextVNode"])("())\n}\n")])]),Object(a["createElementVNode"])("p",null,"看到这里，就能明白 vue 是如何使用 render 函数的了"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"vm._render()"),Object(a["createTextVNode"])("执行返回 vnode ，传给"),Object(a["createElementVNode"])("code",null,"_update")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"_update"),Object(a["createTextVNode"])("中会判断是否有"),Object(a["createElementVNode"])("code",null,"prevVnode"),Object(a["createTextVNode"])("，然后分情况执行"),Object(a["createElementVNode"])("code",null,"vm.__patch__")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"vm.__patch__"),Object(a["createTextVNode"])("就是之前讲解 vdom 的"),Object(a["createElementVNode"])("code",null,"patch")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("第一，页面初次渲染的时候，执行"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("，将 vnode 直接 patch 到 $el。第二，当 data 属性改变的时候，监听变化，也执行"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("，对 prevVnode, vnode 进行 patch 。")]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"模板的本质：一堆字符串，带有逻辑功能"),Object(a["createElementVNode"])("li",null,"需要转换成 JS 代码（逻辑，渲染 html）"),Object(a["createElementVNode"])("li",null,"模板渲染成 render 函数的格式"),Object(a["createElementVNode"])("li",null,"render 函数返回的是 vnode"),Object(a["createElementVNode"])("li",null,"updateComponent")])])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"2c5d":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"ajax fetch axios 的区别"),Object(a["createElementVNode"])("h2",null,"分析"),Object(a["createElementVNode"])("p",null,"三者根本没有可比性，不要被题目搞混了。要说出他们的本质"),Object(a["createElementVNode"])("h2",null,"传统 ajax"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("AJAX （几个单词首字母，按规范应该大写） - Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 即使用 JS 进行异步请求，是 Web2.0 的技术基础，从 2005 年左右开始发起。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 所以，这里的 AJAX 就是一个称呼，一个缩写。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("基于当时 JS 规范，异步请求主要使用 XMLHttpRequest 这个底层 API 。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 所以，有一道常考的面试题：请用 XMLHttpRequest 实现 ajax")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"ajax"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"url, successFn"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" xhr = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"XMLHttpRequest"),Object(a["createTextVNode"])("()\n    xhr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"open"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"GET"'),Object(a["createTextVNode"])(", url, "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"false"),Object(a["createTextVNode"])(")\n    xhr."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onreadystatechange"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 这里的函数异步执行，可参考之前 JS 基础中的异步模块"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (xhr."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"readyState"),Object(a["createTextVNode"])(" == "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"4"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (xhr."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"status"),Object(a["createTextVNode"])(" == "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"successFn"),Object(a["createTextVNode"])("(xhr."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"responseText"),Object(a["createTextVNode"])(")\n            }\n        }\n    }\n    xhr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"send"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(")\n}\n")])]),Object(a["createElementVNode"])("h2",null,"fetch"),Object(a["createElementVNode"])("p",null,"fetch 是一个原生 API ，它和 XMLHttpRequest 一个级别。"),Object(a["createElementVNode"])("p",null,"fetch 和 XMLHttpRequest 的区别"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"写法更加简洁"),Object(a["createElementVNode"])("li",null,"原生支持 promise")]),Object(a["createElementVNode"])("p",null,"面试题：用 fetch 实现一个 ajax"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"ajax"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"url"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fetch"),Object(a["createTextVNode"])("(url)."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"res"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"json"),Object(a["createTextVNode"])("())\n}\n")])]),Object(a["createElementVNode"])("h2",null,"axios"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("axios 是一个"),Object(a["createElementVNode"])("a",{href:"https://www.npmjs.com/package/axios"},"第三方库"),Object(a["createTextVNode"])("，随着 Vue 一起崛起。它和 jquery 一样（jquery 也有 ajax 功能）。")]),Object(a["createElementVNode"])("p",null,"axios 内部可以用 XMLHttpRequest 或者 fetch 实现。"),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"ajax 是一种技术称呼，不是具体的 API 和库"),Object(a["createElementVNode"])("li",null,"fetch 是新的异步请求 API ，可代替 XMLHttpRequest"),Object(a["createElementVNode"])("li",null,"axios 是第三方库")]),Object(a["createElementVNode"])("h2",null,"划重点"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"注意 库 和 API 的区别"),Object(a["createElementVNode"])("li",null,"实际项目要用库，尽量不要自己造轮子（除非有其他目的）")]),Object(a["createElementVNode"])("h2",null,"思考"),Object(a["createElementVNode"])("p",null,"库 和 框架 有什么区别？")])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"2eb0":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"Array flatten"),Object(a["createElementVNode"])("h2",null,"问题"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("写一个函数，实现 Array flatten 扁平化，只减少一个嵌套层级"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 例如输入 "),Object(a["createElementVNode"])("code",null,"[1, 2, [3, 4, [100, 200], 5], 6]"),Object(a["createTextVNode"])(" 返回 "),Object(a["createElementVNode"])("code",null,"[1, 2, 3, 4, [100, 200], 5, 6]")]),Object(a["createElementVNode"])("h2",null,"解答"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"遍历数组"),Object(a["createElementVNode"])("li",null,"如果 item 是数字，则累加"),Object(a["createElementVNode"])("li",null,"如果 item 是数组，则 forEach 累加其元素")]),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 数组扁平化，使用 push\n * @param arr arr\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"flatten1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("arr: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"res"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] = []\n\n    arr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isArray"),Object(a["createTextVNode"])("(item)) {\n            item."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"n"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(n))\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(item)\n        }\n    })\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" res\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 数组扁平化，使用 concat\n * @param arr arr\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"flatten2"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("arr: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"res"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] = []\n\n    arr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n        res = res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"concat"),Object(a["createTextVNode"])("(item)\n    })\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" res\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // 功能测试"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const arr = [1, [2, [3], 4], 5]"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( flatten2(arr) )"),Object(a["createTextVNode"])("\n\n")])]),Object(a["createElementVNode"])("h2",null,"连环问：如果想要彻底扁平，忽略所有嵌套层级？"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("像 lodash "),Object(a["createElementVNode"])("a",{href:"https://www.lodashjs.com/docs/lodash.flattenDepth"},"flattenDepth"),Object(a["createTextVNode"])(" ，例如输入 "),Object(a["createElementVNode"])("code",null,"[1, 2, [3, 4, [100, 200], 5], 6]"),Object(a["createTextVNode"])(" 返回 "),Object(a["createElementVNode"])("code",null,"[1, 2, 3, 4, 100, 200, 5, 6]")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("最容易想到的解决方案就是"),Object(a["createElementVNode"])("strong",null,"递归"),Object(a["createTextVNode"])("，代码参考")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 数组深度扁平化，使用 push\n * @param arr arr\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"flattenDeep1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("arr: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"res"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] = []\n\n    arr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isArray"),Object(a["createTextVNode"])("(item)) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" flatItem = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"flattenDeep1"),Object(a["createTextVNode"])("(item) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 递归"),Object(a["createTextVNode"])("\n            flatItem."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"n"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(n))\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(item)\n        }\n    })\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" res\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 数组深度扁平化，使用 concat\n * @param arr arr\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"flattenDeep2"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("arr: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"res"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] = []\n\n    arr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isArray"),Object(a["createTextVNode"])("(item)) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" flatItem = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"flattenDeep2"),Object(a["createTextVNode"])("(item) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 递归"),Object(a["createTextVNode"])("\n            res = res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"concat"),Object(a["createTextVNode"])("(flatItem)\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            res = res."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"concat"),Object(a["createTextVNode"])("(item)\n        }\n    })\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" res\n}\n\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // 功能测试"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const arr = [1, [2, [3, ['a', [true], 'b'], 4], 5], 6]"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( flattenDeep2(arr) )"),Object(a["createTextVNode"])("\n\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("还有一种 hack 的方式 "),Object(a["createElementVNode"])("code",null,"toString"),Object(a["createTextVNode"])(" —— 但遇到引用类型的 item 就不行了。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" nums = ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"4"),Object(a["createTextVNode"])(", ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])("], "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"5"),Object(a["createTextVNode"])("], "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"6"),Object(a["createTextVNode"])("]\nnums."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"toString"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// '1,2,3,4,100,200,5,6'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 但万一数组元素是 {x: 100} 等引用类型，就不可以了"),Object(a["createTextVNode"])("\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"3d56":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"for...in 和 for...of 的区别"),Object(a["createElementVNode"])("h2",null,"key 和 value"),Object(a["createElementVNode"])("p",null,"for...in 遍历 key , for...of 遍历 value"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" arr = ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])("]\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(" arr) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(n)\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" str = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'abc'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" s "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(" str) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(s)\n}\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" argument "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"arguments"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(argument) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// for...of 可以获取 value ，而 for...in 获取 key"),Object(a["createTextVNode"])("\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])(")\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" pList = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"querySelectorAll"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'p'"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" p "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(" pList) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(p) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// for...of 可以获取 value ，而 for...in 获取 key"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("h2",null,"遍历对象"),Object(a["createElementVNode"])("p",null,"for...in 可以遍历对象，for...of 不可以"),Object(a["createElementVNode"])("h2",null,"遍历 Map/Set"),Object(a["createElementVNode"])("p",null,"for...of 可以遍历 Map/Set ，for...in 不可以"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" set1 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Set"),Object(a["createTextVNode"])("(["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])("])\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(" set1) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(n)\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" map1 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])("([\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'x'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])("], ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'y'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])("], ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'z'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])("]\n])\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(" map1) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(n)\n}\n")])]),Object(a["createElementVNode"])("h2",null,"遍历 generator"),Object(a["createElementVNode"])("p",null,"for...of 可遍历 generator ，for...in 不可以"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("* "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"foo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])("){\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"yield"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"yield"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"yield"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" o "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"foo"),Object(a["createTextVNode"])("()) {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(o)\n}\n")])]),Object(a["createElementVNode"])("h2",null,"对象的可枚举属性"),Object(a["createElementVNode"])("p",null,"for...in 遍历一个对象的可枚举属性。"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("使用 "),Object(a["createElementVNode"])("code",null,"Object.getOwnPropertyDescriptors(obj)"),Object(a["createTextVNode"])(" 可以获取对象的所有属性描述，看 "),Object(a["createElementVNode"])("code",null,"enumerable: true"),Object(a["createTextVNode"])(" 来判断该属性是否可枚举。")]),Object(a["createElementVNode"])("p",null,"对象，数组，字符传"),Object(a["createElementVNode"])("h2",null,"可迭代对象"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("for...of 遍历一个可迭代对象。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 其实就是迭代器模式，通过一个 "),Object(a["createElementVNode"])("code",null,"next"),Object(a["createTextVNode"])(" 方法返回下一个元素。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("该对象要实现一个 "),Object(a["createElementVNode"])("code",null,"[Symbol.iterator]"),Object(a["createTextVNode"])(" 方法，其中返回一个 "),Object(a["createElementVNode"])("code",null,"next"),Object(a["createTextVNode"])(" 函数，用于返回下一个 value（不是 key）。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 可以执行 "),Object(a["createElementVNode"])("code",null,"arr[Symbol.iterator]()"),Object(a["createTextVNode"])(" 看一下。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("JS 中内置迭代器的类型有 "),Object(a["createElementVNode"])("code",null,"String"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Array"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"arguments"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"NodeList"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Map"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Set"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"generator"),Object(a["createTextVNode"])(" 等。")]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"for...in 遍历一个对象的可枚举属性，如对象、数组、字符串。针对属性，所以获得 key"),Object(a["createElementVNode"])("li",null,"for...of 遍历一个可迭代对象，如数组、字符串、Map/Set 。针对一个迭代对象，所以获得 value")]),Object(a["createElementVNode"])("h2",null,"划重点"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("“枚举” “迭代” 都是计算机语言的一些基础术语，目前搞不懂也没关系。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 但请一定记住 for...of 和 for...in 的不同表现。")]),Object(a["createElementVNode"])("h2",null,"连环问：for await...of"),Object(a["createElementVNode"])("p",null,"用于遍历异步请求的可迭代对象。"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 像定义一个创建 promise 的函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"val"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"resolve"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("(val)\n        }, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1000"),Object(a["createTextVNode"])(")\n    })\n}\n")])]),Object(a["createElementVNode"])("p",null,"如果你明确知道有几个 promise 对象，那直接处理即可"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" p1 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" p2 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(")\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" v1 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(" p1\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(v1)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" v2 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(" p2\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(v2)\n})()\n")])]),Object(a["createElementVNode"])("p",null,"如果你有一个对象，里面有 N 个 promise 对象，你可以这样处理"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" list = [\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])("),\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(")\n    ]\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 第一，使用 Promise.all 执行"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"all"),Object(a["createTextVNode"])("(list)."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"res"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(res))\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 第二，使用 for await ... of 遍历执行"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" p "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(" list) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(p)\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，如果用 for...of 只能遍历出各个 promise 对象，而不能触发 await 执行"),Object(a["createTextVNode"])("\n})()\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("【注意】如果你想顺序执行，只能延迟创建 promise 对象，而不能及早创建。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 即，你创建了 promise 对象，它就立刻开始执行逻辑。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" v1 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(v1)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" v2 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(v2)\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(" ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])("]) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" v = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createTimeoutPromise"),Object(a["createTextVNode"])("(n)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'v'"),Object(a["createTextVNode"])(", v)\n    }\n})()\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"3fb8":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"箭头函数的缺点"),Object(a["createElementVNode"])("h2",null,"箭头函数的缺点"),Object(a["createElementVNode"])("p",null,"没有 arguments"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") => {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'this'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"arguments"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 报错，arguments is not defined"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("p",null,"无法通过 call apply bind 等改变 this"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") => {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'this'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// window"),Object(a["createTextVNode"])("\n}\nfn1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("({ "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"x"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(" })\n")])]),Object(a["createElementVNode"])("p",null,"简写的函数会变得难以阅读"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"multiply"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b"),Object(a["createTextVNode"])(") => b === "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"undefined"),Object(a["createTextVNode"])(" ? "),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"b"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" a * b : a * b\n")])]),Object(a["createElementVNode"])("h2",null,"不适用箭头函数的场景"),Object(a["createElementVNode"])("p",null,"对象方法"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"getName"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])("\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("( obj."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getName"),Object(a["createTextVNode"])("() )\n")])]),Object(a["createElementVNode"])("p",null,"扩展对象原型（包括构造函数的原型）"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])("\n}\nobj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__proto__"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"getName"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("( obj."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getName"),Object(a["createTextVNode"])("() )\n")])]),Object(a["createElementVNode"])("p",null,"构造函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Foo"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"name, age"),Object(a["createTextVNode"])(") => {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"age"),Object(a["createTextVNode"])(" = age\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" f = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Foo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 报错 Foo is not a constructor"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"动态上下文中的回调函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" btn1 = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'btn1'"),Object(a["createTextVNode"])(")\nbtn1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"addEventListener"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'click'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {  \n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.log(this === window)"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"innerHTML"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'clicked'"),Object(a["createTextVNode"])("\n})\n")])]),Object(a["createElementVNode"])("p",null,"Vue 生命周期和方法"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("{\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"data"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") { "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(" } },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"getName"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 报错 Cannot read properties of undefined (reading 'name')"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])("\n        },\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// getName() {"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     return this.name // 正常"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// }"),Object(a["createTextVNode"])("\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"mounted"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 报错 Cannot read properties of undefined (reading 'name')"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'msg'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(")\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// mounted() {"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     console.log('msg', this.name) // 正常"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// }"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("【注意】class 中使用箭头函数则"),Object(a["createElementVNode"])("strong",null,"没问题")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Foo"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"name, age"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"age"),Object(a["createTextVNode"])(" = age\n    }\n    getName = "),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])("\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" f = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Foo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'getName'"),Object(a["createTextVNode"])(", f."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getName"),Object(a["createTextVNode"])("())\n")])]),Object(a["createElementVNode"])("p",null,"所以，在 React 中可以使用箭头函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"HelloWorld"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"React.Component"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"props"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"super"),Object(a["createTextVNode"])("(props)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])(" = {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])("\n        }\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"onClick"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.printName}"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("hello world"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    }\n    printName = "),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(")\n    }\n}\n")])]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("p",null,"箭头函数的缺点"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"arguments 参数"),Object(a["createElementVNode"])("li",null,"无法改变 this")]),Object(a["createElementVNode"])("p",null,"不适用的场景"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"对象方法"),Object(a["createElementVNode"])("li",null,"对象原型"),Object(a["createElementVNode"])("li",null,"构造函数"),Object(a["createElementVNode"])("li",null,"动态上下文"),Object(a["createElementVNode"])("li",null,"Vue 生命周期和方法")]),Object(a["createElementVNode"])("h2",null,"划重点"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"Vue 组件是一个对象，而 React 组件是一个 class （如果不考虑 Composition API 和 Hooks）")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"443a":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"从 jQuery 到框架"),Object(a["createElementVNode"])("p",null,"一个 to-do-list 的 demo ，分别用 jquery vue 和 React 实现 。也照顾一下对 vue react 不熟悉的同学。"),Object(a["createElementVNode"])("h2",null,"jquery 实现 to-do-list"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'""'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"txt-title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"btn-submit"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"ul-list"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"./jquery-3.2.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $txtTitle = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#txt-title'"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $ulList = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#ul-list'"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $btnSubmit = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#btn-submit'"),Object(a["createTextVNode"])(")\n    $btnSubmit."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"click"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" title = $txtTitle."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"val"),Object(a["createTextVNode"])("()\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $li = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'<li>'"),Object(a["createTextVNode"])(" + title + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'</li>'"),Object(a["createTextVNode"])(")\n        $ulList."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"append"),Object(a["createTextVNode"])("($li)\n        $txtTitle."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"val"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(")\n    })\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"jquery 的特点——简单粗暴——想改哪里，就动哪里的 DOM，每一步都伴随着 DOM 操作。因此，学习前端知识，一开始最好要先从 jquery 做起。"),Object(a["createElementVNode"])("h2",null,"vue 实现 to-do-list"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-on:click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"add"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-for"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"item in list"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{item}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"./vue-2.5.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"el"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": []\n        },\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"add"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(")\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n            }\n        }\n    })\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"演示了 MVVM ，定义好模板，修改数据即可，即数据驱动视图"),Object(a["createElementVNode"])("h2",null,"react 实现 to-do-list"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("使用工具 https://github.com/facebookincubator/create-react-app 安装环境 ，初始化一个 react 开发环境，然后将入口文件 app.js 清理一下，先暂时只显示"),Object(a["createElementVNode"])("code",null,"hello world")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("创建"),Object(a["createElementVNode"])("code",null,"components"),Object(a["createTextVNode"])("目录，再创建"),Object(a["createElementVNode"])("code",null,"todo"),Object(a["createTextVNode"])("目录")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("其中再创建"),Object(a["createElementVNode"])("code",null,"index.js"),Object(a["createTextVNode"])("和"),Object(a["createElementVNode"])("code",null,"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"list"),Object(a["createTextVNode"])("目录")]),Object(a["createElementVNode"])("li",null,"……")]),Object(a["createElementVNode"])("p",null,"重点：第一，什么是组件；第二，组件是一个独立的孤岛（数据独立）；第三，数据之间如何联动（数据传递）")])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"52de":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"开始"),Object(a["createElementVNode"])("p",null,"ES6 这些知识其实并不算高级，但是因为 ES6 是新出来的标准，因此会被当做高级知识来被询问，也算是考验一个人的积极自学的能力和态度。"),Object(a["createElementVNode"])("p",null,"因此，本章就总结了一些工作中常用的 ES6 的知识点，以便应对面试中问到的 ES6 的问题。"),Object(a["createElementVNode"])("p",null,"本教程定位到高级教程，而该部分知识比较基础。咱们还是先从基础入手，一步一步向高级迈进。奔着“高级”来的同学不要着急，后面有很多烧脑的东西。"),Object(a["createElementVNode"])("h1",null,"搭建 ES6 环境"),Object(a["createElementVNode"])("p",null,"ES6 自 2015 年推出之后，虽然浏览器还没有完全支持所有语法特性，但是已经在开发环境得到了广泛的使用。这就需要在开发环境支持实时的编译，把我们写的 ES6 代码转换为浏览器可识别的 JS 代码，才能在浏览器环境运行起来。本节介绍如何配置这个编译环境。"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("编译 ES6 肯定需要 "),Object(a["createElementVNode"])("a",{href:"http://babeljs.io/"},"babel"),Object(a["createTextVNode"])(" 这个宝贝，另外再配合 "),Object(a["createElementVNode"])("a",{href:"http://webpack.github.io/"},"webpack"),Object(a["createTextVNode"])(" 这个神奇，可以胜任任何 ES6 代码的编译。本节用到的代码可以去 "),Object(a["createElementVNode"])("a",{href:"/code/es6"},"/code/es6"),Object(a["createTextVNode"])(" 中查阅。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("在 babel 官网演示在线编译，使用"),Object(a["createElementVNode"])("code",null,"[1, 2, 3].map(item => item + 1)")]),Object(a["createElementVNode"])("h2",null,"npm init"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("保证安装有 node npm （不再介绍安装过程），运行"),Object(a["createElementVNode"])("code",null,"npm init"),Object(a["createTextVNode"])("，生成 package.json")]),Object(a["createElementVNode"])("h2",null,"安装 babel"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":""},"npm install --save-dev babel-core babel-preset-es2015 babel-preset-latest --registry=https://registry.npm.taobao.org\n")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"babel-preset-es2015 是编译 es2015 即 es6 的规则"),Object(a["createElementVNode"])("li",null,"babel-preset-latest 是 ES7 提案（还不是标准）的转发规则")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("创建"),Object(a["createElementVNode"])("code",null,".babelrc"),Object(a["createTextVNode"])("文件")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-json"},[Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},"{"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},'"presets"'),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},":"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},"["),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"es2015"'),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},","),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"latest"'),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},"]"),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},","),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},'"plugins"'),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},":"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},"["),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},"]"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-punctuation"},"}"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("全局安装"),Object(a["createElementVNode"])("code",null,"npm install --global babel-cli --registry=https://registry.npm.taobao.org"),Object(a["createTextVNode"])(" （mac 中"),Object(a["createElementVNode"])("code",null,"sudo"),Object(a["createTextVNode"])("，windows 下管理员身份运行控制台）")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("然后运行"),Object(a["createElementVNode"])("code",null,"babel --version")]),Object(a["createElementVNode"])("h2",null,"编译 ES6"),Object(a["createElementVNode"])("p",null,"先创建一个简单的 es6 文件，其中使用了箭头函数（后面会详细讲解）"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" item + "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(");\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("然后在命令行运行"),Object(a["createElementVNode"])("code",null,"babel src/index.js"),Object(a["createTextVNode"])("可以看到输出了编译后的 JS 文件。")]),Object(a["createElementVNode"])("h2",null,"使用 webpack 编译"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"npm install webpack babel-loader --save-dev --registry=https://registry.npm.taobao.org")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("创建"),Object(a["createElementVNode"])("code",null,"webpack.config.js")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"module"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"exports"),Object(a["createTextVNode"])(" = {    \n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"entry"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./src/index.js'"),Object(a["createTextVNode"])(",    \n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"output"),Object(a["createTextVNode"])(": {    \n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"path"),Object(a["createTextVNode"])(": __dirname,    \n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"filename"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./build/bundle.js'"),Object(a["createTextVNode"])(",    \n    },    \n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"module"),Object(a["createTextVNode"])(": {    \n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"rules"),Object(a["createTextVNode"])(": [{\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"test"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-regexp"},"/\\.js?$/"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"exclude"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-regexp"},"/(node_modules)/"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"loader"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'babel-loader'"),Object(a["createTextVNode"])("\n        }]    \n    }    \n} \n")])]),Object(a["createElementVNode"])("p",null,"然后修改 package.json 增加一个 scripts 配置"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("  "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"scripts"'),Object(a["createTextVNode"])(": {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"start"'),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"webpack"'),Object(a["createTextVNode"])("\n  },\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("运行"),Object(a["createElementVNode"])("code",null,"npm start")]),Object(a["createElementVNode"])("h1",null,"ES6 Modules"),Object(a["createElementVNode"])("p",null,"下面介绍 ES6 中的模块化规范。相比于前两个，ES6 中的模块化规范更加简洁易懂，基本一看就会。"),Object(a["createElementVNode"])("p",null,"首先，本节要求学习者对 JS 模块化有一个基本的了解，知道什么是模块化，为何需要模块化。"),Object(a["createElementVNode"])("h2",null,"语法"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("定义一个"),Object(a["createElementVNode"])("code",null,"util1.js"),Object(a["createTextVNode"])("，它只返回一个对象")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"a"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("定义一个"),Object(a["createElementVNode"])("code",null,"util2.js"),Object(a["createTextVNode"])("，它返回多个对象")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'fn1'"),Object(a["createTextVNode"])(")\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn2"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'fn2'"),Object(a["createTextVNode"])(")\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// fn3 并未被外部引用"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn3"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'fn3'"),Object(a["createTextVNode"])(")\n}\n")])]),Object(a["createElementVNode"])("p",null,"index.js"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" util1 "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./util1.js'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" { fn1, fn2 } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./util2.js'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(util1)\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])("()\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn2"),Object(a["createTextVNode"])("()\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("运行"),Object(a["createElementVNode"])("code",null,"npm start")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("新建"),Object(a["createElementVNode"])("code",null,"index.html"),Object(a["createTextVNode"])("，起一个 http-server 来看运行效果")]),Object(a["createElementVNode"])("h2",null,"关于 js 众多的模块标准"),Object(a["createElementVNode"])("p",null,"当初 JS 还没有模块化这一说，需要什么 JS 就引入什么 JS 文件。"),Object(a["createElementVNode"])("p",null,"后来，前端有人琢磨出 require.js 这一套，慢慢形成了一个 AMD 的标准。期间淘宝大神自造轮子，搞了一个 CMD（sea.js），不过现在还是 AMD 为主。（貌似每个有技术实力的公司，都会自造轮子）"),Object(a["createElementVNode"])("p",null,"nodejs 发展出来之后，前端开始有了各种自动化构建工具，因此可以将后端的模块化方案，经过打包应用到前端"),Object(a["createElementVNode"])("p",null,"ES6 出来之后，视图通过重新定义一种模块化的机制来统一这种不稳定的形式。但是目前 nodejs 支持积极，浏览器因为是客户端的原因，尚未良好支持。—— 期待早日统一"),Object(a["createElementVNode"])("p",null,"还有些工具、框架自造模块化标准，另起炉灶。我的观点：你可以自造模块化 lib ，但是你不要自造标准。"),Object(a["createElementVNode"])("h2",null,"rollup"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("注意看，util2.js 中定义的"),Object(a["createElementVNode"])("code",null,"fn3"),Object(a["createTextVNode"])("并没有被外部引用，也打包进去了。另外，webpack 打包出来文件有一些其他的代码，很复杂。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("给大家安利一个非常好用的 JS 模块化打包工具 "),Object(a["createElementVNode"])("a",{href:"http://rollupjs.org/"},"rollup.js"),Object(a["createTextVNode"])("。React Vue 都用它打包的，我自己的开源项目 "),Object(a["createElementVNode"])("a",{href:"http://www.wangeditor.com/"},"wangEditor"),Object(a["createTextVNode"])(" 也是用它打包的。")]),Object(a["createElementVNode"])("h1",null,"使用 rollup 打包"),Object(a["createElementVNode"])("h2",null,"安装"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("新建一个文件夹，运行"),Object(a["createElementVNode"])("code",null,"npm init"),Object(a["createTextVNode"])("，然后安装"),Object(a["createElementVNode"])("code",null,"npm i rollup rollup-plugin-node-resolve rollup-plugin-babel babel-plugin-external-helpers babel-preset-latest --save-dev --registry=https://registry.npm.taobao.org")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"babel-plugin-external-helpers 将一些公共的函数提取成一个文件 ？")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("在 src 目录下创建"),Object(a["createElementVNode"])("code",null,".babelrc")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":""},'{\n  "presets": [\n    ["latest", {\n      "es2015": {\n        "modules": false\n      }\n    }]\n  ],\n  "plugins": ["external-helpers"]\n}\n')]),Object(a["createElementVNode"])("p",null,"新建 rollup.config.js"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" babel "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'rollup-plugin-babel'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" resolve "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'rollup-plugin-node-resolve'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"entry"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'src/index.js'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"format"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'umd'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"plugins"),Object(a["createTextVNode"])(": [\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("(),\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"babel"),Object(a["createTextVNode"])("({\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"exclude"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'node_modules/**'"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// only transpile our source code"),Object(a["createTextVNode"])("\n        })\n    ],\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"dest"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'build/bundle.js'"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("h2",null,"打包"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("将之前 webpack 示例中的"),Object(a["createElementVNode"])("code",null,"src"),Object(a["createTextVNode"])("的所有 JS 文件拷贝过来")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("修改 package.json 的 srcipts ， "),Object(a["createElementVNode"])("code",null,'"start": "rollup -c rollup.config.js"'),Object(a["createTextVNode"])("，运行"),Object(a["createElementVNode"])("code",null,"npm start")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("看一下打包出来的文件，再对比一下此前 webpack 打包出来的文件：第一，文件简介了；第二，用不到的"),Object(a["createElementVNode"])("code",null,"fn3"),Object(a["createTextVNode"])("消失了")]),Object(a["createElementVNode"])("h2",null,"说明"),Object(a["createElementVNode"])("p",null,"rollup 只是一个模块化的工具，要想用于前端自动化，还需要其他自动化工具的支持，如 gulp 。"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"这里阐述一下一个系统设计、开发的观点：参考《Linux/Unix设计思想》一书，系统设计应该是各个小工具拼接而成的过程，使用大而全富尔美的框架，违背了这种设计思想。")]),Object(a["createElementVNode"])("h1",null,"琐碎的功能"),Object(a["createElementVNode"])("h2",null,"let const"),Object(a["createElementVNode"])("p",null,"注意，const 不能被重新赋值，编译会报错"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// JS"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" i = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(";\ni = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" j = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(";\nj = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(";\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ES6"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" i = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(";\ni = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(";      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 正确"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" j = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(";\nj = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(";      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 报错"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"多行字符串/模板变量"),Object(a["createElementVNode"])("p",null,"JS 代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// JS"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" name = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])(", age = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", html = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(";\nhtml += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'<div>'"),Object(a["createTextVNode"])(";\nhtml += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'  <p>'"),Object(a["createTextVNode"])(" + name + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'</p>'"),Object(a["createTextVNode"])(";\nhtml += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'  <p>'"),Object(a["createTextVNode"])(" + age + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'</p>'"),Object(a["createTextVNode"])(";\nhtml += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'</div>'"),Object(a["createTextVNode"])(";\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ES6"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" name = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])(", age = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" html = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},[Object(a["createTextVNode"])("`<div>\n                <p>"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},"${name}"),Object(a["createTextVNode"])("</p>\n                <p>"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},"${age}"),Object(a["createTextVNode"])("</p>\n            </div>`")]),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(html);\n")])]),Object(a["createElementVNode"])("p",null,"注意两点："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("多行字符串必须用"),Object(a["createElementVNode"])("code",null,"反引号"),Object(a["createTextVNode"])("来包裹")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("模板变量必须用"),Object(a["createElementVNode"])("code",null,"${ }"),Object(a["createTextVNode"])("来包裹，而且必须是在"),Object(a["createElementVNode"])("code",null,"反引号"),Object(a["createTextVNode"])("包裹中才能生效（"),Object(a["createElementVNode"])("code",null,"单引号"),Object(a["createTextVNode"])("包裹中不能生效）")])]),Object(a["createElementVNode"])("h2",null,"解构赋值"),Object(a["createElementVNode"])("p",null,"传统 JS 中，获取对象属性和数组元素的方法是这样的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// JS"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" obj = {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"a"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"b"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])("}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" a = obj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"a"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" b = obj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"b"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" arr = ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'yyy'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zzz'"),Object(a["createTextVNode"])("]\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" x = arr["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("]\n")])]),Object(a["createElementVNode"])("p",null,"通过 ES6 的解构赋值，让获取对象属性和数组元素更加简单"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ES6"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj = { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"a"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"b"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"c"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])(" }\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" {a, c} = obj\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(a)\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(c)\n\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" arr = ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'yyy'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zzz'"),Object(a["createTextVNode"])("]\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" [x, y, z] = arr\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(x)\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(y)\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(z)\n")])]),Object(a["createElementVNode"])("h2",null,"块级作用域"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// JS"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" obj = {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"a"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"b"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])("}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" item "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" obj) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(item)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(item) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 'b'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ES6"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj = {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"a"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"b"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])("}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" item "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" obj) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(item)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(item) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// undefined"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"函数默认参数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// JS"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (b == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") {\n        b = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n    }\n}\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ES6"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("a, b="),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0")]),Object(a["createTextVNode"])(") {\n\n}\n")])]),Object(a["createElementVNode"])("h2",null,"箭头函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// JS"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" arr = ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])("]\narr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" item + "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("\n})\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ES6"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" arr = ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])("]\narr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" item + "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(");\narr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item, index"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(index)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" item + "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("\n})\n")])]),Object(a["createElementVNode"])("p",null,"这里重点注意的是箭头函数的 this ，举例看"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'real'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// {a: 100}"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" arr = ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])("]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 普通 JS"),Object(a["createTextVNode"])("\n    arr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'js'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// window"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" item + "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("\n    })\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 箭头函数"),Object(a["createTextVNode"])("\n    arr."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'es6'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// {a: 100}"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" item + "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("\n    })\n}\nfn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("({"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"a"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])("})\n")])]),Object(a["createElementVNode"])("h1",null,"Class"),Object(a["createElementVNode"])("p",null,"目前使用 class 的场景非常多，例如在使用 React 时"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-jsx"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Ad"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"React.Component"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"props"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"super"),Object(a["createTextVNode"])("(props);\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])(" = {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": []\n        }\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n            "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("hello imooc"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n        )\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"componentDidMount"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        \n    }\n}\n")])]),Object(a["createElementVNode"])("h2",null,"基本用法"),Object(a["createElementVNode"])("p",null,"JS 代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"MathHandle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"x, y"),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"x"),Object(a["createTextVNode"])(" = x;\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"y"),Object(a["createTextVNode"])(" = y;\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"add"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"x"),Object(a["createTextVNode"])(" + "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"y"),Object(a["createTextVNode"])(";\n};\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" m = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(");\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(m."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"add"),Object(a["createTextVNode"])("())\n")])]),Object(a["createElementVNode"])("p",null,"ES6 代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"x, y"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"x"),Object(a["createTextVNode"])(" = x;\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"y"),Object(a["createTextVNode"])(" = y;\n  }\n\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"add"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"x"),Object(a["createTextVNode"])(" + "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"y"),Object(a["createTextVNode"])(";\n  }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" m = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(");\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(m."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"add"),Object(a["createTextVNode"])("())\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"npm start"),Object(a["createTextVNode"])("看一下，可以看到编译出来的代码有许多附加的内容，不在简洁")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("其实 class 就是 js 构造函数的一个语法糖，连原型链原理都是一样的（"),Object(a["createElementVNode"])("strong",null,"这种语法糖形式，看起来和实际原理不一样的东西，我个人不太赞同"),Object(a["createTextVNode"])("）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ..."),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},'// "function"'),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MathHandle"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"constructor"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// true"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 这种语法糖形式，看起来和实际原理不一样的东西，我个人不太赞同"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 形式上强行模仿 java C# ，却失去了它的本性和个性"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("另外，使用 class 打包出来的 JS 代码，会有很多冗余附加代码，"),Object(a["createElementVNode"])("strong",null,"这就导致使用发布的代码调试 bug 的时候变得很困难"),Object(a["createTextVNode"])("。")]),Object(a["createElementVNode"])("h2",null,"继承"),Object(a["createElementVNode"])("p",null,"使用 JS 的原型如何实现集成，在《前端 JS 面试技巧》的课程中已经详细讲过。这里再拿一个例子简单回顾一下，"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 动物"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Animal"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"eat"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'animal eat'"),Object(a["createTextVNode"])(")\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 狗"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Dog"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"bark"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'dog bark'"),Object(a["createTextVNode"])(")\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Dog"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Animal"),Object(a["createTextVNode"])("()\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 哈士奇"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" hashiqi = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Dog"),Object(a["createTextVNode"])("()\n")])]),Object(a["createElementVNode"])("p",null,"用 ES6 可以这样编写"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Animal"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"name"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},[Object(a["createTextVNode"])("`"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},[Object(a["createTextVNode"])("${"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(".name}")]),Object(a["createTextVNode"])(" eat`")]),Object(a["createTextVNode"])(")\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Dog"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Animal"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"name"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"super"),Object(a["createTextVNode"])("(name)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"say"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},[Object(a["createTextVNode"])("`"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},[Object(a["createTextVNode"])("${"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(".name}")]),Object(a["createTextVNode"])(" say`")]),Object(a["createTextVNode"])(")\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" dog = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Dog"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'哈士奇'"),Object(a["createTextVNode"])(")\ndog."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"say"),Object(a["createTextVNode"])("()\ndog."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("()\n")])]),Object(a["createElementVNode"])("p",null,"查看编译出来的 js 代码，会发现冗余代码更多，更加复杂了。"),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("p",null,"用 class 做为构造函数，我个人感觉不如直接使用 function ，看起来更加直观，更加接近原理，而且编译出来没有冗余代码"),Object(a["createElementVNode"])("p",null,"但是，使用 es6 编写继承，比用 js 编写继承看起来更加统一，不像 js 编写继承那么琐碎。这是因为 class 的设计其实是借鉴了 java C# 这些经典面向对象语言的语法，让 js 看起来更加“面向对象”化"),Object(a["createElementVNode"])("p",null,"但是，无论语法怎样写，其中的原理你得明白，它还是逃不出原型和原型链的理论基础"),Object(a["createElementVNode"])("p",null,"待 es6 部分讲解完，会带领大家继续深入看 js 原型。"),Object(a["createElementVNode"])("h1",null,"Promise"),Object(a["createElementVNode"])("h2",null,"语法"),Object(a["createElementVNode"])("p",null,"js 写异步一直是很意见很蛋疼的事，总是逃不开回调函数，即传说中的“callback hell”，例如"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"src, callback, fail"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" img = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(")\n    img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onload"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"callback"),Object(a["createTextVNode"])("(img)\n    }\n    img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onerror"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fail"),Object(a["createTextVNode"])("()\n    }\n    img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = src\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" src = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'http://www.imooc.com/static/img/index/logo_new.png'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"width"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'failed'"),Object(a["createTextVNode"])(")\n})\n")])]),Object(a["createElementVNode"])("p",null,"使用 Promise 就是"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"src"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" promise = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Promise"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"resolve, reject"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" img = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(")\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onload"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"resolve"),Object(a["createTextVNode"])("(img)\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"onerror"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"reject"),Object(a["createTextVNode"])("()\n        }\n        img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = src\n    })\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" promise   \n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" src = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'http://www.imooc.com/static/img/index/logo_new.png'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" result = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadImg"),Object(a["createTextVNode"])("(src)\n\nresult."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"width"),Object(a["createTextVNode"])(")\n}, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'failed'"),Object(a["createTextVNode"])(")\n})\n\nresult."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"then"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"img"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(img."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"height"),Object(a["createTextVNode"])(")\n})\n")])]),Object(a["createElementVNode"])("h2",null,"兼容"),Object(a["createElementVNode"])("p",null,"Promise 在浏览器的兼容已经比较好了，某些不兼容的，可以引入 q.js 或者 bluebird.js"),Object(a["createElementVNode"])("h2",null,"最后"),Object(a["createElementVNode"])("p",null,"后面会有 js 异步的深入介绍，到时候会详细介绍 Promise 的前生今世，这里显示一下语法。"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"为何 Generator 不介绍")]),Object(a["createElementVNode"])("p",null,"Generator 语法和实现原理都比较复杂，很难理解。另外，它已经有了很成熟的替代方案，async/await（会再接下来的异步中详细介绍）。还有，它并不是为了解决异步这个问题而产生的，而是恰好被用来解决了异步，因此理解起来比较难。因此，Generator 会慢慢退出历史舞台，被更加简洁的东西代替。"),Object(a["createElementVNode"])("h1",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"搭建 ES6 编译环境：使用 babel 编译，使用 webpack 做模块化处理，后来又介绍了 rollup 做模块化处理"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("modules：关键字"),Object(a["createElementVNode"])("code",null,"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"export")]),Object(a["createElementVNode"])("li",null,"琐碎的功能：let/const，多行字符串/模板变量，解构赋值，块级作用域，函数默认参数，箭头函数"),Object(a["createElementVNode"])("li",null,"class：用法、和原型的关系、继承"),Object(a["createElementVNode"])("li",null,"Promise：用法")]),Object(a["createElementVNode"])("hr"),Object(a["createElementVNode"])("p",null,"《Linux/Unix 设计思想》提到的一些软件设计的思想"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"小即是美"),Object(a["createElementVNode"])("li",null,"让每个程序都只做一件事"),Object(a["createElementVNode"])("li",null,"让没个程序都称为过滤器"),Object(a["createElementVNode"])("li",null,"舍高效而取可移植性"),Object(a["createElementVNode"])("li",null,"充分利用杠杆效应"),Object(a["createElementVNode"])("li",null,"尽快建立原型"),Object(a["createElementVNode"])("li",null,"不强制有用户界面")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"54af":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"类型判断"),Object(a["createElementVNode"])("h2",null,"问题"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("实现一个 "),Object(a["createElementVNode"])("code",null,"getType"),Object(a["createTextVNode"])(" 函数，传入一个变量，能准确的获取它的类型。 如 "),Object(a["createElementVNode"])("code",null,"number"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"string"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"object"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"array"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"map"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"regexp"),Object(a["createTextVNode"])(" 等。")]),Object(a["createElementVNode"])("h2",null,"类型判断"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("常规的类型判断一般用 "),Object(a["createElementVNode"])("code",null,"typeof"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"instanceof"),Object(a["createTextVNode"])(" ，但这俩也有一些缺点")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"typeof"),Object(a["createTextVNode"])(" 无法继续区分 "),Object(a["createElementVNode"])("code",null,"object"),Object(a["createTextVNode"])(" 类型")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"instanceof"),Object(a["createTextVNode"])(" 需要知道构造函数，即需要两个输入")])]),Object(a["createElementVNode"])("h2",null,"枚举不是好方法"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("你可能觉得 "),Object(a["createElementVNode"])("code",null,"typeof"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"instanceof"),Object(a["createTextVNode"])(" 结合起来可以判断，枚举所有的类型。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 这并不是一个好方法，因为"),Object(a["createElementVNode"])("strong",null,"手动枚举是不靠谱的"),Object(a["createTextVNode"])("，不具备完整性。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 第一，你有可能忽略某些类型，如；第二，ES 有会继续增加新的类型，如 "),Object(a["createElementVNode"])("code",null,"Symbol"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"BigInt")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getType"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("x: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" x === "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'object'"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isArray"),Object(a["createTextVNode"])("(x)) "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'array'"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (x instance "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"of"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'map'"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 继续枚举..."),Object(a["createTextVNode"])("\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" x\n}\n")])]),Object(a["createElementVNode"])("h2",null,[Object(a["createTextVNode"])("使用 "),Object(a["createElementVNode"])("code",null,"Object.prototype.toString")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("注意，必须用 "),Object(a["createElementVNode"])("code",null,"Object.prototype.toString"),Object(a["createTextVNode"])(" ，不可以直接用 "),Object(a["createElementVNode"])("code",null,"toString"),Object(a["createTextVNode"])("。后者可能是子类重写的。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"toString"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// '1,2' （ 这样使用的其实是 Array.prototype.toString ）"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"toString"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("(["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])("]) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// '[object Array]'"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 获取详细的数据类型\n * @param x x\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getType"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("x: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" originType = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"toString"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("(x) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// '[object String]'"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" spaceIndex = originType."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"indexOf"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"' '"),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(" = originType."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"slice"),Object(a["createTextVNode"])("(spaceIndex + "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", -"),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 'String'"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"toLowerCase"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 'string'"),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // 功能测试"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType(null) ) // 'null'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType(undefined) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType(100) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType('abc') )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType(true) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType(Symbol()) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType({}) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType([]) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( getType(() => {}) )"),Object(a["createTextVNode"])("\n\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"55eb":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createStaticVNode"])('<html><head></head><body><h1>TCP 连接 三次握手 四次挥手</h1><h2>建立连接</h2><p>客户端和服务端通过 HTTP 协议发送请求，并获取内容。</p><p>在发送请求之前，需要先建立连接，确定目标机器处于可接受请求的状态。<br> 就例如，你要请快递员（第三方的）去张三家取一个东西，你必须先打电话问问他在不在家。这就是建立连接的过程。</p><p>HTTP 协议是一个应用层的协议，它只规定了 req 和 res 的数据格式，如状态码、header、body 等。<br> 而建立网络连接需要更加底层的 TCP 协议。</p><h2>三次握手</h2><p>三次握手，即建立一次 TCP 连接时，客户端和服务端总共需要发送 3 个包。</p><p>先举一个例子。还是你要派人去张三家取一个东西，现在你要发短信（不是打电话）“建立连接”，至少需要 3 个步骤，缺一不可。</p><ul><li>你：在家吗？</li><li>张三：在家</li><li>你：好，这就过去（然后你指派人上门，张三准备迎接）</li></ul><p>过程</p><ul><li>客户端发包，服务端收到。服务端确认：客户端的发送能力是正常的。</li><li>服务端发包，客户端收到。客户端确认：服务端的接收能力是正常的。</li><li>客户端发包，服务端收到。服务端确认：客户端即将给我发送数据，我要准备接收。</li></ul><p>建立连接完成，然后就开始发送数据，通讯。</p><h2>四次挥手</h2><p>握手，是建立连接。挥手，就是告别，就是关闭连接。</p><p>还是之前的例子。取东西，不一定一次就取完，可能要来回很多次。而且，也不一定全部由你主动发起，过程中张三也可能会主动派人给你发送。<br> 即，你在 chrome 中看到的是一次 http 请求，其实背后可能需要好几次网络传输，只不过浏览器给合并起来了。</p><p>好了，取东西完毕了，你要发短信“关闭连接”，告诉张三可以关门了，需要 4 个步骤。<br> 【注意】这里你需要等着确认张三关门，才算是完全关闭连接，不能你说一声就不管了。跟日常生活不一样。</p><ul><li>你：完事儿了</li><li>张三：好的 （此时可能还要继续给你发送，你也得继续接收。直到张三发送完）</li><li>张三：我发送完毕，准备关门了</li><li>你：好，关门吧 （然后你可以走了，张三可以关门了，连接结束）</li></ul><p>过程</p><ul><li>客户端发包，服务端接收。服务端确认：客户端已经请求结束</li><li>服务端发包，客户端接收。客户端确认：服务端已经收到，我等待它关闭</li><li>服务端发包：客户端接受。客户端确认：服务端已经发送完成，可以关闭</li><li>客户端发包，服务端接收。服务端确认：可以关闭了</li></ul><h2>图示</h2><p><img src="https://sunny586.github.io/dist/mark-down/fe-interview/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/img/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.png" alt=""></p></body></html>',1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"57da":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"vdom"),Object(a["createElementVNode"])("p",null,"现在用到的前端主流框架 vue 或者 React ，里面都有 vdom ，目的就是为了提升渲染页面的效率。React 首次将 vdom 引入公众的视野，大家发现这东西真的非常快。vue 那时候还没有 vdom ，后来升级 2.0 就把 vdom 给引入进来，课件对 vdom 的认可。"),Object(a["createElementVNode"])("p",null,"高级面试题中肯定会被问到 vdom ，因为你无论在介绍 React 还是 vue 的实现逻辑的时候，都逃不出 vdom 。虽然 vdom 不会在工作中直接使用（除非你研究框架），但是会在面试中被直接问到。"),Object(a["createElementVNode"])("p",null,"本章介绍 vdom ，分以下几部分："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"描述一个场景，引出 vdom"),Object(a["createElementVNode"])("li",null,"用一个现成的 vdom 库 https://github.com/snabbdom/snabbdom ，介绍一下 vdom 的基本应用"),Object(a["createElementVNode"])("li",null,"讲解 vdom 实现的核心逻辑和算法"),Object(a["createElementVNode"])("li",null,"总结")]),Object(a["createElementVNode"])("h1",null,"为何使用 vdom"),Object(a["createElementVNode"])("p",null,"使用 vdom 也是基于一个现状：数据和视图的分离，即数据驱动视图。"),Object(a["createElementVNode"])("h2",null,"需求"),Object(a["createElementVNode"])("p",null,"有这样一段数据，要显示成一个表格"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 1. 将该数据展示成一个表格。2. 随便修改一个信息，表格也跟着修改"),Object(a["createTextVNode"])("\n[\n    {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'20'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'北京'"),Object(a["createTextVNode"])("\n    },\n    {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'李四'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'21'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'上海'"),Object(a["createTextVNode"])("\n    },\n    {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'王五'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'22'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'广州'"),Object(a["createTextVNode"])("\n    }\n]\n")])]),Object(a["createElementVNode"])("p",null,"在页面中再增加一个按钮，点击按钮的时候可能会修改以上数据的某个信息，修改之后，表格要随着显示出修改结果。"),Object(a["createElementVNode"])("h2",null,"jquery 如何实现"),Object(a["createElementVNode"])("p",null,"如果不用 vdom ，用 jquery 实现。核心的实现逻辑如下"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"container"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"btn-change"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("change"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"./jquery-3.2.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" data = [\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'20'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'北京'"),Object(a["createTextVNode"])("\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'李四'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'21'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'上海'"),Object(a["createTextVNode"])("\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'王五'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'22'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'广州'"),Object(a["createTextVNode"])("\n        }\n    ]\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 渲染函数"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"data"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $container = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#container'"),Object(a["createTextVNode"])(")\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 清空现有内容"),Object(a["createTextVNode"])("\n        $container."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"html"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(")\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 拼接 table"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $table = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'<table>'"),Object(a["createTextVNode"])(")\n        $table."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"append"),Object(a["createTextVNode"])("($("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'<tr><td>name</td><td>age</td><td>address</td></tr>'"),Object(a["createTextVNode"])("))\n        data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(") {\n            $table."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"append"),Object(a["createTextVNode"])("($("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'<tr><td>'"),Object(a["createTextVNode"])(" + item."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'</td><td>'"),Object(a["createTextVNode"])(" + item."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"age"),Object(a["createTextVNode"])(" + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'</td><td>'"),Object(a["createTextVNode"])(" + item."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"address"),Object(a["createTextVNode"])(" + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'</td></tr>'"),Object(a["createTextVNode"])("))\n        })\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 渲染到页面"),Object(a["createTextVNode"])("\n        $container."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"append"),Object(a["createTextVNode"])("($table)\n    }\n\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 修改信息"),Object(a["createTextVNode"])("\n    $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#btn-change'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"click"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        data["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"age"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])("\n        data["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"address"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'深圳'"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("(data)\n    })\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 初始化时候渲染"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("(data)\n\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"以上实现方式的问题"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从以上的实现方式看不出啥问题，但是如果这个表格很大，或者数据、视图再更加复杂，change 的频率再高一些，性能问题可能就会指数级的暴露出来。原因就是：无论修改什么数据，这个表格都会"),Object(a["createElementVNode"])("strong",null,"全部渲染，而不是按需渲染"),Object(a["createTextVNode"])("。")]),Object(a["createElementVNode"])("p",null,"DOM 操作是“昂贵”的（而 JS 执行是很快的），这个大家都知道，按需渲染才能最大范围的减少数据改变对于视图的影响。改一点就重新渲染一点，不改就不重新渲染。"),Object(a["createElementVNode"])("p",null,"（打印一个 DOM 节点的属性有哪些）"),Object(a["createElementVNode"])("p",null,"那如何做到按需渲染？—— vdom 就可以做到。"),Object(a["createElementVNode"])("h1",null,"使用 vdom"),Object(a["createElementVNode"])("p",null,"所谓的 vdom 就是用 JS 对象去模拟一个真实的 DOM 结构。所有的 html 标签（或者 DOM 节点），都可以用以下 JS 结构来表示（这也是 xml 的特点决定的）"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("{\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'container'"),Object(a["createTextVNode"])("\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": []\n}\n")])]),Object(a["createElementVNode"])("p",null,"例如"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'list'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("Item 1"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("Item 2"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"就可以用以下方式来表示"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("{\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'list'"),Object(a["createTextVNode"])(" },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(" },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 1'"),Object(a["createTextVNode"])("]\n        }, {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(" },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 2'"),Object(a["createTextVNode"])("]\n        }\n    ]\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,[Object(a["createTextVNode"])("介绍"),Object(a["createElementVNode"])("code",null,"vdom"),Object(a["createTextVNode"])("和"),Object(a["createElementVNode"])("code",null,"vnode"),Object(a["createTextVNode"])("的区别")])]),Object(a["createElementVNode"])("h2",null,"基本流程"),Object(a["createElementVNode"])("p",null,"先说一下使用 vdom 的基本流程，结合上一节使用 jquery 的 demo 。"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"使用 data 生成一个 vnode （vnode 和 vdom 的区别，就跟 node 和 dom 的区别一样）"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("第一次渲染时，直接将这个 vnode 渲染到"),Object(a["createElementVNode"])("code",null,"#container"),Object(a["createTextVNode"])("中，并将这份 vnode 暂存下来")]),Object(a["createElementVNode"])("li",null,"当 change 的时候，在根据 change 之后的 data 重新生成一份 newVnode"),Object(a["createElementVNode"])("li",null,"那 newVnode 和之前存储的 vnode 做对比，将有差异的部分渲染到页面中（无差异的部分，不动）。这一步一般都是 vdom 工具封装好的，我们只需调用即可。")]),Object(a["createElementVNode"])("h2",null,"snabbdom"),Object(a["createElementVNode"])("p",null,"snabbdom 是一个开源的 vdom 库（github 可以搜到），vue 中的 vdom 操作就引用了它。先介绍一下它的几个核心函数"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"h"),Object(a["createTextVNode"])("函数，第一个参数是 html 标签（也支持 css 选择器，这属于锦上添花），第二个参数是属性，第三个参数是子元素（一个数组）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vnode = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div#container.two.classes'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"on"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"click"),Object(a["createTextVNode"])(": someFn}}, [\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'span'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"style"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"fontWeight"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'bold'"),Object(a["createTextVNode"])("}}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'This is bold'"),Object(a["createTextVNode"])("),\n  "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"' and this is just normal text'"),Object(a["createTextVNode"])(",\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'a'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"props"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"href"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/foo'"),Object(a["createTextVNode"])("}}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'I\\'ll take you places!'"),Object(a["createTextVNode"])(")\n]);\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"path"),Object(a["createTextVNode"])("函数，第一个参数是一个 DOM 节点或者 vnode ，第二个参数是 vnode")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" container = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'container'"),Object(a["createTextVNode"])(");\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Patch into empty DOM element – this modifies the DOM as a side effect"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"patch"),Object(a["createTextVNode"])("(container, vnode);\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Second `patch` invocation"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"patch"),Object(a["createTextVNode"])("(vnode, newVnode); "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Snabbdom efficiently updates the old view to the new state"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,[Object(a["createTextVNode"])("对于外部 snabbdom（或者其他 vdom 库） 的使用者来说，核心函数就是"),Object(a["createElementVNode"])("code",null,"h"),Object(a["createTextVNode"])("和"),Object(a["createElementVNode"])("code",null,"vdom")])]),Object(a["createElementVNode"])("h2",null,"h 函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vnode = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul#list'"),Object(a["createTextVNode"])(", {}, [\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li.item'"),Object(a["createTextVNode"])(", {}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 1'"),Object(a["createTextVNode"])("),\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li.item'"),Object(a["createTextVNode"])(", {}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 2'"),Object(a["createTextVNode"])(")\n])\n")])]),Object(a["createElementVNode"])("h2",null,"patch 函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vnode = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul#list'"),Object(a["createTextVNode"])(", {}, [\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li.item'"),Object(a["createTextVNode"])(", {}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 1'"),Object(a["createTextVNode"])("),\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li.item'"),Object(a["createTextVNode"])(", {}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 2'"),Object(a["createTextVNode"])(")\n])\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" container = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'container'"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"patch"),Object(a["createTextVNode"])("(container, vnode)\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 模拟改变"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" btnChange = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'btn-change'"),Object(a["createTextVNode"])(")\nbtnChange."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"addEventListener"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'click'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" newVnode = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul#list'"),Object(a["createTextVNode"])(", {}, [\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li.item'"),Object(a["createTextVNode"])(", {}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 111'"),Object(a["createTextVNode"])("),\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li.item'"),Object(a["createTextVNode"])(", {}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 222'"),Object(a["createTextVNode"])("),\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li.item'"),Object(a["createTextVNode"])(", {}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 333'"),Object(a["createTextVNode"])("),\n    ])\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"patch"),Object(a["createTextVNode"])("(vnode, newVnode)\n})\n")])]),Object(a["createElementVNode"])("h2",null,"重做 demo"),Object(a["createElementVNode"])("p",null,"按照之前总结的步骤，重写 demo 代码如下"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"container"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"btn-change"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("change"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcss.com/snabbdom/0.7.0/snabbdom.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcss.com/snabbdom/0.7.0/snabbdom-class.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcss.com/snabbdom/0.7.0/snabbdom-props.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcss.com/snabbdom/0.7.0/snabbdom-style.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcss.com/snabbdom/0.7.0/snabbdom-eventlisteners.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcss.com/snabbdom/0.7.0/h.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" snabbdom = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"snabbdom"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义关键函数 patch"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" path = snabbdom."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"init"),Object(a["createTextVNode"])("([\n        snabbdom_class,\n        snabbdom_props,\n        snabbdom_style,\n        snabbdom_eventlisteners\n    ])\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义关键函数 h"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" h = snabbdom."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"h"),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 原始数据"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" data = [\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'20'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'北京'"),Object(a["createTextVNode"])("\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'李四'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'21'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'上海'"),Object(a["createTextVNode"])("\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'王五'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'22'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'广州'"),Object(a["createTextVNode"])("\n        }\n    ]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 把表头也放在 data 中"),Object(a["createTextVNode"])("\n    data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"unshift"),Object(a["createTextVNode"])("({\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'姓名'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'年龄'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"address"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'地址'"),Object(a["createTextVNode"])("\n    })\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" container = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'container'"),Object(a["createTextVNode"])(")\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 渲染函数"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vnode\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"data"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" newVnode = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'table'"),Object(a["createTextVNode"])(", {}, data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 获取所有的 td"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" tds = []\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" i\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (i "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" item) {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (item."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"hasOwnProperty"),Object(a["createTextVNode"])("(i)) {\n                    tds."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'td'"),Object(a["createTextVNode"])(", {}, [item[i] + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("]))\n                }\n            }\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回 tr"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'tr'"),Object(a["createTextVNode"])(", {}, tds)\n        }))\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (vnode) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("(vnode, newVnode)\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("(container, newVnode)\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 保存当前的 vnode"),Object(a["createTextVNode"])("\n        vnode = newVnode\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 修改信息"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'btn-change'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"addEventListener"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'click'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        data["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"age"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])("\n        data["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"address"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'深圳'"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// re-render"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("(data)\n    })\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 第一次渲染"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("(data)\n\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"对比"),Object(a["createElementVNode"])("p",null,"运行 jquery 的 demo ，然后用 chrome 查看 DOM 结构，点击“change”按钮看看都有哪些节点有变化。同样的逻辑，再用 snabbdom 的 demo 运行起来，然后用 chrome 查看 DOM 结构，点击“change”按钮看看都有哪些节点有变化。—— 很容易就能看出两者的区别。"),Object(a["createElementVNode"])("h1",null,"vdom 实现原理"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("vdom 的核心就是"),Object(a["createElementVNode"])("code",null,"diff"),Object(a["createTextVNode"])("算法，也是最难讲、最难理解的部分。"),Object(a["createElementVNode"])("strong",null,"不同的 vdom 库的 diff 算法是不一样的，本教程就以 snabbdom 为例")]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"能通过演示代码的方式来讲，那肯定是直接带着大家写代码。但是有些情况下，不能适合挨行写代码讲解，也没有必要。再者，当合格的程序猿，只会门头写代码可不行。")]),Object(a["createElementVNode"])("h2",null,"核心接口"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("(vnode, newVnode)\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("(container, newVnode)\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"currentNode, newVnode"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isElement"),Object(a["createTextVNode"])("(currentNode)) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 此时 currentNode 是一个真实的 DOM 节点"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 根据 vnode 创建真实 DOM"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(currentNode, newVnode)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 直接对比子节点"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateChildren"),Object(a["createTextVNode"])("(currentNode, newVnode)\n}\n")])]),Object(a["createElementVNode"])("h2",null,"isElement"),Object(a["createElementVNode"])("p",null,"就是判断一个对象是不是 html 元素，判断方式有很多种，例如"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 就是判断一个对象是不是 html 元素，判断方式有很多种，例如"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"elem"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" elem "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"HTMLElement"),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"elem"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" elem."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"nodeName"),Object(a["createTextVNode"])(" && elem."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"nodeType"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("h2",null,"createElement"),Object(a["createElementVNode"])("p",null,"就是根据"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("{\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'list'"),Object(a["createTextVNode"])("\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])("\n            },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 1'"),Object(a["createTextVNode"])("]\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])("\n            },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 1'"),Object(a["createTextVNode"])("]\n        }\n    ]\n}\n")])]),Object(a["createElementVNode"])("p",null,"创建出"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'list'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("Item 1"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"注意有一个递归（实现逻辑通过代码演示）"),Object(a["createElementVNode"])("h2",null,"isSameVnode"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("首先说一个方法"),Object(a["createElementVNode"])("code",null,"isSameVnode"),Object(a["createTextVNode"])("。其实在创建 vnode 的时候，每个节点都有一个"),Object(a["createElementVNode"])("code",null,"key"),Object(a["createTextVNode"])("，这个"),Object(a["createElementVNode"])("code",null,"key"),Object(a["createTextVNode"])("简单来说就是一个序号。记得 React 中做遍历显示的时候要怎么写不？")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n  "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      {\n        list.map((item, index) => {\n            return "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{index}"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{item}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        })\n      }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n);\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("对于每个层级来说，都有一个独一无二的"),Object(a["createElementVNode"])("code",null,"key"),Object(a["createTextVNode"])("。例如——（"),Object(a["createElementVNode"])("strong",null,"画图表示"),Object(a["createTextVNode"])("）")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("注意，使用"),Object(a["createElementVNode"])("code",null,"isSameVnode"),Object(a["createTextVNode"])("都是统一级别的 vnode 进行对比，不能跨级别对比（算法也不允许跨级别对比）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isSameVnode"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// tag 和 key 相同，就认为是 same vnode"),Object(a["createTextVNode"])("\n    a."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tag"),Object(a["createTextVNode"])(" === b."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tag"),Object(a["createTextVNode"])(" && a."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"key"),Object(a["createTextVNode"])(" === b."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"key"),Object(a["createTextVNode"])("    \n}\n")])]),Object(a["createElementVNode"])("h2",null,"updateChildren"),Object(a["createElementVNode"])("p",null,"updateChildren 实现的非常巧妙，详细看一下它的实现逻辑。先拿几个流程图看一下，然后再看代码实现。"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("先把相同的 vnode 找出来，递归执行"),Object(a["createElementVNode"])("code",null,"updateChildren"),Object(a["createTextVNode"])("，剩下不同的再去做最坏的打算——DOM 操作")]),Object(a["createElementVNode"])("h1",null,"vdom 实现原理"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("vdom 的核心就是"),Object(a["createElementVNode"])("code",null,"diff"),Object(a["createTextVNode"])("算法，也是最难讲、最难理解的部分。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("因此，本节以介绍为主，把核心的流程讲出来，让大家快速明白，在面试的时候能说出重点。我们没时间、也没必要把"),Object(a["createElementVNode"])("code",null,"diff"),Object(a["createTextVNode"])("的下详细过程都将明白，那样成本太高了。2/8原则会提升你的学习效率。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"不同的 vdom 库的 diff 算法是不一样的，本教程就以 snabbdom 为例")]),Object(a["createElementVNode"])("h2",null,"核心接口"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("(vnode, newVnode)\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("(container, newVnode)\n")])]),Object(a["createElementVNode"])("h2",null,"实现方法"),Object(a["createElementVNode"])("p",null,"首先，用于 path 对比的两个几点，肯定是同一个元素，否则没必要 patch"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"path"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"currentNode, newVnode"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isElement"),Object(a["createTextVNode"])("(currentNode)) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 此时 currentNode 是一个真实的 DOM 节点"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 根据 vnode 创建真实 DOM"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(currentNode, newVnode)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 直接对比子节点"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateChildren"),Object(a["createTextVNode"])("(currentNode, newVnode)\n}\n")])]),Object(a["createElementVNode"])("h2",null,"isElement"),Object(a["createElementVNode"])("p",null,"就是判断一个对象是不是 html 元素，判断方式有很多种，例如"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"elem"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" elem "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"HTMLElement"),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"isElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"elem"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" elem."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"nodeName"),Object(a["createTextVNode"])(" && elem."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"nodeType"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("h2",null,"createElement"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("根据 vnode 创建一个真实的 DOM 结构，然后替换掉当前的"),Object(a["createElementVNode"])("code",null,"currentNode"),Object(a["createTextVNode"])("（一个真实的 DOM 节点，即传进来的"),Object(a["createElementVNode"])("code",null,"container"),Object(a["createTextVNode"])("）")]),Object(a["createElementVNode"])("p",null,"即，我们根据"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("{\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'list'"),Object(a["createTextVNode"])("\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])("\n            },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 1'"),Object(a["createTextVNode"])("]\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])("\n            },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 2'"),Object(a["createTextVNode"])("]\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])("\n            },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Item 3'"),Object(a["createTextVNode"])("]\n        }\n    ]\n}\n")])]),Object(a["createElementVNode"])("p",null,"创建出来"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'list'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("Item 1"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("Item 2"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'item'"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("Item 3"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"简单的实现过程如下："),Object(a["createElementVNode"])("h2",null,"updateChildren"),Object(a["createElementVNode"])("p",null,"更新子元素，该方法比较复杂，实现的也比较精巧，先用流程图画一遍看看。"),Object(a["createElementVNode"])("p",null,"然后再看看代码实现"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateChildren"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"vnode, newVnode"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" children = vnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" newChildren = newVnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])("\n\n    \n}\n")])]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("p",null,"vdom 的 diff 计算非常复杂，但是会大大提升 DOM 更新的效率，而且 DOM 结构越复杂，更新效率就越高。"),Object(a["createElementVNode"])("p",null,"虽然我们只介绍了 snabbdom 的实现方式，React 中 vdom 的实现方式可能不同，但是："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"使用的 API 都是一样的"),Object(a["createElementVNode"])("li",null,"面试的时候，你能把 snabbdom 的实现方式说明白，这已经是很有竞争力了")]),Object(a["createElementVNode"])("h1",null,"vdom 总结"),Object(a["createElementVNode"])("p",null,"折腾这么半天，一定要明白为什么要费劲弄 vdom ？"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"数据驱动视图"),Object(a["createElementVNode"])("li",null,"vdom 作为数据和 DOM 中间的桥"),Object(a["createElementVNode"])("li",null,"vdom 采用 js 计算数据修改带来的视图差异，做最小范围的更新")])])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"5c18":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"JS 严格模式和非严格模式"),Object(a["createElementVNode"])("h2",null,"设计初衷"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("Javascript 设计之初，有很多不合理、不严谨、不安全之处，例如变量未定义即可使用 "),Object(a["createElementVNode"])("code",null,"n = 100"),Object(a["createTextVNode"])("。严格模式用于规避这些问题。")]),Object(a["createElementVNode"])("p",null,"而现在 ES 规范已经普及，从语法上已经规避了这些问题。"),Object(a["createElementVNode"])("h2",null,"开启严格模式"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("代码（或一个函数）一开始插入一行 "),Object(a["createElementVNode"])("code",null,"'use strict'"),Object(a["createTextVNode"])(" 即可开启严格模式")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},"'use strict'"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 全局开启"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'use strict'"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 某个函数开启"),Object(a["createTextVNode"])("\n\n}\n")])]),Object(a["createElementVNode"])("p",null,"一般情况下，开发环境用 ES 或者 Typescript ，打包出的 js 代码使用严格模式"),Object(a["createElementVNode"])("h2",null,"严格模式的不同"),Object(a["createElementVNode"])("p",null,"严格模式的细则有很多，这里总结一些常用常见的"),Object(a["createElementVNode"])("h3",null,"全局变量必须声明"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},"'use strict'"),Object(a["createTextVNode"])("\nn = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ReferenceError: n is not defined"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h3",null,[Object(a["createTextVNode"])("禁止使用 "),Object(a["createElementVNode"])("code",null,"with")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},"'use strict'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" obj = { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"x"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(" }\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"with"),Object(a["createTextVNode"])(" (obj) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Uncaught SyntaxError: Strict mode code may not include a with statement"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(x)\n}\n")])]),Object(a["createElementVNode"])("h3",null,"创建 eval 作用域"),Object(a["createElementVNode"])("p",null,"正常模式下，JS 只有两种变量作用域：全局作用域 + 函数作用域。严格模式下，JS 增加了 eval 作用域。"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"chrome 隐私模式下执行这段代码？？？")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},"'use strict'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" x = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"eval"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'var x = 20; console.log(x)'"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(x)\n")])]),Object(a["createElementVNode"])("h3",null,"禁止 this 指向全局作用域"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},"'use strict'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'this'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// undefined"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("()\n")])]),Object(a["createElementVNode"])("h3",null,"函数参数不能重名"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},"'use strict'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Uncaught SyntaxError: Duplicate parameter name not allowed in this context"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"x, x, y"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"全局变量必须声明"),Object(a["createElementVNode"])("li",null,"禁止使用 with"),Object(a["createElementVNode"])("li",null,"创建 eval 作用域"),Object(a["createElementVNode"])("li",null,"禁止 this 指向全局作用域"),Object(a["createElementVNode"])("li",null,"函数参数不能重名")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"5d2a":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"MVVM 渲染"),Object(a["createElementVNode"])("p",null,"上面讲到模板最终生成 render 函数，render 函数执行，最终返回的是 vdom（vdom 的细节后面会讲到）"),Object(a["createElementVNode"])("h2",null,"updateComponent"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateComponent"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") => {\n  vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_update"),Object(a["createTextVNode"])("(vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_render"),Object(a["createTextVNode"])("())\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("每次执行"),Object(a["createElementVNode"])("code",null,"vm._update"),Object(a["createTextVNode"])("的时候，都会重新执行 render 函数，并且将返回结果（即 vdom ）传递给"),Object(a["createElementVNode"])("code",null,"vm._update")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_update"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"vnode"),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" prevVnode = vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_vnode"),Object(a["createTextVNode"])("\n  vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_vnode"),Object(a["createTextVNode"])(" = vnode\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Vue.prototype.__patch__ is injected in entry points"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// based on the rendering backend used."),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!prevVnode) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// initial render"),Object(a["createTextVNode"])("\n    vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(" = vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"__patch__"),Object(a["createTextVNode"])("(vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(", vnode)\n  } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// updates"),Object(a["createTextVNode"])("\n    vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(" = vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"__patch__"),Object(a["createTextVNode"])("(prevVnode, vnode)\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"vm._update"),Object(a["createTextVNode"])("中，如果是页面初次渲染，直接全部渲染到"),Object(a["createElementVNode"])("code",null,"$el"),Object(a["createTextVNode"])("中，即我们选中的 DOM 节点。如果是 rerender ，那么会进行 diff 算法的对比，然后按需渲染。这些都是通过"),Object(a["createElementVNode"])("code",null,"__patch__"),Object(a["createTextVNode"])("方法实现的。")]),Object(a["createElementVNode"])("p",null,"（简单介绍一下 diff 算法）"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"__patch__"),Object(a["createTextVNode"])("是 vdom 计算的核心，后面会专门通过一个章节讲解其中的原理，这里先知道他怎么用。")]),Object(a["createElementVNode"])("h2",null,"Watcher"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("从哪里被触发呢？")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"vm._watcher = new Watcher(vm, updateComponent, noop)"),Object(a["createTextVNode"])(" 这里创建一个 Wacher 示例，把"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("传递近期，然后看下 Watcher 的实现")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_watcher"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Watcher"),Object(a["createTextVNode"])("(vm, updateComponent, noop)\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Dep"),Object(a["createTextVNode"])(", { pushTarget, popTarget } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./dep'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Watcher"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])(" ( vm, expOrFn, cb) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"getter"),Object(a["createTextVNode"])(" = expOrFn "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 传入的函数，赋值给 this.geter"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 执行 get() 方法"),Object(a["createTextVNode"])("\n  }\n  get () {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"pushTarget"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 将 this （即 Wathcer 示例）给全局的 Dep.target"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"vm"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" value = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"getter"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("(vm, vm)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"popTarget"),Object(a["createTextVNode"])("()  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 添加完依赖之后，踢出"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" value\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// dep.subs[i].notify() 会执行到这里"),Object(a["createTextVNode"])("\n  update () {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// queueWatcher 异步调用了 run() 方法，因为：如果一次性更新多个属性，无需每个都 update 一遍，异步就解决了这个问题"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"queueWatcher"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(")\n  }\n  run () {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("()  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 执行 get ，即执行 this.getter.call(vm, vm) ，即执行 expOrFn"),Object(a["createTextVNode"])("\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,"简单介绍一下源码，然后注意几点："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("初始化时（即页面第一次渲染），执行了"),Object(a["createElementVNode"])("code",null,"this.get()"),Object(a["createTextVNode"])("，其中做了两件事。 "),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"pushTarget(this)"),Object(a["createTextVNode"])("将依赖暴露出来，这个“依赖”是什么 —— "),Object(a["createElementVNode"])("code",null,"this"),Object(a["createTextVNode"])("；")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"value = this.getter.call(vm, vm)"),Object(a["createTextVNode"])("执行了"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("（执行时会触发 defineProperty 中的"),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])("，绑定依赖，结合以下代码看）；")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"popTarget()"),Object(a["createTextVNode"])("又把依赖去掉")])])]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("当 data 中的数据有变化时，肯定会触发 defineProperty 中的"),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])("，就会触发"),Object(a["createElementVNode"])("code",null,"dep.notify()"),Object(a["createTextVNode"])("。这里就会最终走到上面的"),Object(a["createElementVNode"])("code",null,"update"),Object(a["createTextVNode"])("方法中。"),Object(a["createElementVNode"])("code",null,"update"),Object(a["createTextVNode"])("是一个异步队列（vue 的渲染是异步执行的，React 也是），最终会执行"),Object(a["createElementVNode"])("code",null,"run"),Object(a["createTextVNode"])("方法，重新执行"),Object(a["createElementVNode"])("code",null,"this.get"),Object(a["createTextVNode"])("，即重新执行了"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("。这就完成了 rerender")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// “MVVM 响应式” 介绍过的代码"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"defineProperty"),Object(a["createTextVNode"])("(obj, key, {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"get"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"reactiveGetter"),Object(a["createTextVNode"])(" () {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Dep"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"target"),Object(a["createTextVNode"])(") {\n          dep."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"depend"),Object(a["createTextVNode"])("()\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" val\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"set"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"reactiveSetter"),Object(a["createTextVNode"])(" (newVal) {\n        val = newVal\n        dep."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"notify"),Object(a["createTextVNode"])("()\n    }\n})\n")])]),Object(a["createElementVNode"])("h2",null,"dep"),Object(a["createElementVNode"])("p",null,"至于 Dep 的代码无需深究，只需要知道以下"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"Dep.target"),Object(a["createTextVNode"])("，依赖对象（Watcher 示例）临时保存的地方")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"dep.depend()"),Object(a["createTextVNode"])("，添加依赖")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"dep.notify()"),Object(a["createTextVNode"])("，触发通知")])]),Object(a["createElementVNode"])("h2",null,"异步渲染"),Object(a["createElementVNode"])("p",null,"最后聊一下异步渲染。"),Object(a["createElementVNode"])("p",null,"如果你一次性执行了很多 data 数据的修改，那么 vue 会不会同时执行这么多次的 rerender ？—— 肯定不会！没有必要，而且浪费性能。通过 JS 异步的特性即可轻松实现这种逻辑。"),Object(a["createElementVNode"])("p",null,"举一个最简答的例子"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" queue = []\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    queue."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"item"),Object(a["createTextVNode"])("()})\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" i = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("; i < "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])("; i++){\n    queue."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(i)})\n}\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"5fdf":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"MVVM 响应式"),Object(a["createElementVNode"])("h2",null,"目录"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"什么是响应式"),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"Object.defineProperty")]),Object(a["createElementVNode"])("li",null,"模拟实现")]),Object(a["createElementVNode"])("h2",null,"什么是响应式"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createTextVNode"])("    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{price}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{name}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    \n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"https://cdn.bootcss.com/vue/2.5.9/vue.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"el"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"price"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(",\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])("\n            }\n        })\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 修改 vm.price ，页面内容会立刻修改"),Object(a["createTextVNode"])("\n        vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"price"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])("\n        vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'imooc'"),Object(a["createTextVNode"])("\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"针对响应式，我们需要关心的问题是："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("为何修改"),Object(a["createElementVNode"])("code",null,"vm.price"),Object(a["createTextVNode"])("之后， vue 就立刻监听到")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"price"),Object(a["createTextVNode"])("本来是"),Object(a["createElementVNode"])("code",null,"data"),Object(a["createTextVNode"])("的属性，为何会到"),Object(a["createElementVNode"])("code",null,"vm"),Object(a["createTextVNode"])("的属性中")])]),Object(a["createElementVNode"])("p",null,"其他的，例如监听修改之后如何去修改 html 内容，我们暂时不用关心，后面会讲到"),Object(a["createElementVNode"])("h2",null,[Object(a["createElementVNode"])("code",null,"Object.defineProperty")]),Object(a["createElementVNode"])("p",null,"对于一个简单的 JS 对象，每当获取属性、重新赋值属性的时候，都要能够监听到（至于为何有这种需求，先不要管）。以下方式是无法满足需求的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" obj = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"age"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"25"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(obj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 获取属性的时候，如何监听到？"),Object(a["createTextVNode"])("\nobj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"age"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"26"),Object(a["createTextVNode"])("           "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 赋值属性的时候，如何监听到？"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("借用"),Object(a["createElementVNode"])("code",null,"Object.defineProperty"),Object(a["createTextVNode"])("就可以实现这种需求")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" obj = {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" name = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"defineProperty"),Object(a["createTextVNode"])("(obj, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"name"'),Object(a["createTextVNode"])(", {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"get"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'get'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" name  \n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"set"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"newVal"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'set'"),Object(a["createTextVNode"])(")\n        name = newVal\n    }\n});\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(obj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 可以监听到"),Object(a["createTextVNode"])("\nobj."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'lisi'"),Object(a["createTextVNode"])("      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 可以监听到"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("针对 JS 对象可以使用"),Object(a["createElementVNode"])("code",null,"Object.defineProperty"),Object(a["createTextVNode"])("来做监控，但是针对数组元素的改变，却用不了，例如数组的push pop等。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("Vue 解决这个问题的办法也比较简单粗暴，直接将需要监听的数组的原型修改了。"),Object(a["createElementVNode"])("strong",null,"注意，并不是将Array.prototype中的方法改了，那样会造成全局污染，后果严重"),Object(a["createTextVNode"])("。看如下例子：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" arr1 = ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])("]\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" arr2 = ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"300"),Object(a["createTextVNode"])("]\narr1."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__proto__"),Object(a["createTextVNode"])(" = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"push"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"val"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'push'"),Object(a["createTextVNode"])(", val)\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"push"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("(arr1, val)\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"pop"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'pop'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"pop"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("(arr1)\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 其他原型方法暂时省略。。。。"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，并不是将Array.prototype中的方法改了，那样会造成全局污染，后果严重"),Object(a["createTextVNode"])("\n\narr1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"4"),Object(a["createTextVNode"])(")    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 可监听到"),Object(a["createTextVNode"])("\narr1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"pop"),Object(a["createTextVNode"])("()      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 可监听到"),Object(a["createTextVNode"])("\narr2."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"400"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 不受影响"),Object(a["createTextVNode"])("\narr2."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"pop"),Object(a["createTextVNode"])("()      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 不受影响"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"Vue 实现的时候会考虑更加全面，不会这么简单粗暴的赋值，但是基本原理都是这样的。如果读者不是特别抠细节的话，了解到这里就 OK 了。"),Object(a["createElementVNode"])("h2",null,"模拟实现"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("使用"),Object(a["createElementVNode"])("code",null,"Object.defineProperty"),Object(a["createTextVNode"])("来模拟一下 vue 的这种监听机制")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// var vm = new Vue({"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     el: '#app',"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     data: {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         price: 100,"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         name: 'zhangsan'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// })"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" mv = {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" data = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"price"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" key, value\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (key "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" data) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 命中闭包。新建一个函数，保证 key 的独立的作用域"),Object(a["createTextVNode"])("\n    ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"key"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"defineProperty"),Object(a["createTextVNode"])("(mv, key, {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"get"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'get'"),Object(a["createTextVNode"])(")\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" data[key]  \n            },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"set"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"newVal"),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'set'"),Object(a["createTextVNode"])(")\n                data[key] = newVal\n            }\n        })\n    })(key)\n}\n\n")])]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("关键是理解"),Object(a["createElementVNode"])("code",null,"Object.defineProperty")]),Object(a["createElementVNode"])("li",null,"将 data 的属性代理到 vm 上")])])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"63f3":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h2",null,"vue2 子组件去掉最外层的包裹标签"),Object(a["createElementVNode"])("p",null,"参考代码"),Object(a["createElementVNode"])("p",null,"模版"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"ref"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"csCompactCascader"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  {children && children.length > 0 && children.map((item, idx) => { return (\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"el-col"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"{item.field}"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"span"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"{this.span}"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"cs-form-item"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"label"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"{label}"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"prop"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"{item.field}"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n                      ...              \n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"cs-form-item"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"el-col"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  ) })}\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"js"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"mounted"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 去掉最外层的包裹"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"moveCascaderChildren"),Object(a["createTextVNode"])("()\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 初始化data数据"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadData"),Object(a["createTextVNode"])("()\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"created"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"moveCascaderChildren"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" target = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$refs"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"csCompactCascader"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"as"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Element"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"while"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"true"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" node = target."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!node) {\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"break"),Object(a["createTextVNode"])("\n    }\n    target."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"parentElement"),Object(a["createTextVNode"])("!."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"insertBefore"),Object(a["createTextVNode"])("(node, target)\n  }\n  target."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"remove"),Object(a["createTextVNode"])("()\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"loadData"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {}\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"67cc":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"MVVM 实现流程"),Object(a["createElementVNode"])("h2",null,"目录"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"针对一个 demo"),Object(a["createElementVNode"])("li",null,"第一步：解析模板成 render 函数"),Object(a["createElementVNode"])("li",null,"第二步：响应式开始监听"),Object(a["createElementVNode"])("li",null,"第三步：首次渲染，显示页面，且绑定依赖"),Object(a["createElementVNode"])("li",null,"第四步：data 属性变化")]),Object(a["createElementVNode"])("h2",null,"针对一个 demo"),Object(a["createElementVNode"])("p",null,"拿一个简单的例子"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-on:click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"add"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-for"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"item in list"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{item}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"./vue-2.5.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"el"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": []\n        },\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"add"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(")\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n            }\n        }\n    })\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"第一步：解析模板成 render 函数"),Object(a["createElementVNode"])("p",null,"拿到模板"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-on:click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"add"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-for"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"item in list"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{item}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"解析成 render 函数（vue 2.0 开始支持预编译，即在开发环境编译时，有工具已经将模板编译为 render 函数）"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 未格式化的 render 函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"with"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this")]),Object(a["createTextVNode"])("){"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",{"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(":{"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"id"'),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])("}},["),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",["),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'input'"),Object(a["createTextVNode"])(",{"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"directives"),Object(a["createTextVNode"])(":[{"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"model"'),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"rawName"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"v-model"'),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(":(title),"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"expression"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])("}],"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"domProps"),Object(a["createTextVNode"])(":{"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"value"'),Object(a["createTextVNode"])(":(title)},"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"on"),Object(a["createTextVNode"])(":{"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"input"'),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"$event"),Object(a["createTextVNode"])("){"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])("($event."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"target"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"composing"),Object(a["createTextVNode"])(")"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(";title=$event."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"target"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])("}}}),"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'" "'),Object(a["createTextVNode"])("),"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'button'"),Object(a["createTextVNode"])(",{"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"on"),Object(a["createTextVNode"])(":{"),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"click"'),Object(a["createTextVNode"])(":add}},["),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"submit"'),Object(a["createTextVNode"])(")])]),"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'" "'),Object(a["createTextVNode"])("),"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ul'"),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_l"),Object(a["createTextVNode"])("((list),"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])("){"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_c"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'li'"),Object(a["createTextVNode"])(",["),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_v"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_s"),Object(a["createTextVNode"])("(item))])}))])}\n")])]),Object(a["createElementVNode"])("p",null,"对于 render 函数需要注意的是："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"with"),Object(a["createTextVNode"])("的用法")]),Object(a["createElementVNode"])("li",null,"模板中的所有信息都被 render 函数包含"),Object(a["createElementVNode"])("li",null,"模板中用到的 data 中的属性，都变成了 JS 变量"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("模板中的"),Object(a["createElementVNode"])("code",null,"v-model"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"v-for"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"v-on"),Object(a["createTextVNode"])("都变成了 JS 逻辑")]),Object(a["createElementVNode"])("li",null,"render 函数最终返回的是 vnode")]),Object(a["createElementVNode"])("h2",null,"第二步：响应式开始监听"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("使用"),Object(a["createElementVNode"])("code",null,"Object.defineProperty"),Object(a["createTextVNode"])("监听"),Object(a["createElementVNode"])("code",null,"data"),Object(a["createTextVNode"])("中参数，并且代理到"),Object(a["createElementVNode"])("code",null,"vm"),Object(a["createTextVNode"])("上")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" mv = {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" data = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"price"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'zhangsan'"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" key, value\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (key "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" data) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 命中闭包。新建一个函数，保证 key 的独立的作用域"),Object(a["createTextVNode"])("\n    ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"key"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"defineProperty"),Object(a["createTextVNode"])("(mv, key, {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"get"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'get'"),Object(a["createTextVNode"])(")\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" data[key]  \n            },\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"set"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"newVal"),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'set'"),Object(a["createTextVNode"])(")\n                data[key] = newVal\n            }\n        })\n    })(key)\n}\n")])]),Object(a["createElementVNode"])("h2",null,"第三步：首次渲染，显示页面，且绑定依赖"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("再首次渲染之前就定义了"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("函数")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_update"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"vnode"),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" prevVnode = vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_vnode"),Object(a["createTextVNode"])("\n  vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"_vnode"),Object(a["createTextVNode"])(" = vnode\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Vue.prototype.__patch__ is injected in entry points"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// based on the rendering backend used."),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!prevVnode) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// initial render"),Object(a["createTextVNode"])("\n    vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(" = vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"__patch__"),Object(a["createTextVNode"])("(vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(", vnode)\n  } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// updates"),Object(a["createTextVNode"])("\n    vm."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$el"),Object(a["createTextVNode"])(" = vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"__patch__"),Object(a["createTextVNode"])("(prevVnode, vnode)\n  }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateComponent"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// vm._render 即 上面的 render 函数，返回 vnode"),Object(a["createTextVNode"])("\n  vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_update"),Object(a["createTextVNode"])("(vm."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_render"),Object(a["createTextVNode"])("())\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("页面首次加载，即首次渲染时，会执行"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("，即执行了"),Object(a["createElementVNode"])("code",null,"vm._render()"),Object(a["createTextVNode"])("。执行 render 函数时，会访问到"),Object(a["createElementVNode"])("code",null,"vm.list"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"vm.title"),Object(a["createTextVNode"])("等 data 中的属性值。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("而这些属性，都是做过响应式监听的，访问他们的值会立刻出发到"),Object(a["createElementVNode"])("code",null,"get")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"defineProperty"),Object(a["createTextVNode"])("(mv, key, {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"get"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'get'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" data[key]  \n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"set"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"newVal"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'set'"),Object(a["createTextVNode"])(")\n        data[key] = newVal\n    }\n})\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,[Object(a["createTextVNode"])("为何要监听"),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])("呢？")]),Object(a["createTextVNode"])(" —— 即，data 中有很多属性，有些是有用的（会体现为 render 函数中的变量），有些可能没啥用。监听"),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])("是为了保证只有有用的属性才才去监听它的"),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])("，如果这个属性没用过，那么它的"),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])("我们也就不管了。")]),Object(a["createElementVNode"])("p",null,"（图示：之前 ppt 的一个图）"),Object(a["createElementVNode"])("h2",null,"第四步：data 属性变化"),Object(a["createElementVNode"])("p",null,"修改 data 的属性值"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"el"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": []\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"add"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 修改属性值"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("             "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 修改属性值"),Object(a["createTextVNode"])("\n        }\n    }\n})\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("修改属性值，会立刻被响应式的"),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])("监听到，会再次出发"),Object(a["createElementVNode"])("code",null,"updateComponent"),Object(a["createTextVNode"])("函数，即执行"),Object(a["createElementVNode"])("code",null,"vm.__patch__(prevVnode, vnode)"),Object(a["createTextVNode"])("，借用 vdom 完成更新。")]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"第一步：解析模板成 render 函数"),Object(a["createElementVNode"])("li",null,"第二步：响应式开始监听"),Object(a["createElementVNode"])("li",null,"第三步：首次渲染，显示页面，且绑定依赖"),Object(a["createElementVNode"])("li",null,"第四步：data 属性变化")])])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"696e":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"手写 instanceof"),Object(a["createElementVNode"])("h2",null,"问题"),Object(a["createElementVNode"])("p",null,"instanceof 的原理是什么，请用代码来表示"),Object(a["createElementVNode"])("h2",null,"原型链"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%89%8B%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/img/%E5%8E%9F%E5%9E%8B%E9%93%BE.png",alt:""})]),Object(a["createElementVNode"])("h2",null,"instanceof 原理"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("例如 "),Object(a["createElementVNode"])("code",null,"a instanceof b"),Object(a["createTextVNode"])(" 就是：顺着 "),Object(a["createElementVNode"])("code",null,"a"),Object(a["createTextVNode"])(" 的 "),Object(a["createElementVNode"])("code",null,"__proto__"),Object(a["createTextVNode"])(" 链向上找，能否找到 "),Object(a["createElementVNode"])("code",null,"b.prototype")]),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 自定义 instanceof\n * @param instance instance\n * @param origin class or function\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"myInstanceof"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("instance: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", origin: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"boolean"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (instance == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"false"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// null undefined"),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" instance\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(" !== "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'object'"),Object(a["createTextVNode"])(" && "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(" !== "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'function'"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 值类型"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"false"),Object(a["createTextVNode"])("\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" tempInstance = instance "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 为了防止修改 instance"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"while"),Object(a["createTextVNode"])(" (tempInstance) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (tempInstance."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__proto__"),Object(a["createTextVNode"])(" === origin."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"true"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 配上了"),Object(a["createTextVNode"])("\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 未匹配"),Object(a["createTextVNode"])("\n        tempInstance = tempInstance."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__proto__"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 顺着原型链，往上找"),Object(a["createTextVNode"])("\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"false"),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // 功能测试"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( myInstanceof({}, Object) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( myInstanceof([], Object) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( myInstanceof([], Array) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( myInstanceof({}, Array) )"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info( myInstanceof('abc', String) )"),Object(a["createTextVNode"])("\n\n")])]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"原型链"),Object(a["createElementVNode"])("li",null,"循环判断")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"69e2":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"遍历 DOM 树"),Object(a["createElementVNode"])("h2",null,"题目"),Object(a["createElementVNode"])("p",null,"写一个函数遍历 DOM 树，分别用深度优先和广度优先"),Object(a["createElementVNode"])("p",null,"PS：注意回顾 “Node 和 Element 和区别”"),Object(a["createElementVNode"])("h2",null,"深度优先 vs 广度优先"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%89%8B%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/img/dom-tree.png",alt:""})]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("深度优先的结果 "),Object(a["createElementVNode"])("code",null,'<div> <p> "hello" <b> "world" <img> 注释 <ul> <li> "a" <li> "b"')]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("广度优先的结果 "),Object(a["createElementVNode"])("code",null,'<div> <p> <img> 注释 <ul> "hello" <b> <li> <li> "world" "a" "b"')]),Object(a["createElementVNode"])("h2",null,"深度优先"),Object(a["createElementVNode"])("p",null,"一般通过递归实现"),Object(a["createElementVNode"])("h2",null,"广度优先"),Object(a["createElementVNode"])("p",null,"一般通过队列实现"),Object(a["createElementVNode"])("h2",null,"解答"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"深度优先，递归"),Object(a["createElementVNode"])("li",null,"广度优先，队列")]),Object(a["createElementVNode"])("h2",null,"连环问：深度优先可以不用递归吗？"),Object(a["createElementVNode"])("p",null,"深度优先遍历，可以使用栈代替递归，递归本质上就是栈。"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 访问节点\n * @param n node\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"visitNode"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"n: Node"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Comment"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注释"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"info"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Comment node ---'"),Object(a["createTextVNode"])(", n."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"textContent"),Object(a["createTextVNode"])(")\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Text"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 文本"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" t = n."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"textContent"),Object(a["createTextVNode"])("?."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"trim"),Object(a["createTextVNode"])("()\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (t) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"info"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Text node ---'"),Object(a["createTextVNode"])(", t)\n        }\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"HTMLElement"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// element"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"info"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Element node ---'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},[Object(a["createTextVNode"])("`<"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},"${n.tagName.toLowerCase()}"),Object(a["createTextVNode"])(">`")]),Object(a["createTextVNode"])(")\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 深度优先遍历\n * @param root dom node\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"depthFirstTraverse1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"root: Node"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"visitNode"),Object(a["createTextVNode"])("(root)\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" childNodes = root."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"childNodes"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// .childNodes 和 .children 不一样"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (childNodes."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(") {\n        childNodes."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"child"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"depthFirstTraverse1"),Object(a["createTextVNode"])("(child) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 递归"),Object(a["createTextVNode"])("\n        })\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 深度优先遍历\n * @param root dom node\n */"),Object(a["createTextVNode"])("\n "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"depthFirstTraverse2"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"root: Node"),Object(a["createTextVNode"])(") {\n     "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"stack"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Node"),Object(a["createTextVNode"])("[] = []\n\n     "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 根节点压栈"),Object(a["createTextVNode"])("\n     stack."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(root)\n\n     "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"while"),Object(a["createTextVNode"])(" (stack."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" > "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n         "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" curNode = stack."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"pop"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 出栈"),Object(a["createTextVNode"])("\n         "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (curNode == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"break"),Object(a["createTextVNode"])("\n\n         "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"visitNode"),Object(a["createTextVNode"])("(curNode)\n\n         "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 子节点压栈"),Object(a["createTextVNode"])("\n         "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" childNodes = curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"childNodes"),Object(a["createTextVNode"])("\n         "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (childNodes."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" > "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n             "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// reverse 反顺序压栈"),Object(a["createTextVNode"])("\n             "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"from"),Object(a["createTextVNode"])("(childNodes)."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"reverse"),Object(a["createTextVNode"])("()."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"child"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" stack."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(child))\n         }\n     }\n }\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 广度优先遍历\n * @param root dom node\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"breadthFirstTraverse"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"root: Node"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"queue"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Node"),Object(a["createTextVNode"])("[] = [] "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 数组 vs 链表"),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 根节点入队列"),Object(a["createTextVNode"])("\n    queue."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"unshift"),Object(a["createTextVNode"])("(root)\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"while"),Object(a["createTextVNode"])(" (queue."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" > "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" curNode = queue."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"pop"),Object(a["createTextVNode"])("()\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (curNode == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"break"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"visitNode"),Object(a["createTextVNode"])("(curNode)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 子节点入队"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" childNodes = curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"childNodes"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (childNodes."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(") {\n            childNodes."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"child"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" queue."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"unshift"),Object(a["createTextVNode"])("(child))\n        }\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" box = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'box'"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (box == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"throw"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Error"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'box is null'"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"depthFirstTraverse2"),Object(a["createTextVNode"])("(box)\n\n")])]),Object(a["createElementVNode"])("p",null,"递归和非递归哪个更好？"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("递归逻辑更加清晰，但容易出现 "),Object(a["createElementVNode"])("code",null,"stack overflow"),Object(a["createTextVNode"])(" 错误（可使用"),Object(a["createElementVNode"])("code",null,"尾递归"),Object(a["createTextVNode"])("，编译器有优化）")]),Object(a["createElementVNode"])("li",null,"非递归效率更高，但使用栈，逻辑稍微复杂一些")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"6b6f":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"HTMLCollection 和 NodeList 的区别"),Object(a["createElementVNode"])("h2",null,"题目"),Object(a["createElementVNode"])("p",null,"HTMLCollection 和 NodeList 的区别，Node 和 Element 的区别"),Object(a["createElementVNode"])("h2",null,"Node 和 Element"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("DOM 结构是一棵树，树的所有节点都是 "),Object(a["createElementVNode"])("code",null,"Node"),Object(a["createTextVNode"])(" ，包括：document，元素，文本，注释，fragment 等")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"Element"),Object(a["createTextVNode"])(" 继承于 Node 。它是所有 html 元素的基类，如 "),Object(a["createElementVNode"])("code",null,"HTMLParagraphElement"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"HTMLDivElement")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Node"),Object(a["createTextVNode"])(" {}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// document"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Document"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Node"),Object(a["createTextVNode"])(" {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"DocumentFragment"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Node"),Object(a["createTextVNode"])(" {}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 文本和注释"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"CharacterData"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Node"),Object(a["createTextVNode"])(" {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Comment"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"CharacterData"),Object(a["createTextVNode"])(" {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Text"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"CharacterData"),Object(a["createTextVNode"])(" {}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// elem"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Element"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Node"),Object(a["createTextVNode"])(" {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"HTMLElement"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Element"),Object(a["createTextVNode"])(" {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"HTMLParagraphElement"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"HTMLElement"),Object(a["createTextVNode"])(" {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"HTMLDivElement"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"HTMLElement"),Object(a["createTextVNode"])(" {}\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ... 其他 elem ..."),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"HTMLCollection 和 NodeList"),Object(a["createElementVNode"])("p",null,"HTMLCollection 是 Element 集合，它由获取 Element 的 API 返回"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"elem.children")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"document.getElementsByTagName('p')")])]),Object(a["createElementVNode"])("p",null,"NodeList 是 Node 集合，它由获取 Node 的 API 返回"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"document.querySelectorAll('p')")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"elem.childNodes")])]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"HTMLCollection 是 Element 集合，NodeList 是 Node 集合"),Object(a["createElementVNode"])("li",null,"Node 是所有 DOM 节点的基类，Element 是 html 元素的基类")]),Object(a["createElementVNode"])("h2",null,"划重点"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("注意 Node 和 Element 在实际 API 中的区别，如 "),Object(a["createElementVNode"])("code",null,"children"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"childNodes"),Object(a["createTextVNode"])(" 获取的结果可能是不一样的（如果子节点有 Text 或 Comment）")]),Object(a["createElementVNode"])("h2",null,"扩展：类数组"),Object(a["createElementVNode"])("p",null,"HTMLCollection 和 NodeList 都不是数组，而是“类数组”。转换为数组："),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// HTMLCollection 和 NodeList 都不是数组，而是“类数组”"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" arr1 = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"from"),Object(a["createTextVNode"])("(list)\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" arr2 = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"slice"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("(list)\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" arr3 = [...list]\n")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"6df7":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"手写 EventBus"),Object(a["createElementVNode"])("p",null,"Bus 不是“车”，而是“总线”"),Object(a["createElementVNode"])("h2",null,"问题"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("请手写 EventBus 自定义事件，实现 "),Object(a["createElementVNode"])("code",null,"no"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"once"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"emit"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"off")]),Object(a["createElementVNode"])("h2",null,"EventBus 功能"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" event = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"EventBus"),Object(a["createTextVNode"])("()\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b"),Object(a["createTextVNode"])(") { "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'fn1'"),Object(a["createTextVNode"])(", a, b) }\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn2"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b"),Object(a["createTextVNode"])(") { "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'fn2'"),Object(a["createTextVNode"])(", a, b) }\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn3"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b"),Object(a["createTextVNode"])(") { "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'fn3'"),Object(a["createTextVNode"])(", a, b) }\n\nevent."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"on"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'key1'"),Object(a["createTextVNode"])(", fn1)\nevent."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"on"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'key1'"),Object(a["createTextVNode"])(", fn2)\nevent."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"once"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'key1'"),Object(a["createTextVNode"])(", fn3)\nevent."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"on"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxxxxx'"),Object(a["createTextVNode"])(", fn3)\n\nevent."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"emit"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'key1'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 触发 fn1 fn2 fn3"),Object(a["createTextVNode"])("\n\nevent."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"off"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'key1'"),Object(a["createTextVNode"])(", fn1)\n\nevent."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"emit"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'key1'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 触发 fn2"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"实现"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"class"),Object(a["createTextVNode"])(" 结构")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("注意区分 "),Object(a["createElementVNode"])("code",null,"on"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"off")])]),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"EventBus"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n     * {\n     *    'key1': [\n     *        { fn: fn1, isOnce: false },\n     *        { fn: fn2, isOnce: false },\n     *        { fn: fn3, isOnce: true },\n     *    ]\n     *    'key2': [] // 有序\n     *    'key3': []\n     * }\n     */"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"events"),Object(a["createTextVNode"])(": {\n        ["),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])("]: "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("<{"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"fn"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Function"),Object(a["createTextVNode"])("; "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"isOnce"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"boolean"),Object(a["createTextVNode"])("}>\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"events"),Object(a["createTextVNode"])(" = {}\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"on"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(", fn: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"Function"),Object(a["createTextVNode"])(", isOnce: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"boolean"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"false")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" events = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"events"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (events["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("] == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") {\n            events["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("] = [] "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 初始化 key 的 fn 数组"),Object(a["createTextVNode"])("\n        }\n        events["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("({ fn, isOnce })\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"once"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(", fn: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"Function")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"on"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(", fn, "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"true"),Object(a["createTextVNode"])(")\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"off"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(", fn?: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"Function")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!fn) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 解绑所有 type 的函数"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"events"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("] = []\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 解绑单个 fn"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" fnList = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"events"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("]\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (fnList) {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"events"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("] = fnList."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"filter"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" item."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])(" !== fn)\n            }\n        }\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"emit"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(", ...args: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" fnList = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"events"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("]\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (fnList == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"events"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])("] = fnList."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"filter"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" { fn, isOnce } = item\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("(...args)\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// once 执行一次就要被过滤掉"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!isOnce) "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"true"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"false"),Object(a["createTextVNode"])("\n        })\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const e = new EventBus()"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// function fn1(a: any, b: any) { console.log('fn1', a, b) }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// function fn2(a: any, b: any) { console.log('fn2', a, b) }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// function fn3(a: any, b: any) { console.log('fn3', a, b) }"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// e.on('key1', fn1)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// e.on('key1', fn2)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// e.once('key1', fn3)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// e.on('xxxxxx', fn3)"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// e.emit('key1', 10, 20) // 触发 fn1 fn2 fn3"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// e.off('key1', fn1)"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// e.emit('key1', 100, 200) // 触发 fn2"),Object(a["createTextVNode"])("\n\n")])]),Object(a["createElementVNode"])("h2",null,"连环问：EventBus 里的数组可以换成 Set 吗？"),Object(a["createElementVNode"])("p",null,"数组和 Set 比较 （除了语法 API）"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"数组，有序结构，查找、中间插入、中间删除比较慢"),Object(a["createElementVNode"])("li",null,"Set 不可排序的，插入和删除都很快")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("Set 初始化或者 "),Object(a["createElementVNode"])("code",null,"add"),Object(a["createTextVNode"])(" 时是一个有序结构，但它无法再次排序，没有 "),Object(a["createElementVNode"])("code",null,"index"),Object(a["createTextVNode"])(" 也没有 "),Object(a["createElementVNode"])("code",null,"sort"),Object(a["createTextVNode"])(" 等 API")]),Object(a["createElementVNode"])("p",null,"验证"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("生成一个大数组，验证 "),Object(a["createElementVNode"])("code",null,"push"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"unshift"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"includes"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"splice")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("生成一个大 Set ，验证 "),Object(a["createElementVNode"])("code",null,"add"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"delete"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"has")])]),Object(a["createElementVNode"])("p",null,"答案：不可以，Set 是不可排序的，如再增加一些“权重”之类的需求，将不好实现。"),Object(a["createElementVNode"])("h2",null,"Map 和 Object"),Object(a["createElementVNode"])("p",null,"Object 是无序的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" data1 = {"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'1'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'aaa'"),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'2'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'bbb'"),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'3'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ccc'"),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'测试'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'000'"),Object(a["createTextVNode"])("}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"keys"),Object(a["createTextVNode"])("(data1) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},'// ["1", "2", "3", "测试"]'),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" data2 = {"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'测试'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'000'"),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'1'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'aaa'"),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'3'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ccc'"),Object(a["createTextVNode"])(","),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'2'"),Object(a["createTextVNode"])(":"),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'bbb'"),Object(a["createTextVNode"])("};\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"keys"),Object(a["createTextVNode"])("(data2); "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},'// ["1", "2", "3", "测试"]'),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"Map 是有序的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" m1 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])("([\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'1'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'aaa'"),Object(a["createTextVNode"])("],\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'2'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'bbb'"),Object(a["createTextVNode"])("],\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'3'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ccc'"),Object(a["createTextVNode"])("],\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'测试'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'000'"),Object(a["createTextVNode"])("]\n])\nm1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"val, key"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" { "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(key, val) })\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" m2 = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])("([\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'测试'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'000'"),Object(a["createTextVNode"])("],\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'1'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'aaa'"),Object(a["createTextVNode"])("],\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'3'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ccc'"),Object(a["createTextVNode"])("],\n    ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'2'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'bbb'"),Object(a["createTextVNode"])("]\n])\nm2."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"val, key"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" { "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(key, val) })\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("另外，"),Object(a["createElementVNode"])("strong",null,[Object(a["createTextVNode"])("Map 虽然是有序的，但它的 "),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"delete"),Object(a["createTextVNode"])(" 速度非常快")]),Object(a["createTextVNode"])("，和 Object 效率一样。它是被优化过的有序结构。")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"6ec9":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"diff 算法"),Object(a["createElementVNode"])("h2",null,"目录"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"什么是 diff 算法"),Object(a["createElementVNode"])("li",null,"讲过程不讲细节（去繁就简）"),Object(a["createElementVNode"])("li",null,"vdom 为何要用 diff 算法"),Object(a["createElementVNode"])("li",null,"diff 算法的实现逻辑"),Object(a["createElementVNode"])("li",null,"总结")]),Object(a["createElementVNode"])("h2",null,"什么是 diff 算法"),Object(a["createElementVNode"])("p",null,"你如果不是一名程序猿老兵，听说 diff 算法可能是在一些介绍 React 或者 vdom 的文章中。其实 diff 算法并不是 React 或者 vdom 发明的，它不是啥新鲜玩意儿。"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"计算机发展到现在，前端目前用的所谓新技术，只有微创新（即将以前原本有的再拿来改造一下），几乎没有从零创新")]),Object(a["createElementVNode"])("p",null,"图（linux diff 工具），图（git diff），图（diff 在线工具）"),Object(a["createElementVNode"])("p",null,"上图演示的 diff 仅仅是对文本进行 diff ，跟我们的 vdom 没啥太多关系，但是原理是一样的。"),Object(a["createElementVNode"])("p",null,"实际演示一下上图中说的操作"),Object(a["createElementVNode"])("h2",null,"将过程不讲细节（去繁就简）"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"有些代码写出来根本就不是为了给人阅读学习的，例如 v8 、sizzal 、包括 vue React 的部分源码")]),Object(a["createElementVNode"])("p",null,"vdom 的 diff 算法非常复杂，有良好基础的人，想要了解其中的详细过程也不是一件容易的事儿。我试着用 ppt、流程图、源码 去讲解 snabbdom 的 diff 的详细实现过程，尽管我 ppt 重写了两遍，发现没那么容易讲解透彻，牵扯的东西实在太多。"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("因此，我现在重写了第三遍 ppt ，干脆把细节放下，把核心的过程讲解明白。让学生明白 diff 是什么、diff 的目的、diff 的基本实现逻辑（不要管细节），即所谓的 "),Object(a["createElementVNode"])("strong",null,"“3W”"),Object(a["createTextVNode"])(" 。这样也比较符合 "),Object(a["createElementVNode"])("strong",null,"28原则"),Object(a["createTextVNode"])(" 。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("总之我对自己的要求就是："),Object(a["createElementVNode"])("strong",null,"所有视频中的内容，我都要给大家讲解清楚"),Object(a["createTextVNode"])("。如果某些部分不容易讲解清楚，那我们就抽象、总结、去繁就简也要讲解明白。")]),Object(a["createElementVNode"])("p",null,"对于最终的目的 —— 高级面试 ，当面试官问到这个问题的时候，你能把我讲解的部分说清楚，至少能打 80 分。面试官也是咱们普通人，我就不相信所有的面试官都那么清楚 diff 的细节。"),Object(a["createElementVNode"])("p",null,"最后，不要觉得我这里去繁就简就变得没有挑战性了 —— 依然会非常烧脑。"),Object(a["createElementVNode"])("h2",null,"vdom 为何要用 diff 算法"),Object(a["createElementVNode"])("p",null,"前面讲过为何要使用 vdom 。再总结一下："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"DOM 操作是“昂贵”的，因此尽量减少 DOM 操作"),Object(a["createElementVNode"])("li",null,"找出本次 DOM 必须更新的节点，更新"),Object(a["createElementVNode"])("li",null,"找出的过程，就需要 diff 算法")]),Object(a["createElementVNode"])("p",null,"举例说明：（表格 DOM 结构 vs 改变 data 之后的表格 DOM 结构，圈出改变的节点）"),Object(a["createElementVNode"])("h2",null,"diff 算法的实现逻辑"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("逻辑实现还要从核心函数"),Object(a["createElementVNode"])("code",null,"patch"),Object(a["createTextVNode"])("说起")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"patch"),Object(a["createTextVNode"])("(container, vnode)\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"patch"),Object(a["createTextVNode"])("(vnode, newVnode)\n")])]),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("code",null,"patch(container, vnode)")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("首先看"),Object(a["createElementVNode"])("code",null,"patch(container, vnode)"),Object(a["createTextVNode"])("，第一次渲染，container 是一个空的容器。将 vnode 变成 DOM 节点，然后填充进 container 中。")]),Object(a["createElementVNode"])("p",null,"图示（左侧 vnode 右侧 DOM）"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("定义 createElement 方法来实现。"),Object(a["createElementVNode"])("strong",null,"注意：createElement 后面后继续用到")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" tag = vnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tag"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" attrs = vnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"attrs"),Object(a["createTextVNode"])(" || {}\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" children = vnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])(" || []\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!tag) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])("\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 创建元素"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" elem = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(tag)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 属性"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" attrName\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (attrName "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" attrs) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (attrs."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"hasOwnProperty"),Object(a["createTextVNode"])("(attrName)) {\n            elem."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setAttribute"),Object(a["createTextVNode"])("(attrName, attrs[attrName])\n        }\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 子元素"),Object(a["createTextVNode"])("\n    children."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"childVnode"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 递归调用 createElementByVnode 创建子元素"),Object(a["createTextVNode"])("\n        elem."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"appendChild"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElementByVnode"),Object(a["createTextVNode"])("(childVnode))\n    })\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" elem\n")])]),Object(a["createElementVNode"])("p",null,"代码演示，code 中有代码。"),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("code",null,"patch(vnode, newVnode)")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("之前已经通过"),Object(a["createElementVNode"])("code",null,"patch(container, vnode)"),Object(a["createTextVNode"])("进行了初次渲染，之后"),Object(a["createElementVNode"])("code",null,"vnode"),Object(a["createTextVNode"])("就和它创建出来的 DOM 节点 "),Object(a["createElementVNode"])("strong",null,"关联起来了"),Object(a["createTextVNode"])("。")]),Object(a["createElementVNode"])("p",null,"图示（左侧 vnode 右侧 DOM）"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("再执行"),Object(a["createElementVNode"])("code",null,"patch(vnode, newVnode)"),Object(a["createTextVNode"])("，其实就是找出"),Object(a["createElementVNode"])("code",null,"newVnode"),Object(a["createTextVNode"])("相对于"),Object(a["createElementVNode"])("code",null,"vnode"),Object(a["createTextVNode"])("的区别，然后将这些区别，更新到现有的 DOM 节点中。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"注意：diff 只做同级别的对比，不做跨级别的对比")]),Object(a["createElementVNode"])("p",null,"图示（左侧 vnode 右侧 newVnode，自己画几个模拟的节点）"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("先从跟节点对比开始，根节点肯定是一样的，因此要继续对比根节点的所有子节点。这个方法定义为"),Object(a["createElementVNode"])("code",null,"updateChildren"),Object(a["createTextVNode"])("，简单写一个算法的描述，对比着上图解释")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"vnode"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ...."),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"replaceNode"),Object(a["createTextVNode"])(" (vnode, newVnode) {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" elem = vnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"elem"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" newElem = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(newVnode)\n    elem."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"parentNode"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"replaceChild"),Object(a["createTextVNode"])("(elem, newElem)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateChildren"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"vnode, newVnode"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" children = vnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])(" || []\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" newChildren = newVnode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"children"),Object(a["createTextVNode"])(" || []\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 判断是否是 <li>item 1</li> 这种形式"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" length = children."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" child = children["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" newChild = newChildren["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (length === "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(" && !child."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tag"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// vnode 命中了 <li>item 1</li> 这种形式"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (child !== newChild) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"replaceNode"),Object(a["createTextVNode"])("(child, newChild)\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 遍历现有的 children"),Object(a["createTextVNode"])("\n    children."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"child, index"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" newChild = newChildren[index]\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (newChild == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (child."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tag"),Object(a["createTextVNode"])(" === newChild."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tag"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 两者 tag 一样"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"updateChildren"),Object(a["createTextVNode"])("(child, newChild)\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 两者 tag 不一样"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"replaceNode"),Object(a["createTextVNode"])("(child, newChild)\n        }\n    })\n}\n")])]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"知道什么是 diff 算法"),Object(a["createElementVNode"])("li",null,"vdom 用 diff 算法到底做了什么"),Object(a["createElementVNode"])("li",null,"vdom 的基本流程 createElement updateChildren")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"7cb0":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"hybrid 是什么，为什么会用到 hybrid"),Object(a["createElementVNode"])("h2",null,"文字解释"),Object(a["createElementVNode"])("p",null,"hybrid 即混合开发，是一种客户端、h5结合来开发才能做出的效果，这里其中甚至还涉及到 server 端的知识。"),Object(a["createElementVNode"])("p",null,"截图（左侧头条列表，右侧头条新闻详情页）"),Object(a["createElementVNode"])("p",null,"头条的新闻详情页，很有可能就是用的 hybrid 实现的（我不在头条工作我不知道，但是我知道一个类似头条的 app ，新闻详情页就是用 hybrid 实现的）"),Object(a["createElementVNode"])("h2",null,"存在价值"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"可以快速迭代更新【关键】（而 app 发版需要经过漫长的审核等待时间）—— 思考：为何 app 需要审核，而 hybrid 无需审核？？？"),Object(a["createElementVNode"])("li",null,"体验流畅（和 NA 的体验基本类似）"),Object(a["createElementVNode"])("li",null,"减少开发和沟通成本，公用一套代码")]),Object(a["createElementVNode"])("h2",null,"webview"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"是 app 中的一个组件（ app 中可以有 webview ，也可以没有）"),Object(a["createElementVNode"])("li",null,"用于加载 h5 页面，即一个小型的浏览器内核")]),Object(a["createElementVNode"])("p",null,"截图举例："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"例1：UC 浏览器（首页、访问网址）"),Object(a["createElementVNode"])("li",null,"例2：微信（朋友圈页，内容页）")]),Object(a["createElementVNode"])("h2",null,"file 协议"),Object(a["createElementVNode"])("p",null,"最常见的浏览器访问 h5 页面都是使用 http(s) 协议，包括加载静态文件"),Object(a["createElementVNode"])("p",null,"（截图演示）"),Object(a["createElementVNode"])("p",null,"如果在本地双击一个 html 文件，通过浏览器打开，就是使用 file 协议加载，包括静态文件"),Object(a["createElementVNode"])("p",null,"（截图演示）"),Object(a["createElementVNode"])("p",null,"两者的区别："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"file 协议：本地文件，快"),Object(a["createElementVNode"])("li",null,"http(s) 协议：网络加载，慢")]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"我们最常用的肯定是 http 或者 https 协议，通过访问 server 端返回网页文件的形式来打开页面。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("但你是否还记得你最开始学习 html 的时候，那会儿还不知道什么是 http 协议，因此你就写完一个 html 页面，直接双击，然后浏览器打开。这会儿看浏览器地址栏，是"),Object(a["createElementVNode"])("code",null,"file:///xxx/xxx/xxx/index.html"),Object(a["createTextVNode"])("这么一种格式。这就是"),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("协议。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("其中的 js css img 文件都可以通过"),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("协议来加载。。。。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("计算机编程的协议有非常多，我们日常接触的有"),Object(a["createElementVNode"])("code",null,"http(s)"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"ftp"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"ws"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"ssh"),Object(a["createTextVNode"])("等。"),Object(a["createElementVNode"])("code",null,"http(s)"),Object(a["createTextVNode"])("是打开一个远程的页面，而"),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("是打开一个本地的页面。那两者的区别是啥：")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"http(s)"),Object(a["createTextVNode"])("协议需要通过网络请求，下载页面，然后打开")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("协议直接打开本地的，断网情况下也能打开，无需网络请求")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从速度上来看，当然是"),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("协议更快")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("一开始提到 hybrid 具有和 NA 一样的体验，其中一点就是和 NA 一样快。如何做到的？—— 就是用了"),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("协议。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,[Object(a["createTextVNode"])("hybrid 就是使用"),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("协议访问本地的 html 页面")]),Object(a["createTextVNode"])("，因此它足够快。所谓“本地”是哪里？—— 每个 app 安装的时候都可以存储一些文件，这些 html 也就放在某一个文件目录下。就像你微信的聊天记录（文字、视频、图片等）都是会存储到系统的某一个地方，app 具有这种存储文件的能力。手机内存如果比较小，如 16g 的 iphone ，你还得定期清理这些垃圾文件。")]),Object(a["createElementVNode"])("h2",null,"具体实现"),Object(a["createElementVNode"])("p",null,"首先，一个 app 不可能所有的地方都使用 hybrid ，这里可以先做一个总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"使用 NA ：体验要求极致，变化不频繁（无头条的首页）"),Object(a["createElementVNode"])("li",null,"使用 hybrid ：体验要求高，变化频繁（如头条的新闻详情页）"),Object(a["createElementVNode"])("li",null,"使用 h5 ：体验无要求，不常用（如举报、反馈等页面）")]),Object(a["createElementVNode"])("p",null,"如果一个 app 中某些场景使用 hybrid ，结合上述的 file 协议和 webview ，需要如下做法："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"前端做好静态页面（html js css），将文件交给客户端"),Object(a["createElementVNode"])("li",null,"客户端拿到前端静态页面，以文件形式存储在 app 中"),Object(a["createElementVNode"])("li",null,"客户端在一个 webview 中"),Object(a["createElementVNode"])("li",null,"使用 file 协议加载静态页面")]),Object(a["createElementVNode"])("p",null,"（画图说明）"),Object(a["createElementVNode"])("p",null,"那现在还剩下两件事没处理（后面课程会讲述）："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"app 发布之后，静态文件如何实时更新"),Object(a["createElementVNode"])("li",null,"静态页面如何获取内容（不能用 ajax ，要客户端获取，然后与前端通讯）")]),Object(a["createElementVNode"])("h2",null,"问题解答"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"hybrid 是客户端和前端混合开发"),Object(a["createElementVNode"])("li",null,"hybrid 依赖于客户端（webview file 协议）"),Object(a["createElementVNode"])("li",null,"hybrid 存在的核心价值：更新快")]),Object(a["createElementVNode"])("h1",null,"通信的几种方式"),Object(a["createElementVNode"])("p",null,"js 和客户端交互有很多种方式，基本原理都是 js 去触发某一种操作，客户端能监听到这种操作，从而将 js 需要的信息传递给客户端。"),Object(a["createElementVNode"])("p",null,"客户端处理完毕之后，会执行 js 传入的一个函数，作为 callback ，这一点跟 jsonp 基本一致。"),Object(a["createElementVNode"])("h2",null,"jsbridge"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("就是 webview 在初始化页面的时候，会执行一段 JS 代码，这段代码给"),Object(a["createElementVNode"])("code",null,"window"),Object(a["createTextVNode"])("设置一个全局的函数，例如"),Object(a["createElementVNode"])("code",null,"window.jsbridge"),Object(a["createTextVNode"])("。然后，js 想要执行客户端的什么操作，直接执行这个函数即可。—— 当然，这得提前和客户端约定好，否则你传递的参数客户端不认识。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义全局的回调函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'shareCallback'"),Object(a["createTextVNode"])("] = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"result"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"errno"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'分享成功'"),Object(a["createTextVNode"])(")\n    } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 分享失败"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"message"),Object(a["createTextVNode"])(")\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"jsbridge"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'share'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])("}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'shareCallback'"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("h2",null,"劫持 prompt"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"window.prompt"),Object(a["createTextVNode"])("默认情况下是一个弹出框，这个大家都知道，这本身是 webview 的一个默认功能。但是 webview 是属于 app 的，app 当然也可以改造 webview ，去重写"),Object(a["createElementVNode"])("code",null,"window.prompt"),Object(a["createTextVNode"])("。重写之后，"),Object(a["createElementVNode"])("code",null,"window.prompt"),Object(a["createTextVNode"])("再没有了默认的功能，调用的时候什么都不会发生，但是能被客户端监听到。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("因此 js 就可以这样和客户端通信（注意，"),Object(a["createElementVNode"])("code",null,"window.prompt"),Object(a["createTextVNode"])("只能接受字符串类型的参数）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义全局的回调函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'shareCallback'"),Object(a["createTextVNode"])("] = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"result"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"errno"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'分享成功'"),Object(a["createTextVNode"])(")\n    } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 分享失败"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"message"),Object(a["createTextVNode"])(")\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" dataStr = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"JSON"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"stringify"),Object(a["createTextVNode"])("({\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'share'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])("},\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"callback"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'shareCallback'"),Object(a["createTextVNode"])("\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"prompt"),Object(a["createTextVNode"])("(dataStr)\n")])]),Object(a["createElementVNode"])("h2",null,"schema 协议"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("schema 协议类似于"),Object(a["createElementVNode"])("code",null,"http"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"file"),Object(a["createTextVNode"])("协议，例如"),Object(a["createElementVNode"])("code",null,"weixin://dl/scan"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"weixin://dl/profile"),Object(a["createTextVNode"])(" 。无论是 ios 还是安卓，都允许 app 向系统注册 schema 协议，并监听这个协议对应的功能。具体的细节我们不必太关注。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("当 h5 页面发出一个 schema 协议的请求的时候，如"),Object(a["createElementVNode"])("code",null,'<a href="weixin://dl/scan">扫一扫</a>'),Object(a["createTextVNode"])("，app 会监听到这个请求，并且执行相应的功能。这就类似于"),Object(a["createElementVNode"])("code",null,'<a href="mailto:xxx@imooc.com">发邮件</a>'),Object(a["createTextVNode"])("能调起邮箱功能一样。")]),Object(a["createElementVNode"])("p",null,"从网上搜到一些微信的 schema 协议，仅供参考。（我也不在腾讯工作，不清楚微信是否真有这些协议）"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":""},"weixin://dl/scan 扫一扫\nweixin://dl/feedback 反馈\nweixin://dl/moments 朋友圈\nweixin://dl/settings 设置\nweixin://dl/notifications 消息通知设置\nweixin://dl/chat 聊天设置\nweixin://dl/general 通用设置\nweixin://dl/officialaccounts 公众号\nweixin://dl/games 游戏\nweixin://dl/help 帮助\nweixin://dl/profile 个人信息\nweixin://dl/features 功能插件\n")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("简单写一个例子，试用 schema 协议来调起分享面板，加入我们定义的 schema 协议是"),Object(a["createElementVNode"])("code",null,"myapp://utils/share?data=xxx&callback=xxx")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 调用函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"invoke"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"action, data, callbackName"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 拼接 schema 协议"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" schema = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'myapp://utils'"),Object(a["createTextVNode"])("\n    schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/'"),Object(a["createTextVNode"])(" + action\n\n    schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'?a=a'"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" key\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (key "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" data) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"hasOwnProperty"),Object(a["createTextVNode"])("(key)) {\n            schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'&'"),Object(a["createTextVNode"])(" + key + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'='"),Object(a["createTextVNode"])(" + data[key]\n        }\n    }\n    \n    schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'&callback='"),Object(a["createTextVNode"])(" + callbackName\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 用 iframe ，如果调用不成功，没有任何副作用"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" iframe = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'iframe'"),Object(a["createTextVNode"])(");\n    iframe."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"style"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"display"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'none'"),Object(a["createTextVNode"])(";\n    iframe."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = schema;\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" body = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"body"),Object(a["createTextVNode"])(" || "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementsByTagName"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'body'"),Object(a["createTextVNode"])(")["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("];\n    body."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"appendChild"),Object(a["createTextVNode"])("(iframe);\n    "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        body."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"removeChild"),Object(a["createTextVNode"])("(iframe);\n        iframe = "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(";\n    }, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(");\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义全局的回调函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'shareCallback'"),Object(a["createTextVNode"])("] = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"result"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"errno"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'分享成功'"),Object(a["createTextVNode"])(")\n    } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 分享失败"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"message"),Object(a["createTextVNode"])(")\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"invoke"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'share'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])("}, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'shareCallback'"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("h2",null,"最终选择"),Object(a["createElementVNode"])("p",null,"最终选择就是使用 schema 协议。原因:"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("strong",null,"是一个 ios 和安卓都认可的标准。相对而言，以上两种都有点“野路子”"),Object(a["createTextVNode"])("。在计算机程序这个领域，任何违背标准（或者再造标准）的东西都是有很大风险的。例如此前的 IE 低版本，现在的 UC 。如果业界以后基于这个标准去扩展、支持其他东西，你如果不符合标准，那就是毁灭性的灾难。")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("strong",null,"有利于 ios 和安卓双端统一调用方式"),Object(a["createTextVNode"])("。以上两种，可能在 ios 和安卓双端那里并不一定都能试用，这样就导致 ios 和安卓各自玩各自的，双端不统一，对于前端开发人员来说，也是一个灾难性的东西。因为你写的代码得做各种兼容，各种"),Object(a["createElementVNode"])("code",null,"if...else"),Object(a["createTextVNode"])("这是严重违背设计原则的事情。")])]),Object(a["createElementVNode"])("h1",null,"与客户端通讯"),Object(a["createElementVNode"])("h2",null,"新闻详情页如果使用 hybrid ，静态网页如何加载新闻内容？"),Object(a["createElementVNode"])("p",null,"答案：不能用 ajax 加载，而是由客户端加载，然后通过 JS 和客户端的通讯来获取内容"),Object(a["createElementVNode"])("h2",null,"JS 和客户端通讯的基本形式"),Object(a["createElementVNode"])("p",null,"以上面问题举例：JS 访问客户端能力，传递参数和回调函数，客户端通过回调函数返回内容"),Object(a["createElementVNode"])("h2",null,"schema 协议简介和使用"),Object(a["createElementVNode"])("p",null,"本章刚刚介绍了一个 file 协议，这里又要介绍 schema 协议。不过至少你现在已经了解了 http(s) file 协议了，schema 协议也是一样的形式。"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"协议 —— 双方的规定"),Object(a["createTextVNode"])(" 是 JS 和客户端通讯的格式规定，"),Object(a["createElementVNode"])("strong",null,"格式内容都由客户端规定"),Object(a["createTextVNode"])("。例如，这是微信的一些 schema 协议（网上查的）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":""},"/* 网上搜的微信的部分 schema 协议 */\n\nweixin://dl/scan              扫一扫\nweixin://dl/feedback          反馈\nweixin://dl/moments           朋友圈\nweixin://dl/settings          设置\nweixin://dl/notifications     消息通知设置\nweixin://dl/chat              聊天设置\nweixin://dl/general           通用设置\nweixin://dl/officialaccounts  公众号\nweixin://dl/games             游戏\nweixin://dl/help              帮助\nweixin://dl/profile           个人信息\nweixin://dl/features          功能插件\n")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("简单使用（这个无法在微信中直接用，微信作为这么大一个平台，"),Object(a["createElementVNode"])("strong",null,"客户端通讯有严格的权限验证"),Object(a["createTextVNode"])("，外部页面不能随意访问）")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* 以下是演示，无法正常运行，微信有严格的权限验证，外部页面不能随意使用 schema */"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" iframe = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'iframe'"),Object(a["createTextVNode"])(");\niframe."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"style"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"display"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'none'"),Object(a["createTextVNode"])(";\niframe."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'weixin://dl/scan'"),Object(a["createTextVNode"])(";  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// iframe 访问 schema"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" body = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"body"),Object(a["createTextVNode"])(" || "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementsByTagName"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'body'"),Object(a["createTextVNode"])(")["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("];\nbody."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"appendChild"),Object(a["createTextVNode"])("(iframe);\n"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    body."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"removeChild"),Object(a["createTextVNode"])("(iframe);  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 销毁 iframe"),Object(a["createTextVNode"])("\n    iframe = "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(";\n});\n")])]),Object(a["createElementVNode"])("p",null,"如果要加上参数和 callback ，那么就要这么写"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* 如果要加上参数和 callback ，那么就要这么写 */"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'_weixin_scan_callback'"),Object(a["createTextVNode"])("] = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"result"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(result)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ...省略..."),Object(a["createTextVNode"])("\niframe."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'weixin://dl/scan?k1=v1&k2=v2&k3=v3&callback=_weixin_scan_callback'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ...省略..."),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"schema 的封装"),Object(a["createElementVNode"])("p",null,"底层调用的封装"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_invoke"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"action, data, callback"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 拼接 schema 协议"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" schema = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'myapp://utils'"),Object(a["createTextVNode"])("\n    schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/'"),Object(a["createTextVNode"])(" + action\n\n    schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'?a=a'"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" key\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (key "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" data) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"hasOwnProperty"),Object(a["createTextVNode"])("(key)) {\n            schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'&'"),Object(a["createTextVNode"])(" + key + "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'='"),Object(a["createTextVNode"])(" + data[key]\n        }\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 处理 callback"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" callbackName = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" callback === "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'string'"),Object(a["createTextVNode"])(") {\n        callbackName = callback\n    } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n        callbackName = cation + "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Date"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"now"),Object(a["createTextVNode"])("()\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("[callbackName] = callback\n    }\n\n    schema += "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'&callback='"),Object(a["createTextVNode"])(" + callbackName\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 用 iframe ，如果调用不成功，没有任何副作用"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" iframe = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'iframe'"),Object(a["createTextVNode"])(");\n    iframe."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"style"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"display"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'none'"),Object(a["createTextVNode"])(";\n    iframe."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"src"),Object(a["createTextVNode"])(" = schema;\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" body = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"body"),Object(a["createTextVNode"])(" || "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementsByTagName"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'body'"),Object(a["createTextVNode"])(")["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("];\n    body."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"appendChild"),Object(a["createTextVNode"])("(iframe);\n    "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        body."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"removeChild"),Object(a["createTextVNode"])("(iframe);\n        iframe = "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(";\n    }, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(");\n}\n")])]),Object(a["createElementVNode"])("p",null,"对每个功能都进行封装，方便调用者使用"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 分享"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"invokeShare"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"data, callback"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_invoke"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'share'"),Object(a["createTextVNode"])(", data, callback)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 登录"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"invokeLogin"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"data, callback"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_invoke"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'login'"),Object(a["createTextVNode"])(", data, callback)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 打开扫一扫"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"invokeScan"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"data, callback"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"_invoke"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'sacn'"),Object(a["createTextVNode"])(", data, callback)\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 暴露给全局"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"invoke"),Object(a["createTextVNode"])(" = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"share"),Object(a["createTextVNode"])(": invokeShare,\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"login"),Object(a["createTextVNode"])(": invokeLogin,\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"scan"),Object(a["createTextVNode"])(": invokeScan\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("傻瓜式调用，而且"),Object(a["createElementVNode"])("strong",null,"不用再自己定义全局函数")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* 傻瓜式调用，而且不用再自己定义全局函数 */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"invoke"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"share"),Object(a["createTextVNode"])("({"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx'"),Object(a["createTextVNode"])("}, "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"result"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"errno"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'分享成功'"),Object(a["createTextVNode"])(")\n    } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 分享失败"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"alert"),Object(a["createTextVNode"])("(result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"message"),Object(a["createTextVNode"])(")\n    }\n})\n")])]),Object(a["createElementVNode"])("h2",null,"内置上线"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("前两部分的代码，封装、打包之后，取名"),Object(a["createElementVNode"])("code",null,"invoke.js"),Object(a["createTextVNode"])("，然后内置到客户端中。客户端打开一个 webview 的时候，就直接执行这个 js 。原因：")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"本地加载，免去网络加载的时间，更快。也没必要每个页面都去加载一遍，各个页面用到的这个 js 都一样的。"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("安全。网络加载很容易被抓包和劫持，这样黑客一解析"),Object(a["createElementVNode"])("code",null,"invoke.js"),Object(a["createTextVNode"])("的代码，就能分析出 app 的 schema 协议的格式。")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"7d6e":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"px % em rem vw/vh 的区别"),Object(a["createElementVNode"])("h2",null,"px"),Object(a["createElementVNode"])("p",null,"像素，基本单位"),Object(a["createElementVNode"])("h2",null,"%"),Object(a["createElementVNode"])("p",null,"相对于父元素的尺寸。"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("如根据 "),Object(a["createElementVNode"])("code",null,"position: absolute;"),Object(a["createTextVNode"])(" 居中显示时，需要设置 "),Object(a["createElementVNode"])("code",null,"left: 50%")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-css"},[Object(a["createElementVNode"])("span",{class:"hljs-selector-class"},".container"),Object(a["createTextVNode"])(" {\n    with: "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200px"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"height"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200px"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"position"),Object(a["createTextVNode"])(": relative;\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-selector-class"},".box"),Object(a["createTextVNode"])(" {\n    with: "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100px"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"height"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100px"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"position"),Object(a["createTextVNode"])(": absolute;\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"left"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"50%"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"top"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"50%"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"margin-top"),Object(a["createTextVNode"])(": -"),Object(a["createElementVNode"])("span",{class:"hljs-number"},"50px"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"margin-left"),Object(a["createTextVNode"])(": -"),Object(a["createElementVNode"])("span",{class:"hljs-number"},"50px"),Object(a["createTextVNode"])(";\n}\n")])]),Object(a["createElementVNode"])("h2",null,"em"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("相对于当前元素的 "),Object(a["createElementVNode"])("code",null,"font-size"),Object(a["createTextVNode"])("。首行缩进可以使用 "),Object(a["createElementVNode"])("code",null,"text-indent: 2em"),Object(a["createTextVNode"])("。")]),Object(a["createElementVNode"])("h2",null,"rem"),Object(a["createElementVNode"])("p",null,"rem = root em"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("相对于根元素的 "),Object(a["createElementVNode"])("code",null,"font-size"),Object(a["createTextVNode"])(" 。可以根据媒体查询，设置根元素的 "),Object(a["createElementVNode"])("code",null,"font-size"),Object(a["createTextVNode"])(" ，实现移动端适配。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-css"},[Object(a["createTextVNode"])("@media only screen and ("),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"max-width"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"374px"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* iphone5 或者更小的尺寸，以 iphone5 的宽度（320px）比例设置 font-size */"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-selector-tag"},"html"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"font-size"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"86px"),Object(a["createTextVNode"])(";\n    }\n}\n@media only screen and ("),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"min-width"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"375px"),Object(a["createTextVNode"])(") and (max-width: "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"413px"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* iphone6/7/8 和 iphone x */"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-selector-tag"},"html"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"font-size"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100px"),Object(a["createTextVNode"])(";\n    }\n}\n@media only screen and ("),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"min-width"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"414px"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* iphone6p 或者更大的尺寸，以 iphone6p 的宽度（414px）比例设置 font-size */"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-selector-tag"},"html"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attribute"},"font-size"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"110px"),Object(a["createTextVNode"])(";\n    }\n}\n")])]),Object(a["createElementVNode"])("h2",null,"vw/vh"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"vw 屏幕宽度的 1%"),Object(a["createElementVNode"])("li",null,"vh 屏幕高度的 1%"),Object(a["createElementVNode"])("li",null,"vmin 两者最小值"),Object(a["createElementVNode"])("li",null,"vmax 两者最大值")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"873f":function(e,t,c){"use strict";c.d(t,"b",(function(){return n})),c.d(t,"a",(function(){return r}));c("4de4"),c("d3b7"),c("ddb0"),c("159b"),c("ac1f"),c("466d"),c("d81d"),c("1276"),c("99af");function a(e){return e.filter((function(e){return-1===e.indexOf("hide")}))}function l(){var e=c("d3de"),t=e.keys(),l=[];return t&&t.length>0&&t.forEach((function(e){var t=e.match(/\.\/(\S*)\.md/);t&&t[1]&&l.push(t[1])})),a(l)}function s(e){return e.map((function(e,t){var c=e.split("/");return{id:t+1,url:"/mark-down/".concat(e,".md"),title:c[c.length-1],tag_name:"".concat(c[0]," · ").concat(c[1]||"JavaScript"),type:c[0]}}))}var n="最近在学习js基础",r=s(l())},"8e7c":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"深拷贝"),Object(a["createElementVNode"])("h2",null,"目标"),Object(a["createElementVNode"])("p",null,"手写 JS 深拷贝"),Object(a["createElementVNode"])("h2",null,"分析"),Object(a["createElementVNode"])("p",null,"这是一个很常见的问题，看似也很简单，但是如果考虑到“高质量代码”的要求，写起来还是挺麻烦的。"),Object(a["createElementVNode"])("h2",null,"错误答案1"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("使用 "),Object(a["createElementVNode"])("code",null,"JSON.stringify"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"JSON.parse")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"无法转换函数"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("无法转换 "),Object(a["createElementVNode"])("code",null,"Map"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Set")]),Object(a["createElementVNode"])("li",null,"无法转换循环引用")]),Object(a["createElementVNode"])("p",null,"PS：其实普通对象使用 JSON API 的运算速度很快，但功能不全"),Object(a["createElementVNode"])("h2",null,"错误答案2"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("使用 "),Object(a["createElementVNode"])("code",null,"Object.assign"),Object(a["createTextVNode"])(" —— 这根本就不是深拷贝，是浅拷贝 ！！！")]),Object(a["createElementVNode"])("h2",null,"错误答案3"),Object(a["createElementVNode"])("p",null,"只考虑了普通的对象和数组"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("无法转换 "),Object(a["createElementVNode"])("code",null,"Map"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Set")]),Object(a["createElementVNode"])("li",null,"无法转换循环引用")]),Object(a["createElementVNode"])("h2",null,"正确答案"),Object(a["createElementVNode"])("p",null,"参考代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// /**"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//  * 深拷贝 - 只考虑了简单的数组、对象"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//  * @param obj obj"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//  */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// function cloneDeep(obj: any) {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     if (typeof obj !== 'object' || obj == null ) return obj"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     let result: any"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     if (obj instanceof Array) {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         result = []"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     } else {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         result = {}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     for (let key in obj) {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         if (obj.hasOwnProperty(key)) {            "),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//             result[key] = cloneDeep(obj[key]) // 递归调用"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     return result"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // 功能测试"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const a: any = {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     set: new Set([10, 20, 30]),"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     map: new Map([['x', 10], ['y', 20]])"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// a.self = a"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.log( cloneDeep(a) ) // 无法处理 Map Set 和循环引用"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n * 深拷贝\n * @param obj obj\n * @param map weakmap 为了避免循环引用\n */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"cloneDeep"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("obj: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", map = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"WeakMap"),Object(a["createTextVNode"])("()")]),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" obj !== "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'object'"),Object(a["createTextVNode"])(" || obj == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(" ) "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" obj\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 避免循环引用"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" objFromMap = map."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("(obj)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (objFromMap) "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" objFromMap\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"target"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(" = {}\n    map."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("(obj, target)\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Map"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (obj "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])(") {\n        target = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])("()\n        obj."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"v, k"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" v1 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"cloneDeep"),Object(a["createTextVNode"])("(v, map)\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" k1 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"cloneDeep"),Object(a["createTextVNode"])("(k, map)\n            target."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("(k1, v1)\n        })\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Set"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (obj "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Set"),Object(a["createTextVNode"])(") {\n        target = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Set"),Object(a["createTextVNode"])("()\n        obj."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"forEach"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"v"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" v1 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"cloneDeep"),Object(a["createTextVNode"])("(v, map)\n            target."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"add"),Object(a["createTextVNode"])("(v1)\n        })\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Array"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (obj "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"instanceof"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])(") {\n        target = obj."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"item"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"cloneDeep"),Object(a["createTextVNode"])("(item, map))\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// Object"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" key "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"in"),Object(a["createTextVNode"])(" obj) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" val = obj[key]\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" val1 = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"cloneDeep"),Object(a["createTextVNode"])("(val, map)\n        target[key] = val1\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" target\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // 功能测试"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const a: any = {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     set: new Set([10, 20, 30]),"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     map: new Map([['x', 10], ['y', 20]]),"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     info: {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         city: '北京'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     },"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     fn: () => { console.info(100) }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// a.self = a"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.log( cloneDeep(a) )"),Object(a["createTextVNode"])("\n\n")])]),Object(a["createElementVNode"])("hr"),Object(a["createElementVNode"])("p",null,"循环引用 Map Set 函数")])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},9541:function(e,t,c){"use strict";c("b9da")},9808:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createStaticVNode"])("<html><head></head><body><h1>code review</h1><p>如何做 code review ？</p><h2>分析</h2><p>code review（简称 CR ）即代码走查。领导对下属的代码进行审查，或者同事之间相互审查。 CR 已经是现代软件研发流程中非常重要的一步，持续规范的执行 CR 可以保证代码质量，避免破窗效应。</p><h2>CR 检查什么</h2><ul><li>代码规范（eslint 能检查一部分，但不是全部，如：变量命名）</li><li>重复逻辑抽离、复用</li><li>单个函数过长，需要拆分</li><li>算法是否可优化?</li><li>是否有安全漏洞?</li><li>扩展性如何？</li><li>是否和现有的功能重复了？</li><li>是否有完善的单元测试</li><li>组件设计是否合理</li></ul><h2>何时 CR</h2><p>提交 PR（或者 MR）时，看代码 diff 。给出评审意见，或者评审通过。可让领导评审，也可以同事之间相互评审。<br> 评审人要负责，不可形式主义。万一这段代码出了问题，评审人也要承担责任。</p><p>例行，每周组织一次集体 CR ，拿出几个 PR 或者几段代码，大家一起评审。<br> 可以借机来统一评审规则，也可以像新人来演示如何评审。</p><h2>持续优化</h2><p>评审的问题要汇总起来，整理一个代码规范和常见问题，持续积累。持续宣讲，并让新成员学习。</p></body></html>",1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},"995c":function(e,t,c){"use strict";c("1d14")},"9cda":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"原型"),Object(a["createElementVNode"])("h1",null,"zepto 是什么"),Object(a["createElementVNode"])("p",null,"先来看看 zepto 是什么。别以为他很基础，平时用 zepto 很多的，并不一定能注意到这些问题，还是跟我一起看看。"),Object(a["createElementVNode"])("h2",null,"demo"),Object(a["createElementVNode"])("p",null,"先做一个简单的 demo 页面，就平时最基本的使用方式"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createTextVNode"])("    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test 1"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test 2"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test 3"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div1"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test in div"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"jquery-3.2.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $p = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'p'"),Object(a["createTextVNode"])(")\n        $p."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"css"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'color'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'red'"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// css 是原型方法"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("($p."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"html"),Object(a["createTextVNode"])("())  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// html 是原型方法"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $div1 = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#div1'"),Object(a["createTextVNode"])(")\n        $div1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"css"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'color'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'blue'"),Object(a["createTextVNode"])(")  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// css 是原型方法"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("($div1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"html"),Object(a["createTextVNode"])("())  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// html 是原型方法"),Object(a["createTextVNode"])("\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h1",null,"zepto 原型如何实现"),Object(a["createElementVNode"])("h2",null,"找到 zepto 对象是哪里创建的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 空对象"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" zepto = {}\n\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 这就是构造函数"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Z"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"dom, selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" i, len = dom ? dom."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (i = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("; i < len; i++) "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("[i] = dom[i]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" = len\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"selector"),Object(a["createTextVNode"])(" = selector || "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n  }\n\n  zepto."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"Z"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"dom, selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，出现了 new 关键字"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Z"),Object(a["createTextVNode"])("(dom, selector)\n  }\n\n  zepto."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"init"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 源码中，这了的处理情况比较复杂。但因为本次只是针对原型，因此这里就弱化了"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" slice = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"slice"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" dom = slice."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"querySelectorAll"),Object(a["createTextVNode"])("(selector))\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" zepto."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Z"),Object(a["createTextVNode"])("(dom, selector) \n  }\n\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 即使用 zepto 时候的 $"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $ = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])("){\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" zepto."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"init"),Object(a["createTextVNode"])("(selector)\n  }\n")])]),Object(a["createElementVNode"])("h2",null,"找到原型"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("$.fn = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"constructor"),Object(a["createTextVNode"])(": zepto."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"Z"),Object(a["createTextVNode"])(",\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"css"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"key, value"),Object(a["createTextVNode"])(") {\n\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"html"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"value"),Object(a["createTextVNode"])(") {\n\n    }\n}\n\nzepto."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"Z"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(" = Z."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(" = $.fn\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("构造函数"),Object(a["createElementVNode"])("code",null,"Z"),Object(a["createTextVNode"])("的原型的方法，是在"),Object(a["createElementVNode"])("code",null,"$.fn"),Object(a["createTextVNode"])("定义完了之后，又赋值给"),Object(a["createElementVNode"])("code",null,"Z.prototype"),Object(a["createTextVNode"])("的")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("另外，"),Object(a["createElementVNode"])("code",null,"constructor"),Object(a["createTextVNode"])("赋值了"),Object(a["createElementVNode"])("code",null,"zepto.Z"),Object(a["createTextVNode"])("而不是"),Object(a["createElementVNode"])("code",null,"Z"),Object(a["createTextVNode"])("，这是我不太理解的地方，不过完全不影响使用")]),Object(a["createElementVNode"])("h2",null,"最后"),Object(a["createElementVNode"])("p",null,"以上提到的每一个核心函数，都要完全透彻的理解才行。"),Object(a["createElementVNode"])("h1",null,"zepto 看源码"),Object(a["createElementVNode"])("p",null,"一开始，是一个 umd 规范的封装"),Object(a["createElementVNode"])("p",null,"接下来"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Zepto"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $ = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回核心函数"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" $\n})\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 暴露全局方法"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"Zepto"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Zepto"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"undefined"),Object(a["createTextVNode"])(" && ("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Zepto"),Object(a["createTextVNode"])(")\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 一些扩展，https://github.com/madrobby/zepto#zepto-modules 这些模块都是通过这种方式扩展的"),Object(a["createTextVNode"])("\n;("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"$"),Object(a["createTextVNode"])(") {\n\n})("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Zepto"),Object(a["createTextVNode"])(")\n\n;("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"$"),Object(a["createTextVNode"])(") {\n\n})("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Zepto"),Object(a["createTextVNode"])(")\n\n;("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"$"),Object(a["createTextVNode"])(") {\n\n})("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Zepto"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("p",null,"然后就是上一节讲的那些核心方法"),Object(a["createElementVNode"])("h1",null,"jquery 是什么"),Object(a["createElementVNode"])("p",null,"这一节完全可以照搬“zepto 是什么”那一节的内容，因为两者的基础 API 都是一样的"),Object(a["createElementVNode"])("h2",null,"demo"),Object(a["createElementVNode"])("p",null,"先做一个简单的 demo 页面，就平时最基本的使用方式"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createTextVNode"])("    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test 1"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test 2"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test 3"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div1"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("jquery test in div"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"jquery-3.2.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("($)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $p = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'p'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("($p)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $div1 = $("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#div1'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("($div1)\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"这里打印出来的俩对象，是什么数据结构呢？—— 类数组，解释一下什么是类数组"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("还有"),Object(a["createElementVNode"])("code",null,"console.log($)"),Object(a["createTextVNode"])("别忘了，"),Object(a["createElementVNode"])("code",null,"$"),Object(a["createTextVNode"])("是一个函数（从"),Object(a["createElementVNode"])("code",null,"$('p')"),Object(a["createTextVNode"])("就能看出来），传入 selector 返回一个 zepto 对象。")]),Object(a["createElementVNode"])("h2",null,"关于原型"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"$('p')"),Object(a["createTextVNode"])("返回的"),Object(a["createElementVNode"])("code",null,"$p"),Object(a["createTextVNode"])("的构造函数是什么？因为"),Object(a["createElementVNode"])("code",null,"$p.__proto__"),Object(a["createTextVNode"])("等于构造函数的"),Object(a["createElementVNode"])("code",null,"prototype")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("这个构造函数和"),Object(a["createElementVNode"])("code",null,"$"),Object(a["createTextVNode"])("函数的关系是什么？")]),Object(a["createElementVNode"])("h1",null,"jquery 原型如何实现"),Object(a["createElementVNode"])("p",null,"jquery 的实现方式比 zepto 要更加绕一些，考验各位的理解能力"),Object(a["createElementVNode"])("p",null,"核心函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" jQuery = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意 new 关键字，第一步就找到了构造函数"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(" jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"init"),Object(a["createTextVNode"])("(selector);\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义构造函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" init = jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"init"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" slice = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"slice"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" dom = slice."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"querySelectorAll"),Object(a["createTextVNode"])("(selector))\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" i, len = dom ? dom."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (i = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("; i < len; i++) "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("[i] = dom[i]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" = len\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"selector"),Object(a["createTextVNode"])(" = selector || "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 初始化 jQuery.fn"),Object(a["createTextVNode"])("\njQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])(" = jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(" = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"constructor"),Object(a["createTextVNode"])(": jQuery,\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 其他函数..."),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"css"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"key, value"),Object(a["createTextVNode"])(") {\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"html"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"value"),Object(a["createTextVNode"])(") {\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义原型"),Object(a["createTextVNode"])("\ninit."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(" = jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])(";\n")])]),Object(a["createElementVNode"])("h1",null,"jquery 看源码"),Object(a["createElementVNode"])("p",null,"一开始，是一个 umd 规范的封装。封装之后，后面函数的返回值，会直接挂在到 window 对象。"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("然后看代码一开始定义了"),Object(a["createElementVNode"])("code",null,"jQuery"),Object(a["createTextVNode"])("，最后"),Object(a["createElementVNode"])("code",null,"return jQuery;")]),Object(a["createElementVNode"])("p",null,"然后就是上一节将的核心代码"),Object(a["createElementVNode"])("h1",null,"总结"),Object(a["createElementVNode"])("p",null,"再把最关键的，zepto 和 jquery 的核心代码看一下"),Object(a["createElementVNode"])("h2",null,"zepto"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 空对象"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" zepto = {}\n\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 这就是构造函数"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Z"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"dom, selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" i, len = dom ? dom."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"for"),Object(a["createTextVNode"])(" (i = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("; i < len; i++) "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("[i] = dom[i]\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" = len\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"selector"),Object(a["createTextVNode"])(" = selector || "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n  }\n\n  zepto."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"Z"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"dom, selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，出现了 new 关键字"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Z"),Object(a["createTextVNode"])("(dom, selector)\n  }\n\n  zepto."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"init"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 源码中，这了的处理情况比较复杂。但因为本次只是针对原型，因此这里就弱化了"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" slice = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"slice"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" dom = slice."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"querySelectorAll"),Object(a["createTextVNode"])("(selector))\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" zepto."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Z"),Object(a["createTextVNode"])("(dom, selector) \n  }\n\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 即使用 zepto 时候的 $"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" $ = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])("){\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" zepto."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"init"),Object(a["createTextVNode"])("(selector)\n  }\n")])]),Object(a["createElementVNode"])("h2",null,"jquery"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" jQuery = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意 new 关键字，第一步就找到了构造函数"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(" jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"init"),Object(a["createTextVNode"])("(selector);\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 初始化 jQuery.fn"),Object(a["createTextVNode"])("\njQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])(" = jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(" = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"constructor"),Object(a["createTextVNode"])(": jQuery,\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 其他函数..."),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"addClass"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"html"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        \n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义构造函数"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" init = jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"init"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"selector"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 源码中，这了的处理情况比较复杂。但因为本次只是针对原型，因此这里就弱化了"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" slice = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Array"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"slice"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" slice."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"querySelectorAll"),Object(a["createTextVNode"])("(selector))\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 定义原型"),Object(a["createTextVNode"])("\ninit."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(" = jQuery."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"fn"),Object(a["createTextVNode"])(";\n")])]),Object(a["createElementVNode"])("h2",null,[Object(a["createTextVNode"])("为何要把原型方法都放在"),Object(a["createElementVNode"])("code",null,"jQuery.fn"),Object(a["createTextVNode"])("或者"),Object(a["createElementVNode"])("code",null,"$.fn"),Object(a["createTextVNode"])("？")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("以 jquery 为例，构造函数本来不是"),Object(a["createElementVNode"])("code",null,"jQuery"),Object(a["createTextVNode"])("，为何要把对象原型放在"),Object(a["createElementVNode"])("code",null,"jQuery.fn"),Object(a["createTextVNode"])("，即"),Object(a["createElementVNode"])("code",null,"jQuery.prototype"),Object(a["createTextVNode"])("？")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 因为要扩展插插件，做一个简单的插件的例子"),Object(a["createTextVNode"])("\n\n$.fn."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"getNodeName"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"nodeName"),Object(a["createTextVNode"])("\n}\n")])])])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},afbc:function(e,t,c){"use strict";(function(e){c("d3b7"),c("3ca3"),c("ddb0");var a=c("6c02"),l=[{path:"/",name:"home",component:function(){return Promise.all([c.e("chunk-libs"),c.e("chunk-30779b1a")]).then(c.bind(null,"65117"))},meta:{keepAlive:!0}},{path:"/article/:articleId",name:"article_detail",component:function(){return Promise.all([c.e("chunk-libs"),c.e("chunk-7915fb20")]).then(c.bind(null,"1000"))},meta:{keepAlive:!0}},{path:"/404",name:"NotFound",component:function(){return c.e("chunk-2d0e95df").then(c.bind(null,"8cdb"))}},{path:"/:pathMatch(.*)*",redirect:"/404",component:function(){return c.e("chunk-2d0e95df").then(c.bind(null,"8cdb"))}}],s=Object(a["a"])({history:Object(a["b"])(e.env.BASE_URL),routes:l});t["a"]=s}).call(this,c("4362"))},b292:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"节流和防抖"),Object(a["createElementVNode"])("p",null,"节流和防抖有何区别？分别用于什么场景？"),Object(a["createElementVNode"])("h2",null,"防抖"),Object(a["createElementVNode"])("p",null,"防抖，即防止抖动。抖动着就先不管它，等啥时候静止了，再做操作。"),Object(a["createElementVNode"])("p",null,"例如，一个搜索输入框，等输入停止之后，自动执行搜索。"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},[Object(a["createTextVNode"])("<!DOCTYPE "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"lang"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"en"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"charset"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"UTF-8"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"http-equiv"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"X-UA-Compatible"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"IE=edge"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"viewport"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"width=device-width, initial-scale=1.0"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("debounce"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("debounce"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    搜索 "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"input1"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    \n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"debounce"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("fn, delay = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"200")]),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" timer = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (timer) "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"clearTimeout"),Object(a["createTextVNode"])("(timer)\n\n                timer = "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n                    fn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"apply"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"arguments"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 透传 this 和参数"),Object(a["createTextVNode"])("\n                    timer = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n                }, delay)\n            }\n        }\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" input1 = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'input1'"),Object(a["createTextVNode"])(")\n        input1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"addEventListener"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'keyup'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"debounce"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'发起搜索'"),Object(a["createTextVNode"])(", input1."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])(")\n        }), "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"300"),Object(a["createTextVNode"])(")\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"节流"),Object(a["createElementVNode"])("p",null,"节流，即节省交互沟通。流，可理解为交流，不一定会产生网络流量。"),Object(a["createElementVNode"])("p",null,"例如，drag 的回调，上传进度的回调，都可以设置一个固定的频率，没必要那么频繁。"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-meta"},[Object(a["createTextVNode"])("<!DOCTYPE "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"lang"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"en"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"charset"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"UTF-8"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"http-equiv"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"X-UA-Compatible"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"IE=edge"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"meta"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"viewport"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"content"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"width=device-width, initial-scale=1.0"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("throttle"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"title"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"head"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("throttle"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div1"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"draggable"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"true"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"style"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"width: 100px; height: 50px; background-color: #ccc; padding: 10px;"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        可拖拽\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"throttle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("fn, delay = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100")]),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(" timer = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (timer) "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n\n                timer = "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n                    fn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"apply"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"arguments"),Object(a["createTextVNode"])(")\n                    timer = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n                }, delay)\n            }\n        }\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" div1 = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div1'"),Object(a["createTextVNode"])(")\n        div1."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"addEventListener"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'drag'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"throttle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"e"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'鼠标的位置'"),Object(a["createTextVNode"])(", e."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"offsetX"),Object(a["createTextVNode"])(", e."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"offsetY"),Object(a["createTextVNode"])(")\n        }))\n    ")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"body"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"html"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("p",null,"防抖和节流都用于处理频繁触发的操作，优化操作体验。"),Object(a["createElementVNode"])("p",null,"触发频率"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"防抖，不固定"),Object(a["createElementVNode"])("li",null,"节流，固定")]),Object(a["createElementVNode"])("p",null,"场景"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"防抖，结果式，即一次调用即可"),Object(a["createElementVNode"])("li",null,"节流，过程式，即需要持续一个过程，一次不够")]),Object(a["createElementVNode"])("h2",null,"划重点"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"抓住“触发频率”是否固定，即可抓住重点"),Object(a["createElementVNode"])("li",null,"实际项目推荐使用 lodash")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},b9da:function(e,t,c){},b9f2:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"什么是 MVVM"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"要做一个 vue 的例子")]),Object(a["createElementVNode"])("h2",null,"例子"),Object(a["createElementVNode"])("p",null,"结合之前做的 vue to-do-list 的例子"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-on:click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"add"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-for"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"item in list"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{item}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"./vue-2.5.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" data = {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": []\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"el"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": data,\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"add"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(")\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n            }\n        }\n    })\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"解说"),Object(a["createElementVNode"])("p",null,"MVVM 拆解开来就是 Model View ViewModel ，对设计模式多少了解一些的读者，应该知道 Model View 是什么，关键在于 ViewModel。我在最开始接触 vue 并试图理解 MVVM 的时候，是从下图开始的"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("img",{src:"https://user-images.githubusercontent.com/9583120/32172846-0a520f48-bd4b-11e7-9e2b-1ebdcb293387.jpeg",alt:""})]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("View 即视图，我觉得更好的解释是“模板”，就是代码中"),Object(a["createElementVNode"])("code",null,'<div id="app">...</div>'),Object(a["createTextVNode"])("的内容，用于显示信息以及交互事件的绑定，写过 html 的都明白。")]),Object(a["createElementVNode"])("p",null,"Model 即模型（或数据），跟 MVC 中的 Model 一样，就是想要显示到模型上的数据，也是我们需要在程序生命周期中可能需要更新的数据。View 和 Model 分开，两者无需相互关心，相比于 jquery 时代，这已经是设计上的一个巨大进步。"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("两者分开之后得通过 ViewModel 连接起来，"),Object(a["createElementVNode"])("code",null,"el: '#app'"),Object(a["createTextVNode"])("牵着 View ，"),Object(a["createElementVNode"])("code",null,"data: model"),Object(a["createTextVNode"])("牵着 Model ，还有一个"),Object(a["createElementVNode"])("code",null,"methods"),Object(a["createTextVNode"])("（其实不仅仅是"),Object(a["createElementVNode"])("code",null,"methods"),Object(a["createTextVNode"])("，还有其他配置）充当 controller 的角色，可以修改 Model 的值。")]),Object(a["createElementVNode"])("h2",null,"带来的改变"),Object(a["createElementVNode"])("p",null,"如果用 jquery 实现上述功能，那肯定得将 click 事件绑定到 DOM 上，数据的更新会直接修改 DOM —— 总之吧，什么事儿都得操作 DOM 。这样，我们就会将 View Model Controller 完全耦合在一起，很容易搞成意大利面一样的程序。"),Object(a["createElementVNode"])("p",null,"完全分开之后，click 事件直接关联到 ViewModel 中，事件直接修改 Model ，然后由框架自动去完成 View 的更新。相比于手动操作 DOM ，你可以通过修改 Model 去控制 View 更新，这样在降低耦合的同时，也更加符合人的逻辑习惯，简直让人欲罢不能。"),Object(a["createElementVNode"])("p",null,"从 vue 以及其他 MVVM 框架，基本已经用于全球各种 web 系统的开发中，而且是很快推广普及，可见开发人员对它的认可 —— 这也是读者学习 MVVM 的必要性！")])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},bb7a:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createStaticVNode"])("<html><head></head><body><h1>你的不足</h1><p>你目前有何不足的地方？</p><h2>分析</h2><p>如果你被问到这个问题，那恭喜你面试快要通过了。一般在 3-4 面，或者 hr 面试时会问道这个问题。<br> 无论是 hr 还是技术人员问，你都要从技术角度来回答这个问题，说自己技术上的不足。不要扯其他方面的，容易掉到坑里。</p><p>你不用担心 hr 听不懂技术，听不懂更好。</p><h2>不足，不要乱说</h2><p>要限定一个范围</p><ul><li>技术方面的</li><li>非核心技术栈的，即有不足也无大碍</li><li>些容易弥补的，后面才能“翻身”</li></ul><p>错误的示范</p><ul><li>我爱睡懒觉、总是迟到 —— 非技术方面</li><li>我自学的 Vue ，但还没有实践过 —— 核心技术栈</li><li>我不懂 React —— 技术栈太大，不容易弥补</li></ul><p>正确的示范</p><ul><li>脚手架，我还在学习中，还不熟练</li><li>nodejs 还需要继续深入学习</li></ul><h2>最后，要把话题反转回来</h2><p>不能只说不足，就截止了。一定要通过不足，来突出自己的解决方案，以及未来的预期。<br> 这样给人的印象是：正式了自己的不足 + 有学习的态度 —— 非常好！</p><h2>答案</h2><p>套这个模板</p><ul><li>我觉得自己在 xxx 方面还存在不足</li><li>但我已经意识到并且开始学习 xxx</li><li>争取在 xxx 时候把这块补齐</li></ul></body></html>",1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},bd6f:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"options 请求"),Object(a["createElementVNode"])("p",null,"跨域为何需要 options 请求？"),Object(a["createElementVNode"])("h2",null,"跨域"),Object(a["createElementVNode"])("p",null,"浏览器同源策略，默认限制跨域请求。跨域的解决方案"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"jsonp"),Object(a["createElementVNode"])("li",null,"CORS")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// CORS 配置允许跨域（服务端）"),Object(a["createTextVNode"])("\nresponse."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setHeader"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"Access-Control-Allow-Origin"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"http://localhost:8011"'),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 或者 '*'"),Object(a["createTextVNode"])("\nresponse."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setHeader"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"Access-Control-Allow-Headers"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"X-Requested-With"'),Object(a["createTextVNode"])(")\nresponse."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setHeader"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"Access-Control-Allow-Methods"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"PUT,POST,GET,DELETE,OPTIONS"'),Object(a["createTextVNode"])(")\nresponse."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setHeader"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"Access-Control-Allow-Credentials"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"true"'),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 允许跨域接收 cookie"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"options 请求"),Object(a["createElementVNode"])("p",null,"使用 CORS 跨域请求时，经常会看到一个“多余”的 options 请求，之后才发送了实际的请求。"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/img/options.png",alt:""})]),Object(a["createElementVNode"])("p",null,"该请求就是为了检查服务端的 headers 信息，是否符合客户端的预期。所以它没有 body 的返回。"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"规范要求，对那些可能对服务器数据产生副作用的 HTTP 请求方法（特别是 GET 以外的 HTTP 请求，或者搭配某些 MIME 类型的 POST 请求），浏览器必须首先使用 OPTIONS 方法发起一个预检请求（preflight request），从而获知服务端是否允许该跨域请求。—— MDN")]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("options 请求就是对 CORS 跨域请求之间的一次预检查，检查成功再发起正式请求，是浏览器自行处理的。"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 了解即可，实际开发中不用过于关注。")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},bdac:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"手写 new"),Object(a["createElementVNode"])("h2",null,"题目"),Object(a["createElementVNode"])("p",null,"new 一个对象内部发生了什么，手写代码表示"),Object(a["createElementVNode"])("h2",null,"class 是语法糖"),Object(a["createElementVNode"])("p",null,"ES6 使用 class 代替了 ES6 的构造函数"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Foo"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"name"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"city"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'北京'"),Object(a["createTextVNode"])("\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getName"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])("\n    }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" f = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Foo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("p",null,"其实 class 就是一个语法糖，它本质上和构造函数是一样的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"Foo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"name"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"city"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'北京'"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Foo"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"getName"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") { "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，这里不可以用箭头函数"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" f = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Foo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("h2",null,"new 一个对象的过程"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"创建一个空对象 obj，继承构造函数的原型"),Object(a["createElementVNode"])("li",null,"执行构造函数（将 obj 作为 this）"),Object(a["createElementVNode"])("li",null,"返回 obj")]),Object(a["createElementVNode"])("h2",null,"实现 new"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" customNew<T>("),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"constructor"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Function"),Object(a["createTextVNode"])(", ..."),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"args"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]): T {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 1. 创建一个空对象，继承 constructor 的原型"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"create"),Object(a["createTextVNode"])("(constructor."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])(")\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 2. 将 obj 作为 this ，执行 constructor ，传入参数"),Object(a["createTextVNode"])("\n    constructor."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"apply"),Object(a["createTextVNode"])("(obj, args)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 3. 返回 obj"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" obj\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// class Foo {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     // 属性"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     name: string"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     city: string"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     n: number"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     constructor(name: string, n: number) {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         this.name = name"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         this.city = '北京'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         this.n = n"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     }"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     getName() {"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//         return this.name"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//     }"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// }"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const f = new Foo('张三', 100)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// // const f = customNew<Foo>(Foo, '张三', 100)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(f)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(f.getName())"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"面试连环问：Object.create 和 {} 的区别"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"Object.create"),Object(a["createTextVNode"])(" 可以指定原型，创建一个空对象。"),Object(a["createElementVNode"])("br"),Object(a["createElementVNode"])("code",null,"{}"),Object(a["createTextVNode"])(" 就相当于 "),Object(a["createElementVNode"])("code",null,"Object.create(Object.prototype)"),Object(a["createTextVNode"])(" ，即根据 "),Object(a["createElementVNode"])("code",null,"Object"),Object(a["createTextVNode"])(" 原型的空对象。")]),Object(a["createElementVNode"])("p",null,"PS：对 JS 原型和原型链还不了解的需要抓紧恶补。")])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},c264:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"Vue computed 和 watch 区别"),Object(a["createElementVNode"])("h2",null,"两者设计用途不同"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"computed 用于产出二次处理之后的数据，如对于一个列表进行 filter 处理"),Object(a["createElementVNode"])("li",null,"watch 用于监听数据变化（如 v-model 时，数据可能被动改变，需要监听才能拿到）")]),Object(a["createElementVNode"])("h2",null,"computed 有缓存"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"computed 有缓存，data 不变则缓存不失效"),Object(a["createElementVNode"])("li",null,"methods 无缓存，实时计算")]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"computed 就已有数据产出新数据，有缓存"),Object(a["createElementVNode"])("li",null,"watch 监听已有数据")]),Object(a["createElementVNode"])("hr"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("<template>\n    "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("watch and computed"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("姓名："),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"name"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])(" 城市："),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"city"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("个人信息：{{userInfo}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"template"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"data"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"city"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'北京'"),Object(a["createTextVNode"])("\n        }\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"watch"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"name"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"newValue, oldValue"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'watch name'"),Object(a["createTextVNode"])(", newValue, oldValue)\n        }\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"computed"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"userInfo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 有缓存"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" + "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"city"),Object(a["createTextVNode"])("\n        }\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getUserInfo"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 无缓存"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" + "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"city"),Object(a["createTextVNode"])("\n        }\n    },\n}\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])])])])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},c375:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"开始"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"组件化的介绍和使用"),Object(a["createElementVNode"])("li",null,"组件化的关键要素"),Object(a["createElementVNode"])("li",null,"组件化的实现流程以及关键技术"),Object(a["createElementVNode"])("li",null,"最后，再讲讲组件化和 MVVM 的区别")]),Object(a["createElementVNode"])("hr"),Object(a["createElementVNode"])("p",null,"先介绍：其实后端早就有了组件化，例如 smarty artTemplate 等，只不过后端的组件最终会拼接成一个完整的页面直接渲染，而不是前端渲染的方式。"),Object(a["createElementVNode"])("h1",null,"什么是组件化"),Object(a["createElementVNode"])("p",null,"其实组件化早就存在于开发过程中，如 smarty"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"别忘了做一个 React 的例子，照顾一下没用过 React 的学生")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("组件化的核心在于组件的封装。例如下面将"),Object(a["createElementVNode"])("code",null,"Todo"),Object(a["createTextVNode"])("组件封装起来，然后让外部直接引用。具体封装的是什么：")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"视图"),Object(a["createElementVNode"])("li",null,"数据"),Object(a["createElementVNode"])("li",null,"变化逻辑")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./input'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"List"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./list'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"props"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"super"),Object(a["createTextVNode"])("(props)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])(" = {\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": []\n    }\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"addTitle"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.addTitle.bind(this)}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"List"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.state.list}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"addTitle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"title"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" currentList = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setState"),Object(a["createTextVNode"])("({\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": currentList."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"concat"),Object(a["createTextVNode"])("(title)\n    })\n  }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(";\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./components/todo'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"Todo"),Object(a["createTextVNode"])("/>")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])(";\n")])]),Object(a["createElementVNode"])("p",null,"另外一个比较重要的就是数据，包括组件之间的，组件内部的。"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("父组件向子组件传递，使用 props ，例如"),Object(a["createElementVNode"])("code",null,"<List data={this.state.list}/>")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子组件向父组件传递，可通过传递函数的形式，将数据传递出来，例如"),Object(a["createElementVNode"])("code",null,"<Input addTitle={this.addTitle.bind(this)}/>")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("组件内部的数据管理，可以用 state ，"),Object(a["createElementVNode"])("code",null,"this.state = { list: [] }")])]),Object(a["createElementVNode"])("h1",null,"组件化 关键要素"),Object(a["createElementVNode"])("p",null,"React 是前端组件化框架的典型代表，就以 React 为例来分析组件化的要素。"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"另外现在比较占眼球的还有 PReact（ P 就是 Performance 的意思），这货是因为 React 协议的问题才被提上来，不过也有许多人开始用了。")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"jsx 本质"),Object(a["createElementVNode"])("li",null,"jsx 和 vdom 的关系"),Object(a["createElementVNode"])("li",null,"jsx 和自定义组件，以及组件的拼装（props）"),Object(a["createElementVNode"])("li",null,"setState 异步更新")]),Object(a["createElementVNode"])("p",null,"理解 React 最主要的核心就是 jsx 和 vdom ，两者相互关联，相辅相成。vdom 会再接下来统一去讲，先知道它如何使用即可。"),Object(a["createElementVNode"])("p",null,"组件和组件之间的拼接关系，props"),Object(a["createElementVNode"])("p",null,"另外，React 的 setState 是异步更新，这一点也要了解一下。"),Object(a["createElementVNode"])("hr"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("先看一下之前 demo 中"),Object(a["createElementVNode"])("code",null,"src/index.js"),Object(a["createTextVNode"])("的一个疑点，该文件中，代码从来没有使用"),Object(a["createElementVNode"])("code",null,"React"),Object(a["createTextVNode"])("这个变量，但是为何要"),Object(a["createElementVNode"])("code",null,"import React from 'react';"),Object(a["createTextVNode"])("？你删掉这一行会怎样？—— 肯定会报错。")]),Object(a["createElementVNode"])("p",null,"带着这个疑点，我们继续下面的内容"),Object(a["createElementVNode"])("h1",null,"jsx"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"先从 demo 中看一下什么是 JSX")]),Object(a["createElementVNode"])("h2",null,"jsx 语法"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"普通标签"),Object(a["createElementVNode"])("li",null,"引入 js 变量和表达式"),Object(a["createElementVNode"])("li",null,"if else"),Object(a["createElementVNode"])("li",null,"循环"),Object(a["createElementVNode"])("li",null,"style 和 className"),Object(a["createElementVNode"])("li",null,"事件")]),Object(a["createElementVNode"])("p",null,"（初始化一个空 React 开发环境，代码演示）"),Object(a["createElementVNode"])("h2",null,"答题"),Object(a["createElementVNode"])("p",null,"先来回答一下上一节提出的问题。"),Object(a["createElementVNode"])("p",null,"如果编写的 jsx 代码是这样的"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* JSX 代码 */"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" profile = "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n                "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"img"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"avatar.png"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"profile"'),Object(a["createTextVNode"])(" />")]),Object(a["createTextVNode"])("\n                "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"h3"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{[user.firstName, user.lastName].join(' ')}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"h3"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n              "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])(";\n")])]),Object(a["createElementVNode"])("p",null,"编译之后的结果是："),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 解析结果"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" profile = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"img"'),Object(a["createTextVNode"])(", { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"avatar.png"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"profile"'),Object(a["createTextVNode"])(" }),\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"h3"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(", [user."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"firstName"),Object(a["createTextVNode"])(", user."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"lastName"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"join"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'" "'),Object(a["createTextVNode"])("))\n);\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// React.createElement 参数说明"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div1'"),Object(a["createTextVNode"])("}, child1, child2, child3)\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div1'"),Object(a["createTextVNode"])("}, [...])\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("看明白了吧，js 代码中有了"),Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("，因此必须要"),Object(a["createElementVNode"])("code",null,"import React from 'react';")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"引入这个问题的目的"),Object(a["createTextVNode"])("：说明 jsx 是一个语法糖，它不能真正被浏览器执行，它需要编译为 js 。编译是在开发环境，项目发布之前就搞定的。因此，我们编写的 jsx 代码，会以 js 代码的形式上线、执行。")]),Object(a["createElementVNode"])("p",null,"其实你完全可以用下面的方式编写 React 代码，但是那样编写和阅读的复杂度都太高了，jsx 是一个非常好的创新。"),Object(a["createElementVNode"])("h2",null,"独立标准"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("jsx 虽然是从 React 中提出来的概念，但是它已经发展成了一个独立的语法，你完全可以将 jsx 的语法特性用于其他项目或者自己的项目。上面代码中的"),Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("完全可以替换成其他函数，例如 PReact 中替换为"),Object(a["createElementVNode"])("code",null,"h")]),Object(a["createElementVNode"])("p",null,"可以用 babel 编译试一下"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("创建一个目录，"),Object(a["createElementVNode"])("code",null,"npm init"),Object(a["createTextVNode"])(" ，然后创建一个"),Object(a["createElementVNode"])("code",null,"demo.jsx"),Object(a["createTextVNode"])("文件。")]),Object(a["createElementVNode"])("li",null,"全局安装 babel"),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"npm install --save-dev babel-plugin-transform-react-jsx --registry=https://registry.npm.taobao.org")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("创建"),Object(a["createElementVNode"])("code",null,".babelrc"),Object(a["createTextVNode"])(" ，内容"),Object(a["createElementVNode"])("code",null,'{ "plugins": ["transform-react-jsx"] }')]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("运行"),Object(a["createElementVNode"])("code",null,"babel --plugins transform-react-jsx demo.jsx"),Object(a["createTextVNode"])(" 可以看到结果，但是函数是"),Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("（默认情况下）")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("这里的"),Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("是可以修改的，例如在"),Object(a["createElementVNode"])("code",null,"demo.jsx"),Object(a["createTextVNode"])("第一行加入"),Object(a["createElementVNode"])("code",null,"/* @jsx $ */"),Object(a["createTextVNode"])(" （也可以通过配置"),Object(a["createElementVNode"])("code",null,".babelrc"),Object(a["createTextVNode"])("进行修改，但这不是重点）")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("再讲一下"),Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("各个参数的含义")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"第一个参数如果是字符串，即 html 标签的名字。如果是函数，即我们自己定义的组件"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("第二个参数是所有的属性，没有就传入"),Object(a["createElementVNode"])("code",null,"null")]),Object(a["createElementVNode"])("li",null,"第三个参数以及后面所有的参数，都是该组件的子元素。（也支持第三个参数是数组的形式）")]),Object(a["createElementVNode"])("h2",null,"生成 vdom"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" profile = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"img"'),Object(a["createTextVNode"])(", { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"avatar.png"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"profile"'),Object(a["createTextVNode"])(" }),\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"h3"'),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(", [user."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"firstName"),Object(a["createTextVNode"])(", user."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"lastName"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"join"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'" "'),Object(a["createTextVNode"])("))\n);\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("生成的是一个 vnode，例如")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("{\n  "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",\n  "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {},\n  "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n    {\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"avatar.png"'),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"profile"'),Object(a["createTextVNode"])("\n      },\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": []\n    },\n    {\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'h3'"),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"attrs"),Object(a["createTextVNode"])(": {},\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n        [user."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"firstName"),Object(a["createTextVNode"])(", user."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"lastName"),Object(a["createTextVNode"])("]."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"join"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'" "'),Object(a["createTextVNode"])(")\n      ]\n    }\n  ]\n}\n")])]),Object(a["createElementVNode"])("h2",null,"自定组件的处理"),Object(a["createElementVNode"])("p",null,"demo 中"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n  "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"addTitle"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.addTitle.bind(this)}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"List"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.state.list}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n);\n")])]),Object(a["createElementVNode"])("p",null,"最终生成"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Input"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"addTitle"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"addTitle"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"bind"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(")}),\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"List"),Object(a["createTextVNode"])(", {"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("})\n)\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("注意这里的"),Object(a["createElementVNode"])("code",null,"'div'"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"List")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"'div'"),Object(a["createTextVNode"])("很好理解，渲染一个"),Object(a["createElementVNode"])("code",null,"<div>"),Object(a["createTextVNode"])("就行了")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"Input"),Object(a["createTextVNode"])("和"),Object(a["createElementVNode"])("code",null,"List"),Object(a["createTextVNode"])("，不是常规的 html 标签，无法直接渲染。因此需要根据 props 创建实例，然后执行实例的 render 函数")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("例如"),Object(a["createElementVNode"])("code",null,"List"),Object(a["createTextVNode"])("的 render 函数是这样的")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/* List 组件的 render 函数 */"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" list = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"props"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n          {\n            list.map((item, index) => {\n                return "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{index}"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{item}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n            })\n          }\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n")])]),Object(a["createElementVNode"])("p",null,"经过编译之后，会得到"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" list = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"props"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"ul"'),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n        list."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item, index"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"li"'),Object(a["createTextVNode"])(",\n                { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": index },\n                item\n            );\n        })\n    );\n}\n")])]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("其实，"),Object(a["createElementVNode"])("code",null,"div"),Object(a["createTextVNode"])("等常规的 html 标签，在 React 看来也是一个组件，只不过它内置了而已。"),Object(a["createElementVNode"])("strong",null,"这块组件的抽象，应该放在前面，统一讲一下？？？")])]),Object(a["createElementVNode"])("h2",null,"分析 demo"),Object(a["createElementVNode"])("p",null,"分析一下 demo 中各个组件的 jsx 都生成了什么代码。"),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("code",null,"src/index.js")]),Object(a["createElementVNode"])("p",null,"源代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./App'"),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"ReactDOM"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"App"),Object(a["createTextVNode"])(" />")])]),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'root'"),Object(a["createTextVNode"])("));\n")])]),Object(a["createElementVNode"])("p",null,"编译完"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./App'"),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"ReactDOM"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])("), "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"document"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getElementById"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'root'"),Object(a["createTextVNode"])("));\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("上文提到过"),Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("返回的是一个 vnode ，这个 vnode 交给"),Object(a["createElementVNode"])("code",null,"ReactDOM.render"),Object(a["createTextVNode"])("去渲染，最终渲染到"),Object(a["createElementVNode"])("code",null,"document.getElementById('root')"),Object(a["createTextVNode"])("这个真是的 DOM 节点上。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("要渲染真是 DOM 肯定得对应到真实的 html 标签，这里的"),Object(a["createElementVNode"])("code",null,"App"),Object(a["createTextVNode"])("不行。因此得去初始化"),Object(a["createElementVNode"])("code",null,"App"),Object(a["createTextVNode"])("的实例，然后去执行 render 函数。")]),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("code",null,"src/app.js")]),Object(a["createElementVNode"])("p",null,"源代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./components/todo'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"Todo"),Object(a["createTextVNode"])("/>")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,"编译完成后"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./components/todo'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n      "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div"'),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(")\n    );\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("同理，"),Object(a["createElementVNode"])("code",null,"Todo"),Object(a["createTextVNode"])("也需要创建示例且执行 render 函数")]),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("code",null,"src/components/todo/index.js")]),Object(a["createElementVNode"])("p",null,"源代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./input'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"List"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./list'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"addTitle"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.addTitle.bind(this)}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"List"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.state.list}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,"编译完之后"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./input'"),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"List"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./list'"),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Todo"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n      "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Input"),Object(a["createTextVNode"])(", { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"addTitle"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"addTitle"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"bind"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(") }),\n      "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"List"),Object(a["createTextVNode"])(", { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])(" })\n    );\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("同理，"),Object(a["createElementVNode"])("code",null,"Input"),Object(a["createTextVNode"])("和"),Object(a["createElementVNode"])("code",null,"List"),Object(a["createTextVNode"])("都需要创建实例（"),Object(a["createElementVNode"])("strong",null,"注意，创建实例要传入 props ，上面的 props 都是 null ，因此没强调"),Object(a["createTextVNode"])("），然后执行 render 函数")]),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("code",null,"src/components/todo/input/index.js")]),Object(a["createElementVNode"])("p",null,"源代码"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.state.title}"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"onChange"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.changeHandle.bind(this)}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n          "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"onClick"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.clickHandle.bind(this)}"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,"编译完之后"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Component"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n      "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div"'),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"input"'),Object(a["createTextVNode"])(", { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"onChange"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"changeHandle"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"bind"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(") }),\n      "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"button"'),Object(a["createTextVNode"])(",\n        { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"onClick"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"clickHandle"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"bind"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(") },\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"submit"'),Object(a["createTextVNode"])("\n      )\n    );\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("到此为止，就全部都是标准的 html 标签了。"),Object(a["createElementVNode"])("strong",null,"你无论自定义了多少层组件，归根结底都需要 html 标签来实现，关键是这个结构和过程要明白"),Object(a["createTextVNode"])("。")]),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("code",null,"src/components/todo/list/index.js")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("例如"),Object(a["createElementVNode"])("code",null,"List"),Object(a["createTextVNode"])("的 render 函数是这样的")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" list = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"props"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n          {\n            list.map((item, index) => {\n                return "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{index}"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{item}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n            })\n          }\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n")])]),Object(a["createElementVNode"])("p",null,"经过编译之后，会得到"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" list = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"props"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"ul"'),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(",\n        list."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"map"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"item, index"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"React"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"createElement"),Object(a["createTextVNode"])("(\n                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"li"'),Object(a["createTextVNode"])(",\n                { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": index },\n                item\n            );\n        })\n    );\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("这里"),Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("第三个参数是数组，也可以被识别为子元素")]),Object(a["createElementVNode"])("h3",null,[Object(a["createTextVNode"])("回到"),Object(a["createElementVNode"])("code",null,"src/index.js")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("虽然"),Object(a["createElementVNode"])("code",null,"src/index.js"),Object(a["createTextVNode"])("看似只有"),Object(a["createElementVNode"])("code",null,"React.createElement(App, null)"),Object(a["createTextVNode"])("，但是经过后面的分析，可以发现它展开之后，其实是一个有很多子节点的 vnode ，因为我们定义的很多子组件。")]),Object(a["createElementVNode"])("p",null,"最终这个 vnode 还是被渲染到了页面指定的地方，生成了视图。"),Object(a["createElementVNode"])("h1",null,"setState"),Object(a["createElementVNode"])("p",null,"如果从网上搜索 React setState 的文章，可能会搜出很多高大上的内容，看半天看不懂。其实 setState 就一个核心的特点——异步。"),Object(a["createElementVNode"])("h2",null,"rerender"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("rerender 的触发一般来自于"),Object(a["createElementVNode"])("code",null,"setState"),Object(a["createTextVNode"])("即修改状态，拿"),Object(a["createElementVNode"])("code",null,"src/components/todo/index.js"),Object(a["createTextVNode"])("看")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"addTitle"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"title"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" currentList = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setState"),Object(a["createTextVNode"])("({\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": currentList."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"concat"),Object(a["createTextVNode"])("(title)\n    })\n  }\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"list"),Object(a["createTextVNode"])("被修改，即"),Object(a["createElementVNode"])("code",null,"state"),Object(a["createTextVNode"])("被修改，会重新触发"),Object(a["createElementVNode"])("code",null,"render"),Object(a["createTextVNode"])("函数，生成新的 vnode。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createTextVNode"])("  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" (\n      "),Object(a["createElementVNode"])("span",{class:"language-xml"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"Input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"addTitle"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.addTitle.bind(this)}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"List"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},"{this.state.list}/"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")])]),Object(a["createTextVNode"])("\n    );\n  }\n")])]),Object(a["createElementVNode"])("p",null,"新的 vnode 和之前初始化时候生成的 vnode 节点进行对比，即 diff 算法，然后按需重新渲染 dom 。"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,"需要注意的是，哪个组件的 state 被修改，就执行相应的 render 即可。其子组件肯定会受影响，但是其父组件不会受影响，这样就将影响范围收缩到最小。")]),Object(a["createElementVNode"])("h2",null,"异步"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("如果同时执行多次"),Object(a["createElementVNode"])("code",null,"setState"),Object(a["createTextVNode"])("，那么会不会每次都来一遍 rerender ？—— 肯定不会，因为：")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"没必要。一次执行多次 rerender ，中间执行的过程用户是看不到的，用户看到的只是最后的结果"),Object(a["createElementVNode"])("li",null,"性能问题。js 本来就单线程，而且 js 执行和 dom 渲染是互斥的，即 dom 渲染过程中 js 处于卡顿状态")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("因此，"),Object(a["createElementVNode"])("code",null,"setState"),Object(a["createTextVNode"])("是异步的，无论你一次性执行多少遍"),Object(a["createElementVNode"])("code",null,"setState"),Object(a["createTextVNode"])("，它都会先进入一个异步队列，当主线程的 js 执行完毕之后，再去统一执行异步队列的内容。这个过程完全符合此前讲的 js 异步的执行原理")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"enqueueRender"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"component"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!component."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__d"),Object(a["createTextVNode"])(" && (component."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__d"),Object(a["createTextVNode"])(" = !"),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])(") && "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(" == items."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(component)) (options."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"debounceRendering"),Object(a["createTextVNode"])(" || defer)(rerender);\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"setState"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"state, callback"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" s = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"state"),Object(a["createTextVNode"])(";\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__s"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__s"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"extend"),Object(a["createTextVNode"])("({}, s);\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"extend"),Object(a["createTextVNode"])("(s, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'function'"),Object(a["createTextVNode"])(" == "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" state ? "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"state"),Object(a["createTextVNode"])("(s, "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"props"),Object(a["createTextVNode"])(") : state);\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (callback) ("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__h"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__h"),Object(a["createTextVNode"])(" || [])."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(callback);\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"enqueueRender"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(");\n}\n")])]),Object(a["createElementVNode"])("h1",null,"组件化 总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"首先理解什么是组件化，从 smarty 到 React"),Object(a["createElementVNode"])("li",null,"组件化的核心就是封装和复用"),Object(a["createElementVNode"])("li",null,"jsx 的本质，最终会编译成 js 代码"),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"React.createElement"),Object(a["createTextVNode"])("函数，以及最后会返回 vnode 节点")]),Object(a["createElementVNode"])("li",null,"根据 demo 理解组件的组合过程"),Object(a["createElementVNode"])("li",null,"setState 如何 rerender ，以及异步的特性")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},c680:function(e,t,c){},c982:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"手写 LRU"),Object(a["createElementVNode"])("h3",null,"用 JS 实现一个 LRU 缓存"),Object(a["createElementVNode"])("h2",null,"LRU 使用"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("Least Recently Used 最近最少使用"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 即淘汰掉最近最少使用的数据，只保留最近经常使用的资源。它是一个固定容量的缓存容器。")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" lruCache = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"LRUCache"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])("); "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 最大缓存长度 2"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("); "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 缓存是 {1=1}"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])("); "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 缓存是 {1=1, 2=2}"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(");    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回 1"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])("); "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 该操作会使得关键字 2 作废，缓存是 {1=1, 3=3}"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(");    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回 null"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"4"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"4"),Object(a["createTextVNode"])("); "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 该操作会使得关键字 1 作废，缓存是 {4=4, 3=3}"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(");    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回 null"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(");    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回 3"),Object(a["createTextVNode"])("\nlruCache."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"4"),Object(a["createTextVNode"])(");    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 返回 4"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"分析"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("哈希表，即 "),Object(a["createElementVNode"])("code",null,"{ k1: v1, k2: v2, ... }"),Object(a["createTextVNode"])(" 形式。可以 "),Object(a["createElementVNode"])("code",null,"O(1)"),Object(a["createTextVNode"])(" 事件复杂度存取 "),Object(a["createElementVNode"])("code",null,"key"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"value")]),Object(a["createElementVNode"])("li",null,"有序。可以根据最近使用情况清理缓存")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("JS 内置的数据结构类型 "),Object(a["createElementVNode"])("code",null,"Object"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Array"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Set"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"Map"),Object(a["createTextVNode"])(" ，恰好 "),Object(a["createElementVNode"])("code",null,"Map"),Object(a["createTextVNode"])(" 符合这两条要求")]),Object(a["createElementVNode"])("h2",null,"Map 是有序的"),Object(a["createElementVNode"])("p",null,"Map 有序，Object 无序"),Object(a["createElementVNode"])("h2",null,"实现"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"LRUCache"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"length"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"number"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("> = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Map"),Object(a["createTextVNode"])("()\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("length: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"number")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (length < "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"throw"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Error"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'invalid length'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" = length\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("key: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", value: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" data = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"has"),Object(a["createTextVNode"])("(key)) {\n            data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"delete"),Object(a["createTextVNode"])("(key)\n        }\n        data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("(key, value)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (data."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"size"),Object(a["createTextVNode"])(" > "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 如果超出了容量，则删除 Map 最老的元素"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" delKey = data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"keys"),Object(a["createTextVNode"])("()."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"next"),Object(a["createTextVNode"])("()."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])("\n            data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"delete"),Object(a["createTextVNode"])("(delKey)\n        }\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" data = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"has"),Object(a["createTextVNode"])("(key)) "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" value = data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("(key)\n\n        data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"delete"),Object(a["createTextVNode"])("(key)\n        data."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("(key, value)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" value\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const lruCache = new LRUCache(2)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set(1, 1) // {1=1}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set(2, 2) // {1=1, 2=2}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get(1)) // 1 {2=2, 1=1}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set(3, 3) // {1=1, 3=3}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get(2)) // null"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set(4, 4) // {3=3, 4=4}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get(1)) // null"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get(3)) // 3 {4=4, 3=3}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get(4)) // 4 {3=3, 4=4}"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("注意，"),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])(" 时都要把操作数据移动到 Map 最新的位置。")]),Object(a["createElementVNode"])("h2",null,"扩展"),Object(a["createElementVNode"])("p",null,"实际项目中可以使用第三方 lib"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"https://www.npmjs.com/package/quick-lru"),Object(a["createElementVNode"])("li",null,"https://www.npmjs.com/package/lru-cache"),Object(a["createElementVNode"])("li",null,"https://www.npmjs.com/package/tiny-lru"),Object(a["createElementVNode"])("li",null,"https://www.npmjs.com/package/mnemonist")]),Object(a["createElementVNode"])("h2",null,"连环问：不用 Map 如何实现 LRU cache ？"),Object(a["createElementVNode"])("p",null,"LRU cache 是很早就有的算法，而 Map 仅仅是这几年才加入的 ES 语法。"),Object(a["createElementVNode"])("h3",null,"使用 Object 和 Array"),Object(a["createElementVNode"])("p",null,"根据上文的分析，两个条件"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("哈希表，可以用 "),Object(a["createElementVNode"])("code",null,"Object"),Object(a["createTextVNode"])(" 实现")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("有序，可以用 "),Object(a["createElementVNode"])("code",null,"Array"),Object(a["createTextVNode"])(" 实现")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 执行 lru.set('a', 1) lru.set('b', 2) lru.set('c', 3) 后的数据"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj1 = { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'a'"),Object(a["createTextVNode"])(" }\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj2 = { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'b'"),Object(a["createTextVNode"])(" }\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" obj3 = { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"3"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'c'"),Object(a["createTextVNode"])(" }\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" data = [obj1, obj2, obj3]\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" map = { "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'a'"),Object(a["createTextVNode"])(": obj1, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'b'"),Object(a["createTextVNode"])(": obj2, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'c'"),Object(a["createTextVNode"])(": obj3 }\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("模拟 "),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])(" 操作，会发现几个问题，都来自于数组")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("超出 cache 容量时，要移除最早的元素，数组 "),Object(a["createElementVNode"])("code",null,"shift"),Object(a["createTextVNode"])(" 效率低")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("每次 "),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])(" 时都要把当前元素移动到最新的位置，数组 "),Object(a["createElementVNode"])("code",null,"splice"),Object(a["createTextVNode"])(" 效率低")])]),Object(a["createElementVNode"])("h3",null,"Array 改为双向链表"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("数组有问题，就需要使用新的数据结构 "),Object(a["createElementVNode"])("strong",null,"双向链表")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Interface"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"INode"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("\n    next?: "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"INode"),Object(a["createTextVNode"])("\n    prev?: "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"INode"),Object(a["createTextVNode"])("\n}\n")])]),Object(a["createElementVNode"])("p",null,"双向链表可以快速移动元素。末尾新增元素 D 很简单，开头删除 A 元素也很简单。"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%89%8B%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/img/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8-1.png",alt:""})]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("要把中间的元素 B 移动到最后（如 LRU "),Object(a["createElementVNode"])("code",null,"set"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"get"),Object(a["createTextVNode"])(" 时移动数据位置），只需要修改前后的指针即可，效率很高。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%89%8B%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/img/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8-2.png",alt:""})]),Object(a["createElementVNode"])("h3",null,"实现"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"interface"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"IListNode"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"value"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 存储 key ，方便删除（否则删除时就需要遍历 this.data )"),Object(a["createTextVNode"])("\n    prev?: "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"IListNode"),Object(a["createTextVNode"])("\n    next?: "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"IListNode"),Object(a["createTextVNode"])("\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"LRUCache"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"length"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"number"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": { ["),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])("]: "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"IListNode"),Object(a["createTextVNode"])(" } = {}\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"dataLength"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"number"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"0"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"listHead"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"IListNode"),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"listTail"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"IListNode"),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("length: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"number")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (length < "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"throw"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Error"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'invalid length'"),Object(a["createTextVNode"])(")\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(" = length\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"moveToTail"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"curNode: IListNode"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" tail = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listTail"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (tail === curNode) "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// -------------- 1. 让 prevNode nextNode 断绝与 curNode 的关系 --------------"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" prevNode = curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"prev"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" nextNode = curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"next"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (prevNode) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (nextNode) {\n                prevNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"next"),Object(a["createTextVNode"])(" = nextNode\n            } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" prevNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"next"),Object(a["createTextVNode"])("\n            }\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (nextNode) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (prevNode) {\n                nextNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"prev"),Object(a["createTextVNode"])(" = prevNode\n            } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" nextNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"prev"),Object(a["createTextVNode"])("\n            }\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listHead"),Object(a["createTextVNode"])(" === curNode) "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listHead"),Object(a["createTextVNode"])(" = nextNode\n        }\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// -------------- 2. 让 curNode 断绝与 prevNode nextNode 的关系 --------------"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"prev"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"next"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// -------------- 3. 在 list 末尾重新建立 curNode 的新关系 --------------"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (tail) {\n            tail."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"next"),Object(a["createTextVNode"])(" = curNode\n            curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"prev"),Object(a["createTextVNode"])(" = tail\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listTail"),Object(a["createTextVNode"])(" = curNode\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"tryClean"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"while"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"dataLength"),Object(a["createTextVNode"])(" > "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"length"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" head = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listHead"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (head == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"throw"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Error"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'head is null'"),Object(a["createTextVNode"])(")\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" headNext = head."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"next"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (headNext == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"throw"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Error"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'headNext is null'"),Object(a["createTextVNode"])(")\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 1. 断绝 head 和 next 的关系"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" headNext."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"prev"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" head."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"next"),Object(a["createTextVNode"])("\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 2. 重新赋值 listHead"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listHead"),Object(a["createTextVNode"])(" = headNext\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 3. 清理 data ，重新计数"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("[head."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"key"),Object(a["createTextVNode"])("]\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"dataLength"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"dataLength"),Object(a["createTextVNode"])(" - "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])("\n        }\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"get"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"key"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(" {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" data = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" curNode = data[key]\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (curNode == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listTail"),Object(a["createTextVNode"])(" === curNode) {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 本身在末尾（最新鲜的位置），直接返回 value"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])("\n        }\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// curNode 移动到末尾"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"moveToTail"),Object(a["createTextVNode"])("(curNode)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])("\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"set"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("key: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(", value: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" data = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" curNode = data[key]\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (curNode == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 新增数据"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"newNode"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"IListNode"),Object(a["createTextVNode"])(" = { key, value }\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 移动到末尾"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"moveToTail"),Object(a["createTextVNode"])("(newNode)\n\n            data[key] = newNode\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"dataLength"),Object(a["createTextVNode"])("++\n\n            "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"dataLength"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"listHead"),Object(a["createTextVNode"])(" = newNode\n        } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"else"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 修改现有数据"),Object(a["createTextVNode"])("\n            curNode."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"value"),Object(a["createTextVNode"])(" = value\n            "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 移动到末尾"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"moveToTail"),Object(a["createTextVNode"])("(curNode)\n        }\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 尝试清理长度"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"tryClean"),Object(a["createTextVNode"])("()\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// const lruCache = new LRUCache(2)"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set('1', 1) // {1=1}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set('2', 2) // {1=1, 2=2}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get('1')) // 1 {2=2, 1=1}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set('3', 3) // {1=1, 3=3}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get('2')) // null"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// lruCache.set('4', 4) // {3=3, 4=4}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get('1')) // null"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get('3')) // 3 {4=4, 3=3}"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.info(lruCache.get('4')) // 4 {3=3, 4=4}"),Object(a["createTextVNode"])("\n\n")])]),Object(a["createElementVNode"])("p",null,"注意事项"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("数据结构如何定义，"),Object(a["createElementVNode"])("code",null,"data"),Object(a["createTextVNode"])(" 和链表分别存储什么")]),Object(a["createElementVNode"])("li",null,"双向链表的操作（非常繁琐，写代码很容易出错，逻辑一定要清晰！！！）"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("链表 "),Object(a["createElementVNode"])("code",null,"node"),Object(a["createTextVNode"])(" 中要存储 "),Object(a["createElementVNode"])("code",null,"data.key"),Object(a["createTextVNode"])(" ，否则删除 "),Object(a["createElementVNode"])("code",null,"data"),Object(a["createTextVNode"])(" 需要遍历、效率低")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},cd49:function(e,t,c){"use strict";c.r(t);c("e260"),c("e6cf"),c("cca6"),c("a79d");var a=c("7a23"),l=(c("ac1f"),c("00b4"),c("6c02")),s=c("5502"),n=c("873f"),r=function(e){return Object(a["pushScopeId"])("data-v-8d4e7f96"),e=e(),Object(a["popScopeId"])(),e},o={class:"navibar"},j={class:"nav-logo"},d={class:"nav-input"},b=r((function(){return Object(a["createElementVNode"])("svg",{viewBox:"0 0 1024 1024"},[Object(a["createElementVNode"])("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328 192 413.952zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576z"})],-1)})),O=[b],N=Object(a["defineComponent"])({setup:function(e){var t=Object(l["d"])(),c=Object(l["c"])(),r=Object(s["b"])(),b=/^\/article\/\d+$/,N=function(){r.dispatch("updateArticleId",{id:""}),t.push({path:"/"})},V=function(e){r.dispatch("updateArticleId",{id:e}),e&&(b.test(c.path)?r.dispatch("updateArticleMd",{id:e}):t.push({path:"/article/"+e}))};return function(e,t){var l=Object(a["resolveComponent"])("el-image"),s=Object(a["resolveComponent"])("el-option"),b=Object(a["resolveComponent"])("el-select");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",j,[Object(a["createVNode"])(l,{src:"https://avatars.githubusercontent.com/u/11586598?v=4"})]),Object(a["createElementVNode"])("div",d,["/"===Object(a["unref"])(c).path?(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:0,modelValue:Object(a["unref"])(r).state.articleId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(a["unref"])(r).state.articleId=e}),class:"m-2 input",placeholder:"Search or jump to…",size:"small",clearable:"",filterable:"","suffix-icon":"",onChange:V},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object(a["unref"])(n["a"]),(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.id,label:e.title,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("i",{class:"el-icon home-icom",onClick:t[1]||(t[1]=function(e){return N()})},O)])}}}),V=(c("27d4"),c("d959")),m=c.n(V);const p=m()(N,[["__scopeId","data-v-8d4e7f96"]]);var E=p,h={class:"app-container"},x={class:"my-header"},T={class:"my-main"},i=Object(a["defineComponent"])({setup:function(e){return function(e,t){var c=Object(a["resolveComponent"])("el-affix"),l=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",h,[Object(a["createVNode"])(c,null,{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",x,[Object(a["createVNode"])(E)])]})),_:1}),Object(a["createElementVNode"])("div",T,[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])((function(t){var c=t.Component;return[e.$route.meta.keepAlive?(Object(a["openBlock"])(),Object(a["createBlock"])(a["KeepAlive"],{key:0},[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(c)))],1024)):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(c),{key:1}))]})),_:1})])])}}});c("995c"),c("9541");const u=i;var g=u,f=c("afbc"),y=c("1da1"),v=(c("96cf"),c("e6b8")),_=Object(s["a"])({state:{articleMd:"",articleId:""},mutations:{UPDATE_ARTICLE_MD:function(e,t){e.articleMd=t.md},UPDATE_ARTICLE_ID:function(e,t){e.articleId=t.id}},actions:{updateArticleMd:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function c(){var a,l,s;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(a=e.commit,l=t.id,!l){c.next=7;break}return c.next=5,Object(v["a"])(l);case 5:s=c.sent,a("UPDATE_ARTICLE_MD",{md:s});case 7:case"end":return c.stop()}}),c)})))()},updateArticleId:function(e,t){var c=e.commit,a=t.id;c("UPDATE_ARTICLE_ID",{id:a})}},modules:{}}),k=c("c3a1"),w=c("c1a0");c("7437");f["a"].beforeEach(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t,c,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a();case 1:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}());var S=c("ee2d"),C=c.n(S),A=(c("fefe"),c("19b3")),M=c.n(A),B=(c("fd0f"),c("02c6")),I=c.n(B),$=(c("8966"),c("8c7a")),D=c.n($),L=(c("f393"),c("8009"),c("cb55"),c("6cf3"),c("416b"),c("6605"),c("5c81"),c("6917")),P=c.n(L),R=(c("a955"),c("587d")),q=c.n(R),H=c("059a"),J=c.n(H),z=(c("9a38"),c("07e7")),F=c.n(z),U=(c("41c1"),c("b649")),G=c.n(U);C.a.use(I.a,{Prism:D.a,extend:function(e){}}),C.a.use(F()()),C.a.use(P()()),C.a.use(q()()),C.a.use(J()()),C.a.use(G()()),M.a.use(I.a,{Prism:D.a,extend:function(e){}}),M.a.use(F()()),M.a.use(P()()),M.a.use(q()()),M.a.use(J()()),M.a.use(G()());var Q=Object(a["createApp"])(g);Q.use(_),Q.use(f["a"]),Q.use(k["a"],{locale:w["a"]}),Q.use(C.a),Q.use(M.a),Q.mount("#app")},d0c9:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"DOM 转 VDOM"),Object(a["createElementVNode"])("h2",null,"问题"),Object(a["createElementVNode"])("p",null,"讲以下 DOM 结构转换为 vnode 数据"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"div1"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"style"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"border: 1px solid #ccc; padding: 10px;"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("一行文字"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"a"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"href"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"xxx.html"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"target"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"_blank"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("链接"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"a"),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"p"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"img"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"xxx.png"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"alt"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"图片"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"class"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"image"'),Object(a["createTextVNode"])("/>")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"clickHandler"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("点击"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"答案"),Object(a["createElementVNode"])("p",null,"vdom 就是用 JS 对象的形式来表示 DOM 结构。vnode 即对应着 DOM 结构的一个 node 节点。"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" vnode = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// <div>"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'div1'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"style"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'border'"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'1px solid #ccc'"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'padding'"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'10px'"),Object(a["createTextVNode"])("\n        }\n    },\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'p'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// <p>"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {},\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": [\n                "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'一行文字'"),Object(a["createTextVNode"])(",\n                {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'a'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// <a>"),Object(a["createTextVNode"])("\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"href"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx.html'"),Object(a["createTextVNode"])(",\n                        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"target"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'_blank'"),Object(a["createTextVNode"])("\n                    },\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'链接'"),Object(a["createTextVNode"])("]\n                }\n            ]\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'img'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// <img>"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"className"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'image'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注意，这里要用 className"),Object(a["createTextVNode"])("\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'xxx.png'"),Object(a["createTextVNode"])(",\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"alt"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'图片'"),Object(a["createTextVNode"])("\n            }\n        },\n        {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tag"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'button'"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// <button>"),Object(a["createTextVNode"])("\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"events"),Object(a["createTextVNode"])(": {\n                    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"click"),Object(a["createTextVNode"])(": clickHandler\n                }\n            }\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"children"),Object(a["createTextVNode"])(": ["),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'点击'"),Object(a["createTextVNode"])("]\n        }\n    ]\n}\n")])]),Object(a["createElementVNode"])("h2",null,"注意事项"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("vdom 结构没有固定的标准，例如 "),Object(a["createElementVNode"])("code",null,"tag"),Object(a["createTextVNode"])(" 可以改为 "),Object(a["createElementVNode"])("code",null,"name"),Object(a["createTextVNode"])(" ，"),Object(a["createElementVNode"])("code",null,"data"),Object(a["createTextVNode"])(" 可以改为 "),Object(a["createElementVNode"])("code",null,"props"),Object(a["createTextVNode"])(" 。只要能合理使用 JS 数据表达 DOM 即可。")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"style"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"events"),Object(a["createTextVNode"])(" 要以对象的形式，更易读，更易扩展")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"class"),Object(a["createTextVNode"])(" 是 ES 内置关键字，要改为 "),Object(a["createElementVNode"])("code",null,"className"),Object(a["createTextVNode"])(" 。其他的还有如 "),Object(a["createElementVNode"])("code",null,"for"),Object(a["createTextVNode"])(" 改为 "),Object(a["createElementVNode"])("code",null,"htmlFor")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},d3de:function(e,t,c){var a={"./fe-interview/mvvm/mvvm-render.md":"5d2a","./fe-interview/mvvm/mvvm-响应式.md":"5fdf","./fe-interview/mvvm/mvvm-模板解析.md":"283d","./fe-interview/mvvm/mvvm关键要素.md":"f77a","./fe-interview/mvvm/mvvm实现流程.md":"67cc","./fe-interview/mvvm/什么是mvvm.md":"b9f2","./fe-interview/vdom/Jquery与vue的区别.md":"443a","./fe-interview/vdom/diff算法.md":"6ec9","./fe-interview/vdom/dom转vdom.md":"d0c9","./fe-interview/vdom/vdom.md":"57da","./fe-interview/vdom/组件化.md":"c375","./fe-interview/基础知识/ES6.md":"52de","./fe-interview/基础知识/HTMLCollection-NodeList-区别.md":"6b6f","./fe-interview/基础知识/JS严格模式.md":"5c18","./fe-interview/基础知识/JS原型.md":"9cda","./fe-interview/基础知识/JS异步.md":"24a9","./fe-interview/基础知识/TCP三次握手四次挥手.md":"55eb","./fe-interview/基础知识/ajax-fetch-axios-区别.md":"2c5d","./fe-interview/基础知识/for-in和for-of的区别.md":"3d56","./fe-interview/基础知识/offsetHeight-scrollHeight-clientHeight-区别.md":"00af","./fe-interview/基础知识/options请求.md":"bd6f","./fe-interview/基础知识/vue-computed-watch-区别.md":"c264","./fe-interview/基础知识/vuex-action-mutation-区别.md":"0ef6","./fe-interview/基础知识/vue组件通讯.md":"f9e4","./fe-interview/基础知识/你目前有和不足_hide.md":"bb7a","./fe-interview/基础知识/如何做code-review.md":"9808","./fe-interview/基础知识/如何学习一门新语言.md":"da1b","./fe-interview/基础知识/箭头函数的缺点.md":"3fb8","./fe-interview/基础知识/节流和防抖.md":"b292","./fe-interview/实际工作遇到的一些总结/element-ui的Cascader级联选择器将选择的node节点数组转化为树.md":"0910","./fe-interview/实际工作遇到的一些总结/vue2子组件封装时去掉最外层的包裹标签.md":"63f3","./fe-interview/实际工作遇到的一些总结/vue_element_Cascader的级联选择器的子级全选则传父级_子级未全选则传子级.md":"d422","./fe-interview/手写高质量代码/array-flatten.md":"2eb0","./fe-interview/手写高质量代码/curry-add.md":"1aae","./fe-interview/手写高质量代码/手写LRU.md":"c982","./fe-interview/手写高质量代码/手写bind函数.md":"eaf3","./fe-interview/手写高质量代码/手写event-bus.md":"6df7","./fe-interview/手写高质量代码/手写instanceof.md":"696e","./fe-interview/手写高质量代码/手写lazyman.md":"f87f","./fe-interview/手写高质量代码/手写new.md":"bdac","./fe-interview/手写高质量代码/深拷贝.md":"8e7c","./fe-interview/手写高质量代码/类型判断.md":"54af","./fe-interview/手写高质量代码/遍历DOM树.md":"69e2","./fe-interview/框架_vue_react/微服务通信.md":"ffff","./fe-interview/移动端/h5和客户端.md":"7cb0","./fe-interview/移动端/px-em-rem-vw-vh-区别.md":"7d6e"};function l(e){var t=s(e);return c(t)}function s(e){if(!c.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}l.keys=function(){return Object.keys(a)},l.resolve=s,e.exports=l,l.id="d3de"},d422:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h2",null,"vue element Cascader 级联选择器 子级全选则传父级, 子级未全选则传子级"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("需求: 级联选择器中 子级全选则传父级key, 子级未全选则传子级key "),Object(a["createElementVNode"])("code",null,"element Cascader"),Object(a["createTextVNode"])(" 级联选择器 中有一个方法: "),Object(a["createElementVNode"])("code",null,"getCheckedNodes()")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"let"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"CheckedNodes"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$refs"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"region"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getCheckedNodes"),Object(a["createTextVNode"])("()\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"CheckedNodes"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"CheckedNodes"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"filter"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"option"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" !(option."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"parent"),Object(a["createTextVNode"])(" && option."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"parent"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"checked"),Object(a["createTextVNode"])("))\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("其中 "),Object(a["createElementVNode"])("code",null,"this.$refs.region"),Object(a["createTextVNode"])(" 是对应赋予 "),Object(a["createElementVNode"])("code",null,"Cascader"),Object(a["createTextVNode"])(" 组件的 "),Object(a["createElementVNode"])("code",null,"ref"),Object(a["createTextVNode"])(" 名")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("通过 "),Object(a["createElementVNode"])("code",null,"getCheckedNodes()"),Object(a["createTextVNode"])(" 方法, 可以获取所有已勾选的节点")]),Object(a["createElementVNode"])("p",null,"已知条件: 当父级勾选, 子级必定全选, 子级未全选, 则父级为不勾选状态"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("那么后面的 "),Object(a["createElementVNode"])("code",null,"filter"),Object(a["createTextVNode"])(" 方法中过滤条件的是 : !(父级存在 且 父级的勾选状态为true), 取反.")]),Object(a["createElementVNode"])("p",null,"个人理解: 当父级不存在或父级的勾选状态为false时, 保留该节点.")])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},da1b:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createStaticVNode"])("<html><head></head><body><h1>学习新语言</h1><p>如何学习一门新语言，需要考虑哪些方面？</p><h2>分析</h2><p>考察你的学习能力和习惯，有没有在学习中积累到经验和方法论。毕竟，前端需要学习的东西太多了。</p><h2>答案</h2><ul><li>应用场景和优势 —— 存在的价值</li><li>语法（变量和常量，数据类型，运算符，函数等）</li><li>内置 API</li><li>第三方库和框架</li><li>开发环境和调试工具</li><li>线上环境和发布过程</li></ul></body></html>",1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},e6b8:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));var a=c("1da1"),l=(c("96cf"),c("7db0"),c("d3b7"),c("d9e2"),c("bc3a")),s=c.n(l),n=c("873f"),r="https://sunny586.github.io/dist";function o(e){return j.apply(this,arguments)}function j(){return j=Object(a["a"])(regeneratorRuntime.mark((function e(t){var c,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=n["a"].find((function(e){return e.id===+t})),c){e.next=3;break}return e.abrupt("return",new Error("模板id不存在，请检查"));case 3:return e.next=5,s.a.get(r+c.url);case 5:if(a=e.sent,l=a.data,l){e.next=9;break}throw new Error("根据模板id找不到markdown, 请检查!");case 9:return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}},eaf3:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"手写函数 bind"),Object(a["createElementVNode"])("h2",null,"bind 应用"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"返回一个新的函数（旧函数不会更改）"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("绑定 "),Object(a["createElementVNode"])("code",null,"this"),Object(a["createTextVNode"])(" 和部分参数")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("箭头函数，无法改变 "),Object(a["createElementVNode"])("code",null,"this"),Object(a["createTextVNode"])(" ，只能改变参数")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b, c"),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(", a, b, c)\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" fn1 = fn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"bind"),Object(a["createTextVNode"])("({ "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"x"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(" })\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn1"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// {x: 100} 10 20 30"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" fn2 = fn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"bind"),Object(a["createTextVNode"])("({ "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"x"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(" }, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(")\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn2"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// {x: 100} 1 2 10 （注意第三个参数变成了 10）"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// window 10 20 30 （旧函数不变）"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"解答"),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Function"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"myBind"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("context: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", ...bindArgs: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// context 是 bind 传入的 this"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// bindArgs 是 bind 传入的各个参数"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" self = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 当前的函数本身"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("...args: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 拼接参数"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" newArgs = bindArgs."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"concat"),Object(a["createTextVNode"])("(args)\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" self."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"apply"),Object(a["createTextVNode"])("(context, newArgs)\n  }\n}\n")])]),Object(a["createElementVNode"])("p",null,"要点"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"返回新函数"),Object(a["createElementVNode"])("li",null,"拼接参数（bind 参数 + 执行参数）"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("重新绑定 "),Object(a["createElementVNode"])("code",null,"this")])]),Object(a["createElementVNode"])("h2",null,"扩展：手写函数 call 和 apply"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"bind"),Object(a["createTextVNode"])(" 生成新函数，暂不执行。而 "),Object(a["createElementVNode"])("code",null,"call"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("code",null,"apply"),Object(a["createTextVNode"])(" 会直接立即执行函数")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("重新绑定 "),Object(a["createElementVNode"])("code",null,"this"),Object(a["createTextVNode"])(" （箭头函数不支持）")]),Object(a["createElementVNode"])("li",null,"传入参数")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"fn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"a, b, c"),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(", a, b, c)\n}\nfn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"call"),Object(a["createTextVNode"])("({ "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"x"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(" }, "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])(")\nfn."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"apply"),Object(a["createTextVNode"])("({ "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"x"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"100"),Object(a["createTextVNode"])(" }, ["),Object(a["createElementVNode"])("span",{class:"hljs-number"},"10"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"20"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"30"),Object(a["createTextVNode"])("])\n")])]),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Function"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"myCall"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("context: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", ...args: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[]")]),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (context == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") context = globalThis\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" context !== "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'object'"),Object(a["createTextVNode"])(") context = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("(context) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 值类型，变为对象"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" fnKey = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Symbol"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 不会出现属性名称的覆盖"),Object(a["createTextVNode"])("\n  context[fnKey] = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// this 就是当前的函数"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" res = context[fnKey](...args) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 绑定了 this"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" context[fnKey] "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 清理掉 fn ，防止污染"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" res\n}\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Function"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"myApply"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("context: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])(", args: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("[] = []")]),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (context == "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"null"),Object(a["createTextVNode"])(") context = globalThis\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"typeof"),Object(a["createTextVNode"])(" context !== "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'object'"),Object(a["createTextVNode"])(") context = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Object"),Object(a["createTextVNode"])("(context) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 值类型，变为对象"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" fnKey = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Symbol"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 不会出现属性名称的覆盖"),Object(a["createTextVNode"])("\n  context[fnKey] = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// this 就是当前的函数"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" res = context[fnKey](...args) "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 绑定了 this"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"delete"),Object(a["createTextVNode"])(" context[fnKey] "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 清理掉 fn ，防止污染"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" res\n}\n")])]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("使用 "),Object(a["createElementVNode"])("code",null,"obj.fn"),Object(a["createTextVNode"])(" 执行，即可设置 "),Object(a["createElementVNode"])("code",null,"fn"),Object(a["createTextVNode"])(" 执行时的 "),Object(a["createElementVNode"])("code",null,"this")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("考虑 "),Object(a["createElementVNode"])("code",null,"context"),Object(a["createTextVNode"])(" 各种情况")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("使用 "),Object(a["createElementVNode"])("code",null,"symbol"),Object(a["createTextVNode"])(" 类型扩展属性")])])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},f77a:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"MVVM 关键要素"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"数据（依赖绑定） 模板（模板解析） render（vdom）")]),Object(a["createElementVNode"])("h2",null,"通过一个 demo"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-html"},[Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"id"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"app"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"input"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-model"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"title"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-on:click"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"add"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("submit"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"button"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"v-for"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"item in list"'),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("{{item}}"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"li"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"ul"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"div"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"src"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"./vue-2.5.1.js"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("<"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])("="),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"text/javascript"'),Object(a["createTextVNode"])(">")]),Object(a["createElementVNode"])("span",{class:"language-javascript"},[Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"var"),Object(a["createTextVNode"])(" vm = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"el"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(",\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"data"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"title"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])(",\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"list"),Object(a["createTextVNode"])(": []\n        },\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"methods"),Object(a["createTextVNode"])(": {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"add"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(" ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"list"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(")\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"title"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n            }\n        }\n    })\n")]),Object(a["createElementVNode"])("span",{class:"hljs-tag"},[Object(a["createTextVNode"])("</"),Object(a["createElementVNode"])("span",{class:"hljs-name"},"script"),Object(a["createTextVNode"])(">")]),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"关键要素分析"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"响应式：vue 中的 data 数据，随便一改动，视图就能随着变化——如何监听这个变化的呢？"),Object(a["createElementVNode"])("li",null,"模板解析：模板看似是 html 但是它不是，因为它有指令，因此它是有逻辑的、动态的，而 html 只是静态的"),Object(a["createElementVNode"])("li",null,"渲染：页面一加载的显示，以及 data 变化之后的显示，如何做到的？特别是 rerender ，不能变化一点数据，页面全部都重新渲染。")]),Object(a["createElementVNode"])("h2",null,"三要素之间的关系"),Object(a["createElementVNode"])("p",null,"（可以用流程图展示）"),Object(a["createElementVNode"])("p",null,"（先不要深钻细节，先看看说的有没有道理，一步一步来）"),Object(a["createElementVNode"])("p",null,"第一，解析 data ，开始监听变化 第二，解析 template ，绑定 data 变化的监听事件 第三，第一次渲染 第四，当 data 有变化，根据此前的监听关系重新渲染")])],-1),s=[l];function n(e,t,c,l,n,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},f87f:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"手写 LazyMan"),Object(a["createElementVNode"])("h2",null,[Object(a["createTextVNode"])("实现 "),Object(a["createElementVNode"])("code",null,"sleep"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"eat"),Object(a["createTextVNode"])(" 两个方法，支持链式调用。")]),Object(a["createElementVNode"])("p",null,"代码示例："),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" me = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"LazyMan"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(")\nme."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'苹果'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'香蕉'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"sleep"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"5"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'葡萄'"),Object(a["createTextVNode"])(") "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 打印结果如下："),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// '张三 eat 苹果'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// '张三 eat 香蕉'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// （等待 5s）"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// '张三 eat 葡萄'"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("h2",null,"设计 class 框架"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-js"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"LazyMan"),Object(a["createTextVNode"])(" {\n    private "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": string\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"name: string"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"x: string"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 打印 eat 行为"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 支持链式调用"),Object(a["createTextVNode"])("\n    }\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"sleep"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"seconds: number"),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 等待 10s 的处理逻辑"),Object(a["createTextVNode"])("\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 支持链式调用"),Object(a["createTextVNode"])("\n    }\n}\n")])]),Object(a["createElementVNode"])("h2",null,"处理 sleep 逻辑"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("初始化一个任务队列，执行 "),Object(a["createElementVNode"])("code",null,"eat"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"sleep"),Object(a["createTextVNode"])(" 是都往队列插入一个函数。依次执行队列的任务，遇到 "),Object(a["createElementVNode"])("code",null,"sleep"),Object(a["createTextVNode"])(" 就延迟触发 "),Object(a["createElementVNode"])("code",null,"next"),Object(a["createTextVNode"])(" 。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%89%8B%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/img/sleep.png",alt:""})]),Object(a["createElementVNode"])("p",null,"代码参考"),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"LazyMan"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"tasks"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Function"),Object(a["createTextVNode"])("[] = [] "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 任务列表"),Object(a["createTextVNode"])("\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"constructor"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("name: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"name"),Object(a["createTextVNode"])(" = name\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"next"),Object(a["createTextVNode"])("()\n        })\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"private"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"next"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" task = "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tasks"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"shift"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 取出当前 tasks 的第一个任务"),Object(a["createTextVNode"])("\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (task) "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"task"),Object(a["createTextVNode"])("()\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("food: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"task"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") => {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"info"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},[Object(a["createTextVNode"])("`"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},[Object(a["createTextVNode"])("${"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(".name}")]),Object(a["createTextVNode"])(" eat "),Object(a["createElementVNode"])("span",{class:"hljs-subst"},"${food}"),Object(a["createTextVNode"])("`")]),Object(a["createTextVNode"])(")\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"next"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 立刻执行下一个任务"),Object(a["createTextVNode"])("\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tasks"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(task)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 链式调用"),Object(a["createTextVNode"])("\n    }\n\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"sleep"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("seconds: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"number")]),Object(a["createTextVNode"])(") {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"task"),Object(a["createTextVNode"])(" = ("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") => {\n            "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"info"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},[Object(a["createTextVNode"])("`"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},[Object(a["createTextVNode"])("${"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(".name}")]),Object(a["createTextVNode"])(" 开始睡觉`")]),Object(a["createTextVNode"])(")\n            "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"setTimeout"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},"() =>"),Object(a["createTextVNode"])(" {\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"info"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},[Object(a["createTextVNode"])("`"),Object(a["createElementVNode"])("span",{class:"hljs-subst"},[Object(a["createTextVNode"])("${"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(".name}")]),Object(a["createTextVNode"])(" 已经睡完了 "),Object(a["createElementVNode"])("span",{class:"hljs-subst"},"${seconds}"),Object(a["createTextVNode"])("s，开始执行下一个任务`")]),Object(a["createTextVNode"])(")\n                "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"next"),Object(a["createTextVNode"])("() "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// xx 秒之后再执行下一个任务"),Object(a["createTextVNode"])("\n            }, seconds * "),Object(a["createElementVNode"])("span",{class:"hljs-number"},"1000"),Object(a["createTextVNode"])(")\n        }\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"tasks"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("(task)\n\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 链式调用"),Object(a["createTextVNode"])("\n    }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" me = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"LazyMan"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'张三'"),Object(a["createTextVNode"])(")\nme."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'苹果'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'香蕉'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"sleep"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'葡萄'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'西瓜'"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"sleep"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-number"},"2"),Object(a["createTextVNode"])(")."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"eat"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'橘子'"),Object(a["createTextVNode"])(")\n")])]),Object(a["createElementVNode"])("h2",null,"总结"),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"链式调用"),Object(a["createElementVNode"])("li",null,"任务队列"),Object(a["createElementVNode"])("li",null,"延迟触发")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},f9e4:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createStaticVNode"])("<html><head></head><body><h1>Vue 组件通讯</h1><h2>题目</h2><p>Vue 组件通讯有几种方式，尽量全面</p><h2>props / $emit</h2><p>适用于父子组件。</p><ul><li>父组件向子组件传递 props 和事件</li><li>子组件接收 props ，使用 <code>this.$emit</code> 调用事件</li></ul><h2>自定义事件</h2><p>适用于兄弟组件，或者“距离”较远的组件。</p><p>常用 API</p><ul><li>绑定事件 <code>event.on(key, fn)</code> 或 <code>event.once(key, fn)</code></li><li>触发事件 <code>event.emit(key, data)</code></li><li>解绑事件 <code>event.off(key, fn)</code></li></ul><p>Vue 版本的区别</p><ul><li>Vue 2.x 可以使用 Vue 实例作为自定义事件</li><li>Vue 3.x 需要使用第三方的自定义事件，例如 https://www.npmjs.com/package/event-emitter</li></ul><p>【注意】组件销毁时记得 <code>off</code> 事件，否则可能会造成内存泄漏</p><h2>$attrs</h2><p><code>$attrs</code> 存储是父组件中传递过来的，且未在 <code>props</code> 和 <code>emits</code> 中定义的属性和事件。<br> 相当于 <code>props</code> 和 <code>emits</code> 的一个补充。</p><p>继续向下级传递，可以使用 <code>v-bind=&quot;$attrs&quot;</code>。这会在下级组件中渲染 DOM 属性，可以用 <code>inheritAttrs: false</code> 避免。</p><p>【注意】Vue3 中移除了 <code>$listeners</code> ，合并到了 <code>$attrs</code> 中。</p><h2>$parent</h2><p>通过 <code>this.$parent</code> 可以获取父组件，并可以继续获取属性、调用方法等。</p><p>【注意】Vue3 中移除了 <code>$children</code> ，建议使用 <code>$refs</code></p><h2>$refs</h2><p>通过 <code>this.$refs.xxx</code> 可以获取某个子组件，前提是模板中要设置 <code>ref=&quot;xxx&quot;</code>。</p><p>【注意】要在 <code>mounted</code> 中获取 <code>this.$refs</code> ，不能在 <code>created</code> 中获取。</p><h2>provide / inject</h2><p>父子组件通讯方式非常多。如果是多层级的上下级组件通讯，可以使用 provide 和 inject 。<br> 在上级组件定一个 provide ，下级组件即可通过 inject 接收。</p><ul><li>传递静态数据直接使用 <code>provide: { x: 10 }</code> 形式</li><li>传递组件数据需要使用 <code>provide() { return { x: this.xx } }</code> 形式，但做不到响应式</li><li>响应式需要借助 <code>computed</code> 来支持</li></ul><h2>Vuex</h2><p>Vuex 全局数据管理</p><h2>答案</h2><ul><li>父子组件通讯 <ul><li><code>props</code> <code>emits</code> <code>this.$emit</code></li><li><code>$attrs</code> （也可以通过 <code>v-bind=&quot;$attrs&quot;</code> 向下级传递）</li><li><code>$parent</code> <code>$refs</code></li></ul></li><li>多级组件上下级 <ul><li><code>provide</code> <code>inject</code></li></ul></li><li>跨级、全局 <ul><li>自定义事件</li><li>Vuex</li></ul></li></ul></body></html>",1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d},ffff:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=Object(a["createElementVNode"])("html",null,[Object(a["createElementVNode"])("head"),Object(a["createElementVNode"])("body",null,[Object(a["createElementVNode"])("h1",null,"微前端"),Object(a["createElementVNode"])("h2",null,"qiankun 的两种应用间通信方式"),Object(a["createElementVNode"])("p",null,"actions 通信及 shared 通信"),Object(a["createElementVNode"])("h2",null,"应该如何划分子应用"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("在开始介绍 "),Object(a["createElementVNode"])("code",null,"qiankun"),Object(a["createTextVNode"])(" 的应用通信之前，我们需要先了解微前端架构如何划分子应用。在微前端架构中，我们应该"),Object(a["createElementVNode"])("strong",null,"按业务划分出对应的子应用"),Object(a["createTextVNode"])("，而"),Object(a["createElementVNode"])("strong",null,"不是通过功能模块划分子应用"),Object(a["createTextVNode"])("。这么做的原因有两个：")]),Object(a["createElementVNode"])("ol",null,[Object(a["createElementVNode"])("li",null,"在微前端架构中，子应用并不是一个模块，而是一个独立的应用，我们将子应用按业务划分可以拥有更好的可维护性和解耦性。"),Object(a["createElementVNode"])("li",null,"子应用应该具备独立运行的能力，应用间频繁的通信会增加应用的复杂度和耦合度。 　　综上所述，我们应该从业务的角度出发划分各个子应用，尽可能减少应用间的通信，从而简化整个应用，使得我们的微前端架构可以更加灵活可控。")]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"补充一下，上面是理想状态，但是理想状态我们很难达到。微前端最核心的点，是可以做到技术栈无关。比如如果你为了做到技术栈无关，想体验不同的技术，那就无所谓了，直接按模块划分即可，因为单独独立的应用，很多公司遇到这种需求也蛮少。我就是为了实践不同技术栈，所以上了微前端。")]),Object(a["createElementVNode"])("p",null,"本次将介绍两种通信方式："),Object(a["createElementVNode"])("ol",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("第一种是 "),Object(a["createElementVNode"])("code",null,"qiankun"),Object(a["createTextVNode"])(" 官方提供的通信方式 - "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 通信，适合业务划分清晰，比较简单的微前端应用，一般来说使用第一种方案就可以满足大部分的应用场景需求。")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("第二种是基于 "),Object(a["createElementVNode"])("code",null,"redux"),Object(a["createTextVNode"])(" 实现的通信方式 - "),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信，适合需要跟踪通信状态，子应用具备独立运行能力，较为复杂的微前端应用。")])]),Object(a["createElementVNode"])("h2",null,"Actions 通信"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("我们先介绍官方提供的应用间通信方式 - "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 通信，这种通信方式比较适合业务划分清晰，应用间通信较少的微前端应用场景。")]),Object(a["createElementVNode"])("h3",null,"通信原理"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"qiankun"),Object(a["createTextVNode"])(" 内部提供了 "),Object(a["createElementVNode"])("code",null,"initGlobalState"),Object(a["createTextVNode"])(" 方法用于注册 "),Object(a["createElementVNode"])("code",null,"MicroAppStateActions"),Object(a["createTextVNode"])(" 实例用于通信，该实例有三个方法，分别是:")]),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"setGlobalState：设置 globalState - 设置新的值时，内部将执行 浅检查，如果检查到 globalState 发生改变则触发通知，通知到所有的 观察者 函数。"),Object(a["createElementVNode"])("li",null,"onGlobalStateChange：注册 观察者 函数 - 响应 globalState 变化，在 globalState 发生改变时触发该 观察者 函数。"),Object(a["createElementVNode"])("li",null,"offGlobalStateChange：取消 观察者 函数 - 该实例不再响应 globalState 变化。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("我们来画一张图来帮助大家理解（见下图） "),Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%A1%86%E6%9E%B6/img/1.png",alt:""}),Object(a["createTextVNode"])(" 我们从上图可以看出，我们可以先注册 观察者 到观察者池中，然后通过修改 "),Object(a["createElementVNode"])("code",null,"globalState"),Object(a["createTextVNode"])(" 可以触发所有的 观察者 函数，从而达到组件间通信的效果。")]),Object(a["createElementVNode"])("h3",null,"通信实例"),Object(a["createElementVNode"])("h4",null,"主应用需要做的工作"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("首先，我们在主应用中注册一个 "),Object(a["createElementVNode"])("code",null,"MicroAppStateActions"),Object(a["createTextVNode"])(" 实例并导出，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-main/src/shared/actions.ts"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" { initGlobalState, "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MicroAppStateActions"),Object(a["createTextVNode"])(" } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'qiankun'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" initialState = { "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"status"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'login'"),Object(a["createTextVNode"])(" } "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 全局状态池给了个默认值"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"shareActions"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"MicroAppStateActions"),Object(a["createTextVNode"])(" = "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"initGlobalState"),Object(a["createTextVNode"])("(initialState)\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" shareActions\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("在注册 "),Object(a["createElementVNode"])("code",null,"MicroAppStateActions"),Object(a["createTextVNode"])(" 实例后，我们在需要通信的组件中使用该实例，并注册 "),Object(a["createElementVNode"])("code",null,"观察者"),Object(a["createTextVNode"])(" 函数，我们这里以登录功能为例，实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 1、先引入 actions"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" actions "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'@/shared/actions'"),Object(a["createTextVNode"])("\n@Component\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Login"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"extends"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_ inherited__"},"Vue"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"mounted"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 2、注册一个观察者函数"),Object(a["createTextVNode"])("\n    actions."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"onGlobalStateChange"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"state, prevState"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n      "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'主应用观察者：token 改变前的值为 '"),Object(a["createTextVNode"])(", prevState."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"token"),Object(a["createTextVNode"])(")\n      "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("(\n        "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'主应用观察者：登录状态发生改变，改变后的 token 的值为 '"),Object(a["createTextVNode"])(",\n        state."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"token"),Object(a["createTextVNode"])("\n      )\n    })\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"login"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 3、触发状态池更新：登录成功后，设置 token"),Object(a["createTextVNode"])("\n    actions."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setGlobalState"),Object(a["createTextVNode"])("({ token })\n  }\n}\n")])]),Object(a["createElementVNode"])("h4",null,"子应用需要做的工作"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("我们首先来改造我们的 Vue 子应用，首先我们设置一个 "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 实例，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-vue/src/shared/actions.js"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"emptyAction"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 警告：提示当前使用的是空 Action"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"warn"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'Current execute action is empty!'"),Object(a["createTextVNode"])(")\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Actions"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 默认值为空 Action"),Object(a["createTextVNode"])("\n  actions = {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"onGlobalStateChange"),Object(a["createTextVNode"])(": emptyAction,\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"setGlobalState"),Object(a["createTextVNode"])(": emptyAction,\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 设置 actions"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setActions"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"actions"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"actions"),Object(a["createTextVNode"])(" = actions\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 映射"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"onGlobalStateChange"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"...args"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"actions"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"onGlobalStateChange"),Object(a["createTextVNode"])("(...args)\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 映射"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setGlobalState"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"...args"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"actions"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setGlobalState"),Object(a["createTextVNode"])("(...args)\n  }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" actions = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Actions"),Object(a["createTextVNode"])("()\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" actions\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("我们创建 "),Object(a["createElementVNode"])("code",null,"actions"),Object(a["createTextVNode"])(" 实例后，我们需要为其注入真实 "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])("。我们在入口文件 "),Object(a["createElementVNode"])("code",null,"main.js"),Object(a["createTextVNode"])(" 的 "),Object(a["createElementVNode"])("code",null,"render"),Object(a["createTextVNode"])(" 函数中注入，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-vue/src/main.js"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"//..."),Object(a["createTextVNode"])("\n\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"/**\n  * 渲染函数\n  * 主应用生命周期钩子中运行/子应用单独启动时运行\n  */"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"props"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (props) {\n      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注入 actions 实例"),Object(a["createTextVNode"])("\n      actions."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setActions"),Object(a["createTextVNode"])("(props);\n    }\n    ......\n  }\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从上面的代码可以看出，挂载子应用时将会调用 "),Object(a["createElementVNode"])("code",null,"render"),Object(a["createTextVNode"])(" 方法，我们在 "),Object(a["createElementVNode"])("code",null,"render"),Object(a["createTextVNode"])(" 方法中将主应用的 "),Object(a["createElementVNode"])("code",null,"actions"),Object(a["createTextVNode"])(" 实例注入即可。 最后我们在子应用的 通讯页 获取 "),Object(a["createElementVNode"])("code",null,"globalState"),Object(a["createTextVNode"])(" 中的 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])("，使用 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])(" 来获取用户信息，最后在页面中显示用户信息。流程伪代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 引入 actions 实例"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" actions "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"@/shared/actions"'),Object(a["createTextVNode"])(";\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" {\n  ......\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"mounted"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注册观察者函数：onGlobalStateChange 第二个参数为 true，表示立即执行一次观察者函数"),Object(a["createTextVNode"])("\n    actions."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"onGlobalStateChange"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"state"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" { token } = state;\n      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 未登录 - 返回主页"),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"if"),Object(a["createTextVNode"])(" (!token) {\n        "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$message"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"error"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"未检测到登录信息！"'),Object(a["createTextVNode"])(");\n        "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$router"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"/"'),Object(a["createTextVNode"])(");\n      }\n      "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 获取用户信息"),Object(a["createTextVNode"])("\n      "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getUserInfo"),Object(a["createTextVNode"])("(token);\n    }, "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"true"),Object(a["createTextVNode"])(");\n  },\n  ......\n};\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从上面的代码可以看到，我们在组件挂载时注册了一个 观察者 函数并立即执行，从 "),Object(a["createElementVNode"])("code",null,"globalState/state"),Object(a["createTextVNode"])(" 中获取 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])("，然后使用 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])(" 获取用户信息，最终渲染在页面中。")]),Object(a["createElementVNode"])("h3",null,"在项目里实战：在 Nuxt.js 里使用的问题"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("由于在 "),Object(a["createElementVNode"])("code",null,"nuxtjs"),Object(a["createTextVNode"])(" 里服务器不支持浏览器相关的 "),Object(a["createElementVNode"])("code",null,"api"),Object(a["createTextVNode"])("，如 "),Object(a["createElementVNode"])("code",null,"actions"),Object(a["createTextVNode"])(" 的 "),Object(a["createElementVNode"])("code",null,"initGlobalState"),Object(a["createTextVNode"])(" 里却使用了很多浏览器 "),Object(a["createElementVNode"])("code",null,"api"),Object(a["createTextVNode"])("，所以会报错。如何解决呢？ 使用 插件 "),Object(a["createElementVNode"])("code",null,"plugins"),Object(a["createTextVNode"])(" 配合 "),Object(a["createElementVNode"])("code",null,"ssr: false"),Object(a["createTextVNode"])("，使插件在客户端时才加载，这样就可以了。")]),Object(a["createElementVNode"])("ol",null,[Object(a["createElementVNode"])("li",null,"主应用需要做的")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ssr: false 插件里引入"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" shareActions "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'@/utils/shareActions'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 注册一个观察者函数"),Object(a["createTextVNode"])("\nshareActions."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"onGlobalStateChange"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"state, prevState"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"console"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"log"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'主应用观察者：变更前-'"),Object(a["createTextVNode"])(", state, "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'，变更后-'"),Object(a["createTextVNode"])(", prevState)\n})\n"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},[Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"prototype")]),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$actions"),Object(a["createTextVNode"])(" = shareActions\n")])]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 在需要使用的地方直接这样操作即可"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$actions"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setGlobalState"),Object(a["createTextVNode"])("({ "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"logStatus"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'logout'"),Object(a["createTextVNode"])(" })\n")])]),Object(a["createElementVNode"])("ol",{start:"2"},[Object(a["createElementVNode"])("li",null,"子应用对应业务")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 子应用里直接注册监听函数，然后做对应业务即可"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"mount"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("props: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any")]),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// console.log('[vue] props from main framework', props)"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("()\n  props?."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"onGlobalStateChange"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},[Object(a["createTextVNode"])("state: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any")]),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(" {\n    state?."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"logStatus"),Object(a["createTextVNode"])(" === "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'logout'"),Object(a["createTextVNode"])(" && store."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"commit"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'clearToken'"),Object(a["createTextVNode"])(")\n  }, "),Object(a["createElementVNode"])("span",{class:"hljs-literal"},"true"),Object(a["createTextVNode"])(")\n}\n")])]),Object(a["createElementVNode"])("h3",null,"小结"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("到这里，"),Object(a["createElementVNode"])("code",null,"qiankun"),Object(a["createTextVNode"])(" 基础通信 就完成了！我们在主应用中实现了登录功能，登录拿到 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])(" 后存入 "),Object(a["createElementVNode"])("code",null,"globalState"),Object(a["createTextVNode"])(" 状态池中。在进入子应用时，我们使用 "),Object(a["createElementVNode"])("code",null,"actions"),Object(a["createTextVNode"])(" 获取 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])("，再使用 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])(" 获取到用户信息，完成页面数据渲染！")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("最后我们画一张图帮助大家理解这个流程（见下图）： "),Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%A1%86%E6%9E%B6/img/2.png",alt:""})]),Object(a["createElementVNode"])("h2",null,"Shared 通信"),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("由于 "),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 方案实现起来会较为复杂，所以当 "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 通信方案满足需求时，使用 "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 通信方案可以得到更好的官方支持。")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("官方提供的 "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 通信方案是通过全局状态池和观察者函数进行应用间通信，该通信方式适合大部分的场景。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 通信方案也存在一些优缺点，优点如下：")]),Object(a["createElementVNode"])("ol",null,[Object(a["createElementVNode"])("li",null,"使用简单；"),Object(a["createElementVNode"])("li",null,"官方支持性高；"),Object(a["createElementVNode"])("li",null,"适合通信较少的业务场景；")]),Object(a["createElementVNode"])("p",null,"缺点如下："),Object(a["createElementVNode"])("ol",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子应用独立运行时，需要额外配置无 "),Object(a["createElementVNode"])("code",null,"Actions"),Object(a["createTextVNode"])(" 时的逻辑；")]),Object(a["createElementVNode"])("li",null,"子应用需要先了解状态池的细节，再进行通信；"),Object(a["createElementVNode"])("li",null,"由于状态池无法跟踪，通信场景较多时，容易出现状态混乱、维护困难等问题；")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("如果你的应用通信场景较多，希望子应用具备完全独立运行能力，希望主应用能够更好的管理子应用，那么可以考虑 "),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信方案。")]),Object(a["createElementVNode"])("h3",null,"通信原理"),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信方案的原理就是，主应用基于 "),Object(a["createElementVNode"])("code",null,"redux"),Object(a["createTextVNode"])(" 维护一个状态池，通过 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例暴露一些方法给子应用使用。同时，子应用需要单独维护一份 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例，在独立运行时使用自身的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例，在嵌入主应用时使用主应用的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例，这样就可以保证在使用和表现上的一致性。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信方案需要自行维护状态池，这样会增加项目的复杂度。好处是可以使用市面上比较成熟的状态管理工具，如 "),Object(a["createElementVNode"])("code",null,"redux"),Object(a["createTextVNode"])("、"),Object(a["createElementVNode"])("code",null,"mobx"),Object(a["createTextVNode"])("，可以有更好的状态管理追踪和一些工具集。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信方案要求父子应用都各自维护一份属于自己的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例，同样会增加项目的复杂度。好处是子应用可以完全独立于父应用运行（不依赖状态池），子应用也能以最小的改动被嵌入到其他 第三方应用 中。")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信方案也可以帮助主应用更好的管控子应用。子应用只可以通过 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例来操作状态池，可以避免子应用对状态池随意操作引发的一系列问题。主应用的 "),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 相对于子应用来说是一个黑箱，子应用只需要了解 "),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 所暴露的 "),Object(a["createElementVNode"])("code",null,"API"),Object(a["createTextVNode"])(" 而无需关心实现细节。")]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"个人总结一下："),Object(a["createElementVNode"])("ol",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("比如我们主应用使用现有 "),Object(a["createElementVNode"])("code",null,"vuex"),Object(a["createTextVNode"])(" 状态管理，然后再提供一个 shared 实例暴露一些 api 来操作其 "),Object(a["createElementVNode"])("code",null,"vuex"),Object(a["createTextVNode"])("，再把 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例通过 "),Object(a["createElementVNode"])("code",null,"props"),Object(a["createTextVNode"])(" 传给子应用；")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子应用使用现有 vuex 状态管理，子应用也实现自己的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])("；然后在入口文件处如果主应用有传 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例，则使用主应用实例，没有（即独立运行时）则使用子应用自己的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例。")])])]),Object(a["createElementVNode"])("h3",null,"通信实例"),Object(a["createElementVNode"])("h4",null,"主应用的工作"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("首先我们需要在主应用中创建 "),Object(a["createElementVNode"])("code",null,"store"),Object(a["createTextVNode"])(" 用于管理全局状态池，这里我们使用 "),Object(a["createElementVNode"])("code",null,"redux"),Object(a["createTextVNode"])(" 来实现，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-main/src/shared/store.ts"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" { createStore } "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'redux'"),Object(a["createTextVNode"])("\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"State"),Object(a["createTextVNode"])(" = {\n  token?: "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"type"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Action"),Object(a["createTextVNode"])(" = {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"payload"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"any"),Object(a["createTextVNode"])("\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" reducer = ("),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"state"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"State"),Object(a["createTextVNode"])(" = {}, "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"action"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Action"),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createElementVNode"])("span",{class:"hljs-params"},"State"),Object(a["createTextVNode"])(" =>")]),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"switch"),Object(a["createTextVNode"])(" (action."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"type"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"default"),Object(a["createTextVNode"])(":\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" state\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 设置 Token"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"case"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'SET_TOKEN'"),Object(a["createTextVNode"])(":\n      "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" {\n        ...state,\n        "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"token"),Object(a["createTextVNode"])(": action."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"payload"),Object(a["createTextVNode"])(",\n      }\n  }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" store = createStore<"),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"State"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Action"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"unknown"),Object(a["createTextVNode"])(", "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"unknown"),Object(a["createTextVNode"])(">(reducer)\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" store\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从上面可以看出，我们使用 "),Object(a["createElementVNode"])("code",null,"redux"),Object(a["createTextVNode"])(" 创建了一个全局状态池，并设置了一个 "),Object(a["createElementVNode"])("code",null,"reducer"),Object(a["createTextVNode"])(" 用于修改 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])(" 的值。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("接下来我们需要实现主应用的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-main/src/shared/index.ts"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" store "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'./store'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Shared"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 获取 Token"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"public"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getToken"),Object(a["createTextVNode"])("(): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" state = store."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getState"),Object(a["createTextVNode"])("()\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(" state."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"token"),Object(a["createTextVNode"])(" || "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 设置 Token"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"public"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setToken"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"token"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"string"),Object(a["createTextVNode"])("): "),Object(a["createElementVNode"])("span",{class:"hljs-built_in"},"void"),Object(a["createTextVNode"])(" {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 将 token 的值记录在 store 中"),Object(a["createTextVNode"])("\n    store."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"dispatch"),Object(a["createTextVNode"])("({\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"type"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'SET_TOKEN'"),Object(a["createTextVNode"])(",\n      "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"payload"),Object(a["createTextVNode"])(": token,\n    })\n  }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" shared = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Shared"),Object(a["createTextVNode"])("()\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" shared\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从上面实现可以看出，我们的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实现非常简单，"),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例包括两个方法 "),Object(a["createElementVNode"])("code",null,"getToken"),Object(a["createTextVNode"])(" 和 "),Object(a["createElementVNode"])("code",null,"setToken"),Object(a["createTextVNode"])(" 分别用于获取 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])(" 和设置 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])("。接下来我们还需要对我们的 登录组件 进行改造，将 "),Object(a["createElementVNode"])("code",null,"login"),Object(a["createTextVNode"])(" 方法修改一下，修改如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-main/src/pages/login/index.vue"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ..."),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"async"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"login"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// ApiLoginQuickly 是一个远程登录函数，用于获取 token，详见 Demo"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" result = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"await"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"ApiLoginQuickly"),Object(a["createTextVNode"])("();\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" { token } = result."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"data"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"loginQuickly"),Object(a["createTextVNode"])(";\n\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 使用 shared 的 setToken 方法记录 token"),Object(a["createTextVNode"])("\n  shared."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setToken"),Object(a["createTextVNode"])("(token);\n  "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"this"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"$router"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"push"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},'"/"'),Object(a["createTextVNode"])(");\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从上面可以看出，在登录成功后，我们将通过 "),Object(a["createElementVNode"])("code",null,"shared.setToken"),Object(a["createTextVNode"])(" 方法进行业务处理将 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])(" 记录在 "),Object(a["createElementVNode"])("code",null,"store"),Object(a["createTextVNode"])(" 中。")]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("最后，我们需要将 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例通过 "),Object(a["createElementVNode"])("code",null,"props"),Object(a["createTextVNode"])(" 传递给子应用，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-main/src/micro/apps.ts"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(" shared "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'@/shared'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" apps = [\n  {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'ReactMicroApp'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"entry"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'//localhost:10100'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"container"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#frame'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"activeRule"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/react'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 通过 props 将 shared 传递给子应用"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"props"),Object(a["createTextVNode"])(": { shared },\n  },\n  {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"name"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'VueMicroApp'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"entry"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'//localhost:10200'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"container"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#frame'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"activeRule"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/vue'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 通过 props 将 shared 传递给子应用"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"props"),Object(a["createTextVNode"])(": { shared },\n  },\n]\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" apps\n")])]),Object(a["createElementVNode"])("h4",null,"子应用的工作"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("现在，我们来处理子应用需要做的工作。我们刚才提到，我们希望子应用有独立运行的能力，所以子应用也应该实现 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])("，以便在独立运行时可以拥有兼容处理能力。代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-vue/src/shared/index.js"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Shared"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 获取 Token"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getToken"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 子应用独立运行时，在 localStorage 中获取 token"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"localStorage"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getItem"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'token'"),Object(a["createTextVNode"])(") || "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"''"),Object(a["createTextVNode"])("\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 设置 Token"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setToken"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"token"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 子应用独立运行时，在 localStorage 中设置 token"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"localStorage"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"setItem"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'token'"),Object(a["createTextVNode"])(", token)\n  }\n}\n\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"class"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"static"),Object(a["createTextVNode"])(" shared = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Shared"),Object(a["createTextVNode"])("()\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 重载 shared"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"static"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"overloadShared"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"shared"),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"shared"),Object(a["createTextVNode"])(" = shared\n  }\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 获取 shared 实例"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"static"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getShared"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"return"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"shared"),Object(a["createTextVNode"])("\n  }\n}\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])("\n")])]),Object(a["createElementVNode"])("p",null,"从上面我们可以看到两个类，我们来分析一下其用处："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])("：子应用自身的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])("，子应用独立运行时将使用该 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])("，子应用的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 使用 "),Object(a["createElementVNode"])("code",null,"localStorage"),Object(a["createTextVNode"])(" 来操作 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])("；")]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("code",null,"SharedModule"),Object(a["createTextVNode"])("：用于管理 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])("，例如重载 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例、获取 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例等等；")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("我们实现了子应用的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 后，我们需要在入口文件处注入 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])("，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// micro-app-vue/src/main.js"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 渲染函数：主应用生命周期钩子中运行/子应用单独启动时运行"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"function"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"render"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"props = {}"),Object(a["createTextVNode"])(") {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 当传入的 shared 为空时，使用子应用自身的 shared"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 当传入的 shared 不为空时，主应用传入的 shared 将会重载子应用的 shared"),Object(a["createTextVNode"])("\n  "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" { shared = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getShared"),Object(a["createTextVNode"])("() } = props\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"overloadShared"),Object(a["createTextVNode"])("(shared)\n\n  router = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"VueRouter"),Object(a["createTextVNode"])("({\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"base"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-variable language_"},"window"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-property"},"__POWERED_BY_QIANKUN__"),Object(a["createTextVNode"])(" ? "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/vue'"),Object(a["createTextVNode"])(" : "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'/'"),Object(a["createTextVNode"])(",\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"mode"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'history'"),Object(a["createTextVNode"])(",\n    routes,\n  })\n  "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 挂载应用"),Object(a["createTextVNode"])("\n  instance = "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"new"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"Vue"),Object(a["createTextVNode"])("({\n    router,\n    "),Object(a["createElementVNode"])("span",{class:"hljs-attr"},"render"),Object(a["createTextVNode"])(": "),Object(a["createElementVNode"])("span",{class:"hljs-function"},[Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"},"h"),Object(a["createTextVNode"])(") =>")]),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"h"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"App"),Object(a["createTextVNode"])("),\n  }).$mount("),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'#app'"),Object(a["createTextVNode"])(")\n}\n")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("从上面可以看出，我们在 "),Object(a["createElementVNode"])("code",null,"props"),Object(a["createTextVNode"])(" 的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 字段不为空时，将会使用传入的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 重载子应用自身的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])("。这样做的话，主应用的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 和子应用的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 在使用时的表现是一致的。 然后我们修改子应用的 通讯页，使用 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例获取 "),Object(a["createElementVNode"])("code",null,"token"),Object(a["createTextVNode"])("，代码实现如下：")]),Object(a["createElementVNode"])("pre",null,[Object(a["createElementVNode"])("code",{"v-pre":"",class:"language-ts"},[Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 引入 SharedModule"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"import"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"from"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-string"},"'@/shared'"),Object(a["createTextVNode"])("\n"),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"export"),Object(a["createTextVNode"])(),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"default"),Object(a["createTextVNode"])(" {\n  "),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"mounted"),Object(a["createTextVNode"])("("),Object(a["createElementVNode"])("span",{class:"hljs-params"}),Object(a["createTextVNode"])(") {\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" shared = "),Object(a["createElementVNode"])("span",{class:"hljs-title class_"},"SharedModule"),Object(a["createTextVNode"])("."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getShared"),Object(a["createTextVNode"])("()\n    "),Object(a["createElementVNode"])("span",{class:"hljs-comment"},"// 使用 shared 获取 token"),Object(a["createTextVNode"])("\n    "),Object(a["createElementVNode"])("span",{class:"hljs-keyword"},"const"),Object(a["createTextVNode"])(" token = shared."),Object(a["createElementVNode"])("span",{class:"hljs-title function_"},"getToken"),Object(a["createTextVNode"])("()\n  },\n}\n")])]),Object(a["createElementVNode"])("h3",null,"小结"),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("我们从上面的案例也可以看出 "),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信方案的优缺点，这里也做一些简单的分析:")]),Object(a["createElementVNode"])("p",null,"优点有这些："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("可以自由选择状态管理库，更好的开发体验。 - 比如 "),Object(a["createElementVNode"])("code",null,"redux"),Object(a["createTextVNode"])(" 有专门配套的开发工具可以跟踪状态的变化。")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子应用无需了解主应用的状态池实现细节，只需要了解 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 的函数抽象，实现一套自身的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 甚至空 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 即可，可以更好的规范子应用开发。")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子应用无法随意污染主应用的状态池，只能通过主应用暴露的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例的特定方法操作状态池，从而避免状态池污染产生的问题。")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子应用将具备独立运行的能力，"),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信使得父子应用有了更好的解耦性。")])]),Object(a["createElementVNode"])("p",null,"缺点也有两个："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,"主应用需要单独维护一套状态池，会增加维护成本和项目复杂度；"),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子应用需要单独维护一份 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例，会增加维护成本； "),Object(a["createElementVNode"])("code",null,"Shared"),Object(a["createTextVNode"])(" 通信方式也是有利有弊，更高的维护成本带来的是应用的健壮性和可维护性。")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("最后我们来画一张图对 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 通信的原理和流程进行解析（见下图）： "),Object(a["createElementVNode"])("img",{src:"https://sunny586.github.io/dist/mark-down/fe-interview/%E6%A1%86%E6%9E%B6/img/3.png",alt:""})]),Object(a["createElementVNode"])("p",null,"个人总结一下实践应用的几个步骤："),Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("主应用：自身 "),Object(a["createElementVNode"])("code",null,"store（vuex）"),Object(a["createTextVNode"])("状态管理 —— 创建 shared 实例 对 "),Object(a["createElementVNode"])("code",null,"store"),Object(a["createTextVNode"])(" 进行部分 "),Object(a["createElementVNode"])("code",null,"api"),Object(a["createTextVNode"])(" 管理 —— 在使用的时候引入 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例触发对 "),Object(a["createElementVNode"])("code",null,"vuex"),Object(a["createTextVNode"])(" 状态的 "),Object(a["createElementVNode"])("code",null,"api"),Object(a["createTextVNode"])(" 管理 —— 将 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例通过 "),Object(a["createElementVNode"])("code",null,"props"),Object(a["createTextVNode"])(" 传给子应用。")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("子应用：自身 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例、自身 "),Object(a["createElementVNode"])("code",null,"sharedModule"),Object(a["createTextVNode"])(" 管理 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例 —— 在入口处，主应用有传 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例则使用主应用 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例覆载自身的实例；若未传（即独立运行）则使用自身的 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例 —— 在使用的时候引入 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例触发 "),Object(a["createElementVNode"])("code",null,"api"),Object(a["createTextVNode"])(" 管理")]),Object(a["createElementVNode"])("li",null,[Object(a["createTextVNode"])("这样的话子应用也可以有自己的 "),Object(a["createElementVNode"])("code",null,"store"),Object(a["createTextVNode"])(" 状态管理，若想保证自己的状态管理和主应用的状态管理一直，则再触发 "),Object(a["createElementVNode"])("code",null,"vuex"),Object(a["createTextVNode"])(" 更新的时候，调用 "),Object(a["createElementVNode"])("code",null,"shared"),Object(a["createTextVNode"])(" 实例触发主应用 "),Object(a["createElementVNode"])("code",null,"vuex"),Object(a["createTextVNode"])(" 更新即可。")])]),Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])("到这里，两种 "),Object(a["createElementVNode"])("code",null,"qiankun"),Object(a["createTextVNode"])(" 应用间通信方案就分享完啦！两种通信方案都有合适的使用场景，大家可以结合自己的需要选择即可。")]),Object(a["createElementVNode"])("blockquote",null,[Object(a["createElementVNode"])("p",null,"来自于这篇文章的学习及在项目中的实战使用： 《基于 qiankun 的微前端最佳实践 - 应用间通信篇 - https://juejin.cn/post/6844904151231496200》")])])],-1),s=[l];function n(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,s)}var r=c("b9a6"),o=c.n(r);const j={},d=o()(j,[["render",n]]);t["default"]=d}});